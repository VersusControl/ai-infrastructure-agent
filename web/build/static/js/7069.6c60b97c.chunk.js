"use strict";(self.webpackChunkweb_ui_react=self.webpackChunkweb_ui_react||[]).push([[7069],{3681:(e,t,r)=>{r.d(t,{aO:()=>s,js:()=>n});const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return new Promise(s=>{const n=new XMLHttpRequest,o=t.method||"GET",a=setTimeout(()=>{n.abort(),console.warn("\u26a0\ufe0f Request timeout: ".concat(e)),s({ok:!1,status:0,statusText:"Timeout",data:null,error:"Request timeout"})},r);n.onload=()=>{clearTimeout(a);let e=null,t=null;try{n.responseText&&(e=JSON.parse(n.responseText))}catch(r){console.warn("Failed to parse response:",r),t="Failed to parse response"}s({ok:n.status>=200&&n.status<300,status:n.status,statusText:n.statusText,data:e,error:t||(n.status>=200&&n.status<300?null:n.statusText)})},n.onerror=()=>{clearTimeout(a),console.warn("\u26a0\ufe0f Request failed: ".concat(e)),s({ok:!1,status:0,statusText:"Network Error",data:null,error:"Network error"})},n.onabort=()=>{clearTimeout(a),s({ok:!1,status:0,statusText:"Aborted",data:null,error:"Request aborted"})};try{n.open(o,e,!0),t.headers&&Object.entries(t.headers).forEach(e=>{let[t,r]=e;n.setRequestHeader(t,r)}),t.body?n.send(t.body):n.send()}catch(i){clearTimeout(a),console.warn("\u274c Request error: ".concat(e),i.message),s({ok:!1,status:0,statusText:"Error",data:null,error:i.message})}})},n=()=>{const e=e=>{if(e.message&&e.message.includes("Failed to fetch")){var t;const r=(null===(t=e.error)||void 0===t?void 0:t.stack)||"";if(r.includes("/state")||r.includes("checkBackendHealth")||r.includes("safeFetch")||!r)return console.warn("\ud83d\udd07 Suppressed fetch error"),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1}},t=e=>{var t,r;const s=(null===(t=e.reason)||void 0===t?void 0:t.message)||(null===(r=e.reason)||void 0===r?void 0:r.toString())||"";if(s.includes("Failed to fetch")||s.includes("fetch")){var n;const t=(null===(n=e.reason)||void 0===n?void 0:n.stack)||"";if(t.includes("/state")||t.includes("checkBackendHealth")||t.includes("safeFetch")||s.includes("/state")||!t)return console.warn("\ud83d\udd07 Suppressed promise rejection"),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1}};return window.addEventListener("error",e,!0),window.addEventListener("unhandledrejection",t,!0),()=>{window.removeEventListener("error",e,!0),window.removeEventListener("unhandledrejection",t,!0)}}},7250:(e,t,r)=>{r.d(t,{A:()=>a});var s=r(9379);const n=new class{constructor(){this.mockEnabled=!1,console.log("MockDataService initialized. Mock enabled:",this.mockEnabled)}async delay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;return new Promise(t=>setTimeout(t,e))}async loadMockData(e){try{const t=await fetch("/mocks/".concat(e));if(!t.ok)throw new Error("Failed to load mock data: ".concat(e));return await t.json()}catch(t){throw console.error("Error loading mock data:",t),t}}async getDependencyGraph(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;await this.delay(800);try{let t;t="live"===e?"mock-discovery-live.json":"mock-generate-graph.json";const r=await this.loadMockData(t);return this.transformGraphData(r)}catch(t){throw console.error("Mock getDependencyGraph error:",t),new Error("Failed to load mock dependency graph: ".concat(t.message))}}transformGraphData(e){if(e.mermaid&&e.graph)return{mermaid:e.mermaid,graph:e.graph,timestamp:e.timestamp||(new Date).toISOString(),metadata:e.metadata||this.generateDefaultMetadata(e),source:e.source||"unknown",format:e.format||"mermaid"};if(e.mermaid)return{mermaid:e.mermaid,graph:null,timestamp:e.timestamp||(new Date).toISOString(),metadata:e.metadata||this.generateDefaultMetadata(e)};if(e.graph&&e.graph.edges){return{mermaid:this.convertGraphToMermaid(e.graph),graph:e.graph,timestamp:(new Date).toISOString(),metadata:this.generateMetadataFromGraph(e.graph)}}throw new Error("Invalid mock data format")}convertGraphToMermaid(e){const t=["graph TD"],r=new Set,s={};return e.edges.forEach(e=>{r.add(e.source),r.add(e.target);const t=e.source.replace(/[^a-zA-Z0-9_]/g,"_"),n=e.target.replace(/[^a-zA-Z0-9_]/g,"_");e.source.startsWith("vpc-")?s[t]="vpc":e.source.startsWith("subnet-")?s[t]="subnet":e.source.startsWith("sg-")?s[t]="sg":e.source.startsWith("i-")?s[t]="ec2":e.source.startsWith("lt-")?s[t]="lt":e.source.startsWith("nat-")?s[t]="natgw":e.source.includes("targetgroup")?s[t]="tg":e.source.includes("loadbalancer")||e.source.includes("app/")||e.source.includes("net/")?s[t]="lb":(e.source.includes("database")||e.source.includes("cluster"))&&(s[t]="rds"),e.target.startsWith("vpc-")?s[n]="vpc":e.target.startsWith("subnet-")?s[n]="subnet":e.target.startsWith("sg-")?s[n]="sg":e.target.startsWith("i-")?s[n]="ec2":e.target.startsWith("lt-")?s[n]="lt":e.target.startsWith("nat-")?s[n]="natgw":e.target.includes("targetgroup")?s[n]="tg":e.target.includes("loadbalancer")||e.target.includes("app/")||e.target.includes("net/")?s[n]="lb":(e.target.includes("database")||e.target.includes("cluster"))&&(s[n]="rds")}),t.push(""),r.forEach(e=>{const r=s[e]||"default",n=e.replace(/[^a-zA-Z0-9_]/g,"_");t.push("    ".concat(n,'["').concat(e,'"]:::').concat(r))}),t.push(""),e.edges.forEach(e=>{const r=e.source.replace(/[^a-zA-Z0-9_]/g,"_"),s=e.target.replace(/[^a-zA-Z0-9_]/g,"_");t.push("    ".concat(r," --\x3e ").concat(s))}),t.push(""),t.push("    classDef vpc fill:#e1f5fe"),t.push("    classDef subnet fill:#b3e5fc"),t.push("    classDef ec2 fill:#fff3e0"),t.push("    classDef sg fill:#f3e5f5"),t.push("    classDef lb fill:#e8f5e8"),t.push("    classDef asg fill:#fce4ec"),t.push("    classDef natgw fill:#e0f2f1"),t.push("    classDef tg fill:#f1f8e9"),t.push("    classDef rds fill:#fff9c4"),t.push("    classDef lt fill:#fce4ec"),t.push("    classDef default fill:#f5f5f5"),t.join("\n")}generateMetadataFromGraph(e){const t={},r=new Set;return e.edges.forEach(e=>{r.add(e.source),r.add(e.target);const s=this.detectNodeType(e.source),n=this.detectNodeType(e.target);t[s]=(t[s]||0)+1,t[n]=(t[n]||0)+1}),{nodeCount:r.size,edgeCount:e.edges.length,resourceTypeCounts:t,bottlenecks:this.generateMockBottlenecks(r)}}detectNodeType(e){return e.startsWith("vpc-")?"VPC":e.startsWith("subnet-")?"Subnet":e.startsWith("sg-")?"Security Group":e.startsWith("i-")?"EC2 Instance":e.startsWith("lt-")?"Launch Template":e.includes("targetgroup")?"Target Group":e.includes("loadbalancer")?"Load Balancer":"Other"}generateMockBottlenecks(e){const t=[];let r=0;return e.forEach(e=>{r>=3||e.startsWith("vpc-")&&(t.push({resource:e,dependents:Math.floor(20*Math.random())+10,impact:"high",reason:"Multiple resources depend on this VPC"}),r++)}),t}generateDefaultMetadata(e){return{nodeCount:0,edgeCount:0,resourceTypeCounts:{},bottlenecks:[]}}};var o=r(3681);const a=new class{constructor(){this.baseURL="http://localhost:8080/api",this.baseURL=this.baseURL.replace(/\/$/,""),this.mockEnabled=!1,console.log("ApiService initialized with baseURL:",this.baseURL),console.log("Mock mode enabled:",this.mockEnabled)}async call(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="".concat(this.baseURL).concat(e),n=(0,s.A)({headers:(0,s.A)({"Content-Type":"application/json"},t.headers)},t);try{const e=await fetch(r,n);if(!e.ok){let t="HTTP ".concat(e.status,": ").concat(e.statusText),r=null;try{const s=await e.text();if(s)try{const e=JSON.parse(s);e.error?t=e.error:e.message?t=e.message:e.detail&&(t=e.detail),r=e}catch(o){s.length<200&&(t=s)}}catch(a){console.warn("Could not read error response body:",a)}const s=new Error(t);throw s.status=e.status,s.statusText=e.statusText,s.details=r,s}const t=await e.text();if(!t)throw new Error("Empty response from server");try{return JSON.parse(t)}catch(o){throw console.error("JSON parse error:",o),console.error("Response text:",t),new Error("Invalid JSON response: ".concat(o.message))}}catch(i){if(console.error("API call failed for ".concat(e,":"),i),"TypeError"===i.name&&"Failed to fetch"===i.message){const e=new Error("Unable to connect to server. Please check your internet connection and try again.");throw e.originalError=i,e.isNetworkError=!0,e}if("AbortError"===i.name){const e=new Error("Request timed out. Please try again.");throw e.originalError=i,e.isTimeoutError=!0,e}throw i}}async safeCall(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("GET"===(t.method||"GET")){const r="".concat(this.baseURL).concat(e),n=await(0,o.aO)(r,{method:"GET",headers:(0,s.A)({"Content-Type":"application/json"},t.headers)});if(!n.ok){const e=new Error(n.error||"HTTP ".concat(n.status,": ").concat(n.statusText));throw e.status=n.status,e.statusText=n.statusText,e.isNetworkError=0===n.status,e}return n.data}return this.call(e,t)}async processAgentRequest(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.call("/agent/process",{method:"POST",body:JSON.stringify({request:e,dry_run:t})})}async executeConfirmedPlan(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.call("/agent/execute-with-plan-recovery",{method:"POST",body:JSON.stringify({decisionId:e,dry_run:t})})}async getInfrastructureState(){const e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"?discovered_only=true":"";return this.safeCall("/state".concat(e))}async discoverInfrastructure(){return this.call("/discover",{method:"POST"})}async exportState(){const e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"?include_discovered=true":"",t=await fetch("".concat(this.baseURL,"/export").concat(e));if(!t.ok)throw new Error("Export failed: ".concat(t.statusText));return t.blob()}async getDependencyGraph(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.mockEnabled)return console.log("Using mock data for getDependencyGraph, source:",e),n.getDependencyGraph(e);const t=e?"?source=".concat(e):"";return this.call("/graph".concat(t))}async detectConflicts(){const e=new URLSearchParams({auto_resolve:(arguments.length>0&&void 0!==arguments[0]&&arguments[0]).toString()});return this.call("/conflicts?".concat(e))}async generateDeploymentPlan(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=new URLSearchParams;return e.length>0&&e.forEach(e=>{r.append("target_resources",e)}),r.set("include_levels",t.toString()),this.call("/plan?".concat(r))}downloadFile(e,t){const r=window.URL.createObjectURL(e),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r)}getCurrentTimestamp(){return(new Date).toISOString().split("T")[0]}getBaseURL(){return this.baseURL}getConfig(){return{baseURL:this.baseURL,wsURL:"ws://localhost:8080/ws",environment:"production"}}}},9466:(e,t,r)=>{r.d(t,{$:()=>ze,wW:()=>F,a6:()=>ke,ds:()=>we,zY:()=>g,Rt:()=>oe,l3:()=>pe,RD:()=>l});var s=r(9379),n=r(3986),o=r(2261),a=r(579);const i=["message","type","showIcon","closable","style"],l=e=>{let{message:t,type:r="auto",showIcon:l=!0,closable:c=!1,style:d={}}=e,u=(0,n.A)(e,i);const p=(()=>{if("auto"!==r)return r;const e=t.toLowerCase();return e.includes("error")||e.includes("failed")||e.includes("fail")?"error":e.includes("warning")||e.includes("warn")?"warning":e.includes("success")||e.includes("completed")||e.includes("processed")?"success":"ready"===e?"info":"success"})(),g="string"===typeof t&&t.startsWith("Error: ")?t.substring(7):t;return(0,a.jsx)(o.A,(0,s.A)({message:g,type:p,showIcon:l,closable:c,style:(0,s.A)({borderRadius:6,fontSize:14,marginBottom:16},d)},u))};var c=r(5043),d=r(6464);const{Title:u,Paragraph:p}=d.A,g=e=>{let{title:t,description:r,level:n=2,extra:o=null,style:i={}}=e;return(0,a.jsxs)("div",{style:(0,s.A)({marginBottom:24},i),children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:8},children:[(0,a.jsx)(u,{level:n,style:{margin:0},children:t}),o&&(0,a.jsx)("div",{children:o})]}),r&&(0,a.jsx)(p,{type:"secondary",style:{margin:0,fontSize:"1rem"},children:r})]})};var h=r(5492),m=r(1219),x=r(5615),f=r(7319),y=r(5229),v=r(7514),A=r(7914),b=r(4811);const j=["step","index","logs","className"],w=(0,c.forwardRef)((e,t)=>{let{step:r,index:o,logs:i=[],className:l=""}=e,d=(0,n.A)(e,j);const[u,p]=(0,c.useState)(!1),[g,w]=(0,c.useState)(!1),_=r.status||"pending";(0,c.useEffect)(()=>{u||("failed"===_||_.includes("recovery")||"running"===_&&i.length>0)&&p(!0)},[_,i.length,u]);const S=r.name||r.description||r.action||"Step ".concat(o+1),k=r.details||r.description||"Executing infrastructure operation...",C=!0===r.isRecoveryStep,T="completed"===_;return(0,a.jsxs)("div",(0,s.A)((0,s.A)({ref:t,className:"execution-step ".concat(l," ").concat(C?"recovery-step":""),"data-step-status":_},d),{},{children:[(0,a.jsxs)("div",{className:"execution-step-header",children:[(0,a.jsx)("div",{className:(z=_,"execution-step-number ".concat(z)),children:(0,a.jsx)("div",{className:"step-number-content",children:(0,a.jsx)("span",{className:"step-number-text",children:o+1})})}),(0,a.jsxs)("div",{className:"execution-step-content",children:[(0,a.jsxs)("div",{className:"execution-step-title",children:[S,C&&!T&&(0,a.jsx)("span",{style:{marginLeft:8,padding:"2px 8px",background:"#e6f7ff",color:"#1890ff",borderRadius:4,fontSize:11,fontWeight:600},children:"\ud83d\udd27 Recovery"}),T&&(0,a.jsx)("span",{style:{marginLeft:8,padding:"2px 8px",background:"#f6ffed",color:"#52c41a",borderRadius:4,fontSize:11,fontWeight:600},children:"\u2713 Completed"})]}),(0,a.jsx)("div",{className:"execution-step-description",children:k}),(0,a.jsxs)("div",{className:"execution-step-meta",children:[(0,a.jsxs)("span",{className:"step-duration",children:["Duration: ",r.duration||"Estimating..."]}),(0,a.jsxs)("span",{className:"step-dependencies",children:["Status: ",_]}),r.dependencies&&(0,a.jsxs)("span",{className:"step-dependencies",children:["Dependencies: ",r.dependencies]})]}),(r.id||r.mcpTool||r.toolParameters||r.parameters)&&(0,a.jsxs)("div",{style:{marginTop:"12px"},children:[(0,a.jsxs)(h.Ay,{type:"text",size:"small",icon:(0,a.jsx)(v.A,{}),onClick:()=>w(!g),style:{padding:"4px 8px",height:"auto",fontSize:"12px",color:"#1890ff"},children:[g?"Hide":"Show"," Step Details"]}),g&&(0,a.jsxs)("div",{style:{marginTop:"8px",padding:"12px",background:"#f6f8fa",borderRadius:"6px",border:"1px solid #e1e4e8",fontSize:"13px",overflow:"auto",maxHeight:"300px"},children:[r.id&&(0,a.jsxs)("div",{style:{marginBottom:r.mcpTool||r.toolParameters||r.parameters?"12px":"0",paddingBottom:r.mcpTool||r.toolParameters||r.parameters?"12px":"0",borderBottom:r.mcpTool||r.toolParameters||r.parameters?"1px solid #e1e4e8":"none"},children:[(0,a.jsx)("div",{style:{fontWeight:"600",color:"#24292e",marginBottom:"4px"},children:"Step ID"}),(0,a.jsx)("div",{style:{fontFamily:'Monaco, Menlo, "Ubuntu Mono", monospace',color:"#0366d6",fontSize:"12px"},children:r.id})]}),r.mcpTool&&(0,a.jsxs)("div",{style:{marginBottom:r.toolParameters||r.parameters?"12px":"0",paddingBottom:r.toolParameters||r.parameters?"12px":"0",borderBottom:r.toolParameters||r.parameters?"1px solid #e1e4e8":"none"},children:[(0,a.jsx)("div",{style:{fontWeight:"600",color:"#24292e",marginBottom:"4px"},children:"MCP Tool"}),(0,a.jsx)("div",{style:{fontFamily:'Monaco, Menlo, "Ubuntu Mono", monospace',color:"#0366d6",fontSize:"12px"},children:r.mcpTool})]}),(r.toolParameters||r.parameters)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{fontWeight:"600",color:"#24292e",marginBottom:"8px"},children:"Parameters"}),(0,a.jsx)("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:'Monaco, Menlo, "Ubuntu Mono", monospace',fontSize:"12px",color:"#24292e"},children:JSON.stringify(r.toolParameters||r.parameters,null,2)})]})]})]})]}),(0,a.jsx)("div",{className:"step-status-icon-container",children:(e=>{switch(e){case"completed":return(0,a.jsx)(m.A,{style:{color:"white",fontSize:"12px"}});case"failed":return(0,a.jsx)(x.A,{style:{color:"white",fontSize:"12px"}});case"running":case"recovery-generating":case"recovery-in-progress":return(0,a.jsx)(f.A,{spin:!0,style:{color:"white",fontSize:"12px"}});case"recovery-pending":return(0,a.jsx)(y.A,{style:{color:"#212529",fontSize:"12px"}});default:return(0,a.jsx)(y.A,{style:{color:"#6c757d",fontSize:"12px"}})}})(_)}),(i.length>0||["running","completed","failed"].includes(_))&&(0,a.jsx)(h.Ay,{type:"text",size:"small",icon:u?(0,a.jsx)(A.A,{}):(0,a.jsx)(b.A,{}),onClick:()=>p(!u),className:"expand-logs-button"})]}),u&&(0,a.jsx)("div",{className:"execution-step-logs",children:(0,a.jsx)("div",{className:"logs-content",children:i.length>0?i.map((e,t)=>{var r,s;return(0,a.jsxs)("div",{className:"step-log-entry level-".concat(e.type),children:[(0,a.jsx)("span",{className:"timestamp",children:(null===(r=e.timestamp)||void 0===r?void 0:r.toLocaleTimeString())||(new Date).toLocaleTimeString()}),(0,a.jsxs)("span",{className:"level",children:["[",(null===(s=e.type)||void 0===s?void 0:s.toUpperCase())||"INFO","]"]}),(0,a.jsx)("span",{className:"message",children:e.message})]},t)}):(0,a.jsx)("div",{className:"no-logs",children:"No logs available for this step"})})})]}));var z});w.displayName="ExecutionStep";const _=w;var S=r(7692),k=r(6399),C=r(6051),T=r(5520),z=r(1686),E=r(6087),R=r(5870),P=r(4763),N=r(1837);const{Text:L,Paragraph:D}=d.A,B=e=>{let{option:t,index:r,isSelected:s,onSelect:n}=e;const[o,i]=(0,c.useState)(!1),l=Math.round(100*(t.successProbability||0)),d=(t.riskLevel||"medium").toLowerCase(),u="multi_step_recovery"===t.action&&t.multiStepPlan&&t.multiStepPlan.length>0;return(0,a.jsxs)(T.A,{size:"small",className:"recovery-option ".concat(s?"selected":""),onClick:n,style:{cursor:"pointer",border:s?"2px solid #1890ff":"1px solid #d9d9d9",backgroundColor:s?"#f0f7ff":"#fff"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[(0,a.jsxs)(L,{strong:!0,children:[t.action,u&&(0,a.jsxs)(k.A,{size:"small",color:"blue",style:{marginLeft:"8px"},children:[t.totalSteps||t.multiStepPlan.length," steps"]})]}),(0,a.jsxs)(C.A,{size:"small",children:[(0,a.jsxs)(k.A,{color:"blue",children:[l,"% Success"]}),(0,a.jsxs)(k.A,{color:(e=>{switch(e){case"low":return"green";case"high":return"red";default:return"orange"}})(d),children:[t.riskLevel||"Medium"," Risk"]})]})]}),(0,a.jsx)(D,{style:{marginBottom:u||t.details?"8px":"0",color:"#666"},children:t.reasoning||"No reasoning provided"}),!u&&(t.newTool||t.modifiedParameters)&&(0,a.jsxs)("div",{style:{fontSize:"12px",color:"#888",marginBottom:"8px"},children:[t.newTool&&"New Tool: ".concat(t.newTool),t.newTool&&t.modifiedParameters&&" | ",t.modifiedParameters&&"Parameters: ".concat(JSON.stringify(t.modifiedParameters))]}),t.details&&!u&&(0,a.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:t.details}),u&&(0,a.jsxs)("div",{style:{marginTop:"8px"},children:[(0,a.jsxs)(h.Ay,{type:"text",size:"small",icon:o?(0,a.jsx)(A.A,{}):(0,a.jsx)(b.A,{}),onClick:e=>{e.stopPropagation(),i(!o)},style:{padding:"0",height:"auto",fontSize:"12px"},children:[o?"Hide":"Show"," Multi-Step Plan (",t.totalSteps||t.multiStepPlan.length," steps)"]}),o&&(0,a.jsx)("div",{style:{marginTop:"8px",paddingLeft:"16px",borderLeft:"2px solid #f0f0f0"},children:t.multiStepPlan.map((e,t)=>(0,a.jsx)("div",{style:{marginBottom:"8px",fontSize:"12px"},children:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px"},children:[(0,a.jsx)("div",{style:{minWidth:"16px",height:"16px",borderRadius:"50%",backgroundColor:"#1890ff",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",marginTop:"2px"},children:e.stepOrder||t+1}),(0,a.jsxs)("div",{style:{flex:1},children:[(0,a.jsx)("div",{style:{fontWeight:"bold"},children:e.toolName}),(0,a.jsx)("div",{style:{color:"#666"},children:e.purpose}),e.parameters&&Object.keys(e.parameters).length>0&&(0,a.jsxs)("div",{style:{color:"#888",marginTop:"2px"},children:["Parameters: ",JSON.stringify(e.parameters,null,2)]})]})]})},t))})]})]})},M=e=>{let{stepId:t,recoveryData:r,onProceedWithRecovery:s,onAbortRecovery:n}=e;const[o,i]=(0,c.useState)(null);if(!r)return null;if(r.inProgress)return(0,a.jsxs)(T.A,{size:"small",className:"inline-recovery-card recovery-in-progress",style:{borderLeft:"4px solid #17a2b8",backgroundColor:"#f8f9fa"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,a.jsx)(f.A,{spin:!0,style:{color:"#17a2b8"}}),(0,a.jsx)(L,{strong:!0,children:"Executing Recovery..."}),"skip"===r.selectedOption?(0,a.jsx)(L,{type:"secondary",children:"Skipping step"}):(0,a.jsxs)(L,{type:"secondary",children:["Option ",parseInt(r.selectedOption)+1]})]}),r.progressMessage&&(0,a.jsx)("div",{style:{marginTop:"8px"},children:(0,a.jsx)(L,{type:"secondary",children:r.progressMessage})})]});if(!r.visible)return null;const{failureContext:l,recoveryOptions:d}=r,u=e=>{i(e)};return(0,a.jsxs)(T.A,{size:"small",className:"inline-recovery-card",style:{borderLeft:"4px solid #ffc107",backgroundColor:"#fffef0",marginTop:"8px"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[(0,a.jsx)(R.A,{style:{color:"#ffc107",fontSize:"16px"}}),(0,a.jsx)(L,{strong:!0,style:{color:"#856404"},children:"Step Failed - Recovery Options Available"})]}),(0,a.jsxs)("div",{style:{marginBottom:"12px",padding:"8px",backgroundColor:"#f8d7da",borderRadius:"4px"},children:[(0,a.jsx)(L,{strong:!0,children:"Error: "}),(0,a.jsx)(L,{children:(null===l||void 0===l?void 0:l.errorMessage)||"Unknown error"}),(0,a.jsx)("br",{}),(0,a.jsx)(L,{strong:!0,children:"Step: "}),(0,a.jsx)(L,{children:(null===l||void 0===l?void 0:l.stepName)||"Unknown"}),(null===l||void 0===l?void 0:l.toolName)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:" | "}),(0,a.jsx)(L,{strong:!0,children:"Tool: "}),(0,a.jsx)(L,{children:l.toolName})]})]}),(null===l||void 0===l?void 0:l.aiAnalysis)&&(0,a.jsxs)("div",{style:{marginBottom:"12px",padding:"8px",backgroundColor:"#d1ecf1",borderRadius:"4px"},children:[(0,a.jsxs)("div",{style:{marginBottom:"4px"},children:[(0,a.jsx)(L,{strong:!0,children:"Root Cause: "}),(0,a.jsx)(L,{children:l.aiAnalysis.rootCause||"Not available"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(L,{strong:!0,children:"Recommendation: "}),(0,a.jsx)(L,{children:l.aiAnalysis.recommendation||"Not available"})]})]}),(0,a.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,a.jsx)(L,{strong:!0,style:{marginBottom:"8px",display:"block"},children:"Choose Recovery Action:"}),(0,a.jsxs)(C.A,{direction:"vertical",size:"small",style:{width:"100%"},children:[d&&d.map((e,t)=>(0,a.jsx)(B,{option:e,index:t,isSelected:o===t,onSelect:()=>u(t)},t)),(0,a.jsx)(B,{option:{action:"Skip This Step",reasoning:"Skip this step and continue with the next step in the plan.",riskLevel:"medium",successProbability:.7,details:"Note: May affect steps that depend on this step's output."},index:"skip",isSelected:"skip"===o,onSelect:()=>u("skip")})]})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[(0,a.jsx)(h.Ay,{type:"default",danger:!0,icon:(0,a.jsx)(P.A,{}),onClick:()=>{n&&n(t)},children:"Abort Execution"}),(0,a.jsx)(h.Ay,{type:"primary",icon:(0,a.jsx)(N.A,{}),disabled:null===o,onClick:()=>{null!==o&&s&&s(t,o)},children:"Proceed with Selected Option"})]})]})},W=["steps","logs","recoveryOptions","isExecuting","executionProgress","executionElapsed","executionCompleted","isRecoveryAnalyzing","onConfirm","onCancel","onProceedWithRecovery","onAbortRecovery","showConfirmButton","showCancelButton","confirmButtonText","children","title","icon","className"],{Text:I}=d.A,O=(0,c.forwardRef)((e,t)=>{let{steps:r=[],logs:i=[],recoveryOptions:l={},isExecuting:d=!1,executionProgress:u=0,executionElapsed:p="00:00",executionCompleted:g=!1,isRecoveryAnalyzing:y=!1,onConfirm:v=null,onCancel:A=null,onProceedWithRecovery:b=null,onAbortRecovery:j=null,showConfirmButton:w=!0,showCancelButton:R=!0,confirmButtonText:P="Confirm & Execute",children:N=null,title:L="Execution Plan",icon:D=(0,a.jsx)(E.A,{}),className:B=""}=e,O=(0,n.A)(e,W);const F=(0,c.useRef)({});(0,c.useImperativeHandle)(t,()=>({scrollToStep:e=>{const t=F.current[e];t&&t.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}));const U=(0,s.A)({marginTop:16},g&&{borderColor:"#28a745",boxShadow:"0 4px 12px rgba(40, 167, 69, 0.15)"});return(0,a.jsx)("div",{className:"execution-plan-container ".concat(B," ").concat(g?"execution-success":""),children:(0,a.jsx)(T.A,(0,s.A)((0,s.A)({title:(0,a.jsxs)(a.Fragment,{children:[D," ",L]}),style:U},O),{},{children:(0,a.jsxs)(C.A,{direction:"vertical",size:"large",style:{width:"100%"},children:[(()=>{if(!d&&!g)return null;const e=g?{background:"#d4edda",border:"1px solid #28a745",boxShadow:"0 0 8px rgba(40, 167, 69, 0.3)"}:{background:"#f8f9fa",border:"1px solid #dee2e6"};return(0,a.jsxs)("div",{style:(0,s.A)({padding:"16px",borderRadius:"8px"},e),children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[(0,a.jsx)(I,{strong:!0,className:g?"status-success":"status-running",children:g?"Execution Completed Successfully":"Execution in Progress"}),(0,a.jsx)(I,{type:"secondary",style:{fontFamily:"monospace"},children:p})]}),(0,a.jsx)(S.A,{percent:u,status:g?"success":"active",strokeColor:g?"#28a745":"#007bff",trailColor:"#e9ecef"})]})})(),(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:r.map((e,t)=>{return(0,a.jsxs)(c.Fragment,{children:[(0,a.jsx)(_,{ref:t=>{t&&e.id&&(F.current[e.id]=t)},step:e,index:t,logs:(r=e.id,s=t,i&&0!==i.length?i.filter(e=>{if(e.stepId){if(e.stepId===r)return!0;if(e.stepId==="step-".concat(s))return!0;if(e.stepId===s.toString())return!0;if(e.stepId==="step_".concat(s))return!0}return 0===s&&!e.stepId}):[])}),y&&"failed"===e.status&&(0,a.jsx)(o.A,{message:(0,a.jsxs)(C.A,{children:[(0,a.jsx)(z.A,{indicator:(0,a.jsx)(f.A,{style:{fontSize:18},spin:!0})}),(0,a.jsx)(I,{strong:!0,children:"Analyzing Recovery Options..."})]}),description:"AI is analyzing the failure and generating recovery strategies. This may take a moment.",type:"warning",showIcon:!1,style:{marginLeft:48,marginTop:6,marginBottom:12}}),l[e.id]&&(0,a.jsx)(M,{stepId:e.id,recoveryData:l[e.id],onProceedWithRecovery:b,onAbortRecovery:j})]},e.id||t);var r,s})}),d||g?d?(0,a.jsx)(k.A,{color:"processing",children:"Executing..."}):null:(0,a.jsxs)(C.A,{children:[w&&v&&(0,a.jsx)(h.Ay,{type:"primary",icon:(0,a.jsx)(m.A,{}),onClick:v,size:"large",children:P}),R&&A&&(0,a.jsx)(h.Ay,{icon:(0,a.jsx)(x.A,{}),onClick:A,size:"large",children:"Cancel"})]}),N&&c.Children.map(N,e=>{var t;return c.isValidElement(e)&&"ExecutionLogs"===(null===(t=e.type)||void 0===t?void 0:t.name)?null:e})]})}))})});O.displayName="ExecutionPlan";const F=O,{Text:U}=d.A;var G=r(7326),H=r(9587),V=r(7175);const{Text:q,Title:J}=d.A,{Panel:Z}=G.A,Y=e=>{var t;let{resource:r,searchTerm:s,iconUrl:n}=e;const[o,i]=(0,c.useState)(!1),l=(null===(t=r.properties)||void 0===t?void 0:t.properties)||r.properties||{};return(0,a.jsxs)(T.A,{className:"resource-card",hoverable:!0,bodyStyle:{padding:"20px"},children:[(0,a.jsx)("div",{className:"resource-header",children:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[(0,a.jsx)("div",{className:"resource-icon",children:(0,a.jsx)("img",{src:n,alt:"".concat(r.type," icon"),style:{width:"32px",height:"32px"},onError:e=>{e.target.src="/aws-service-icons/management-governance/32/Arch_AWS-CloudFormation_32.svg"}})}),(0,a.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,a.jsx)(J,{level:5,style:{margin:0,fontSize:"16px",fontWeight:600,color:"#1a1a1a",wordBreak:"break-all"},children:((e,t)=>{if(!t)return e;const r=new RegExp("(".concat(t,")"),"gi");return e.split(r).map((e,t)=>r.test(e)?(0,a.jsx)("span",{className:"search-highlight",children:e},t):e)})(r.id,s)}),(0,a.jsx)(q,{type:"secondary",style:{fontSize:"12px",textTransform:"uppercase",fontWeight:500,letterSpacing:"0.5px"},children:r.type})]}),(0,a.jsx)(h.Ay,{type:"text",size:"small",icon:o?(0,a.jsx)(H.A,{}):(0,a.jsx)(V.A,{}),onClick:()=>i(!o),style:{color:"#666",opacity:.7}})]})}),(0,a.jsx)(G.A,{ghost:!0,activeKey:o?["properties"]:[],onChange:()=>i(!o),style:{border:"none"},children:(0,a.jsx)(Z,{header:null,showArrow:!1,style:{padding:0,border:"none"},children:(0,a.jsx)("div",{className:"properties-container",children:(0,a.jsx)("pre",{style:{margin:0,padding:"16px",fontSize:"12px",lineHeight:"1.5",fontFamily:"SF Mono, Monaco, Consolas, monospace",color:"#2d3748",backgroundColor:"transparent",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:JSON.stringify(l,null,2)})})},"properties")})]})};Y.defaultProps={searchTerm:""};const X=Y,{Title:$,Text:K}=d.A;var Q=r(9472),ee=r(7419),te=r(1645);const{Text:re}=d.A,se=e=>{const t={ec2_instance:"compute/32/Arch_Amazon-EC2_32.svg",instance:"compute/32/Arch_Amazon-EC2_32.svg",lambda:"compute/32/Arch_AWS-Lambda_32.svg",auto_scaling_group:"compute/32/Arch_Amazon-EC2-Auto-Scaling_32.svg",asg:"compute/32/Arch_Amazon-EC2-Auto-Scaling_32.svg",vpc:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",subnet:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",security_group:"security-identity-compliance/32/Arch_AWS-WAF_32.svg",securitygroup:"security-identity-compliance/32/Arch_AWS-WAF_32.svg",load_balancer:"networking-content-delivery/32/Arch_Elastic-Load-Balancing_32.svg",loadbalancer:"networking-content-delivery/32/Arch_Elastic-Load-Balancing_32.svg",alb:"networking-content-delivery/32/Arch_Elastic-Load-Balancing_32.svg",route53:"networking-content-delivery/32/Arch_Amazon-Route-53_32.svg",cloudfront:"networking-content-delivery/32/Arch_Amazon-CloudFront_32.svg",internet_gateway:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",nat_gateway:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",route_table:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",rds:"database/32/Arch_Amazon-RDS_32.svg",database:"database/32/Arch_Amazon-RDS_32.svg",dynamodb:"database/32/Arch_Amazon-DynamoDB_32.svg",redshift:"database/32/Arch_Amazon-Redshift_32.svg",s3:"storage/32/Arch_Amazon-Simple-Storage-Service_32.svg",ebs:"storage/32/Arch_Amazon-Elastic-Block-Store_32.svg",efs:"storage/32/Arch_Amazon-Elastic-File-System_32.svg",default:"management-governance/32/Arch_AWS-CloudFormation_32.svg"},r=(null===e||void 0===e?void 0:e.toLowerCase())||"default";return"/aws-service-icons/".concat(t[r]||t.default)},ne=e=>{let{infrastructureData:t,searchTerm:r}=e;if(!t)return(0,a.jsx)("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e8e8e8",padding:"48px"},children:(0,a.jsx)(Q.A,{description:(0,a.jsx)(re,{type:"secondary",style:{fontSize:"16px"},children:"No infrastructure data available"}),style:{padding:"48px 0"}})});let s={};const n=t.resources&&t.resources.length>0,o=t.managed_state?Object.keys(t.managed_state.resources||{}).length:0;t.managed_state&&o>0?s=t.managed_state.resources||{}:n&&(s={},t.resources.forEach((e,t)=>{var r;s[e.id||"resource-".concat(t)]={id:e.id,name:e.name||e.id,type:e.type,status:e.status,properties:{aws_details:e.properties},createdAt:e.createdAt,dependencies:null===(r=e.properties)||void 0===r?void 0:r.dependencies}}));const i=Object.values(s).filter(e=>"step_reference"!==e.type).filter(e=>!r||e.id.toLowerCase().includes(r.toLowerCase())).reduce((e,t)=>{const r=t.type||"unknown";return e[r]||(e[r]=[]),e[r].push(t),e},{});return 0===Object.keys(i).length?(0,a.jsx)("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e8e8e8",padding:"48px"},children:(0,a.jsx)(Q.A,{description:(0,a.jsx)(re,{type:"secondary",style:{fontSize:"16px"},children:r?"No resources match your search":"No resources found"}),style:{padding:"48px 0"}})}):(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:Object.entries(i).map(e=>{let[t,s]=e;return(0,a.jsx)(T.A,{className:"category-card",bodyStyle:{padding:"24px"},title:(0,a.jsx)("div",{className:"category-header",children:(0,a.jsxs)(re,{strong:!0,style:{textTransform:"capitalize",fontSize:"18px",color:"#1a1a1a"},children:[t.replace("_"," ")," (",s.length,")"]})}),children:(0,a.jsx)(ee.A,{gutter:[16,16],children:s.map(e=>(0,a.jsx)(te.A,{xs:24,sm:12,lg:8,xl:6,children:(0,a.jsx)(X,{resource:e,searchTerm:r,iconUrl:se(e.type)})},e.id))})},t)})})};ne.defaultProps={searchTerm:""};const oe=ne;var ae=r(777),ie=r(1522),le=r(2411);const{Text:ce,Title:de}=d.A,ue=e=>{let{onRefresh:t,refreshing:r,searchTerm:s,onSearchChange:n,totalResources:o,totalCategories:i}=e;return(0,a.jsxs)("div",{style:{marginBottom:"32px",backgroundColor:"white",padding:"24px",borderRadius:"16px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",border:"1px solid #e8e8e8"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[(0,a.jsx)(de,{level:2,style:{margin:0,color:"#1a1a1a",fontWeight:700},children:"Infrastructure Resources"}),(0,a.jsx)(h.Ay,{type:"primary",icon:(0,a.jsx)(ie.A,{spin:r}),onClick:t,loading:r,style:{borderRadius:"8px",height:"40px",backgroundColor:"#1890ff",borderColor:"#1890ff"},children:"Refresh"})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[(0,a.jsx)(ae.A,{placeholder:"Search resources by ID...",prefix:(0,a.jsx)(le.A,{}),value:s,onChange:n,style:{maxWidth:"300px",borderRadius:"8px"},allowClear:!0}),(0,a.jsxs)(ce,{type:"secondary",children:[o," resource",1!==o?"s":""," in ",i," categories"]})]})]})};ue.defaultProps={refreshing:!1,searchTerm:"",onSearchChange:()=>{},totalResources:0,totalCategories:0};const pe=ue;var ge=r(2846),he=r(5672),me=r(1243),xe=r(4242),fe=r(1182),ye=r(121),ve=r(9795),Ae=r(6626),be=r(7240);const{Text:je}=d.A,we=e=>{let{mermaidSyntax:t,timestamp:r,onFullscreen:s,nodeMetadata:n}=e;const o=(0,c.useRef)(null),i=(0,c.useRef)(!1),[l,d]=(0,c.useState)(!1),[u,p]=(0,c.useState)(1),[g,m]=(0,c.useState)({x:0,y:0}),x=(0,c.useRef)(null),[f,y]=(0,c.useState)(null),[v,A]=(0,c.useState)(!1),[b,j]=(0,c.useState)({x:0,y:0}),w=(0,c.useRef)(null);(0,c.useEffect)(()=>{if(!t||!o.current||i.current)return;let e=!0;i.current=!0;const r=async r=>{if(e)try{if(await new Promise(e=>setTimeout(e,150)),!e)return;const s=(e=>{const t={};return e&&Array.isArray(e)?(e.forEach(e=>{if(e.id&&e.type){const r=e.id.replace(/[^a-zA-Z0-9_]/g,"_");t[r]=e.type}}),t):t})(n),o=(e=>{const t={};return e?(e.split("\n").forEach(e=>{const r=e.trim().match(/^(\S+)\[.*?\]:::(\w+)/);if(r){const[,e,s]=r;t[e]=s}}),t):t})(t);r.querySelectorAll(".node").forEach(e=>{const t=e.id||"",r=e.getAttribute("class")||"",n=(e=>{if(!e)return"";let t=e.replace(/^(flowchart-|graph-|L-|subgraph-)/gi,"");return t=t.replace(/-(\d+)$/g,""),t})(t);let a=s[n];if(a||(a=o[n]),a||(a=((e,t)=>{const r=e.toLowerCase();if(t){const e=t.toLowerCase();if(e.includes("vpc")&&!e.includes("subnet"))return"vpc";if(e.includes("subnet"))return"subnet";if(e.includes("lambda"))return"lambda";if(e.includes("rds")||e.includes("database"))return"rds";if(e.includes("dynamodb"))return"dynamodb";if(e.includes("s3"))return"s3";if(e.includes("ami"))return"ami";if(e.includes("natgw")||e.includes("nat_gateway"))return"nat_gateway";if(e.includes("alb")||e.includes("lb")||e.includes("loadbalancer")||e.includes("load_balancer"))return"load_balancer";if(e.includes("tg")||e.includes("targetgroup"))return"load_balancer";if(e.includes("asg")||e.includes("auto_scaling"))return"auto_scaling_group";if(e.includes("sg")||e.includes("security")||e.includes("securitygroup"))return"security_group";if(e.includes("ec2"))return"ec2_instance";if(e.includes("lt")||e.includes("launch"))return"ec2_instance";if(e.match(/\bec2\b|\binstance\b/)&&!e.includes("vpc"))return"ec2_instance"}return r.includes("vpc-")||r.includes("vpc_")?"vpc":r.includes("subnet-")||r.includes("subnet_")?"subnet":r.includes("sg-")||r.includes("sg_")?"security_group":r.includes("i-")||r.includes("i_")||r.includes("lt-")||r.includes("lt_")?"ec2_instance":r.includes("ami-")||r.includes("ami_")?"ami":r.includes("targetgroup")||r.includes("elasticloadbalancing")?"load_balancer":null})(t,r)),a){const t=(e=>{const t={ec2_instance:"compute/32/Arch_Amazon-EC2_32.svg",instance:"compute/32/Arch_Amazon-EC2_32.svg",ec2:"compute/32/Arch_Amazon-EC2_32.svg",ami:"compute/32/Arch_Amazon-EC2_32.svg",lambda:"compute/32/Arch_AWS-Lambda_32.svg",auto_scaling_group:"compute/32/Arch_Amazon-EC2-Auto-Scaling_32.svg",asg:"compute/32/Arch_Amazon-EC2-Auto-Scaling_32.svg",vpc:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",subnet:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",security_group:"security-identity-compliance/32/Arch_AWS-WAF_32.svg",securitygroup:"security-identity-compliance/32/Arch_AWS-WAF_32.svg",sg:"security-identity-compliance/32/Arch_AWS-WAF_32.svg",load_balancer:"networking-content-delivery/32/Arch_Elastic-Load-Balancing_32.svg",loadbalancer:"networking-content-delivery/32/Arch_Elastic-Load-Balancing_32.svg",alb:"networking-content-delivery/32/Arch_Elastic-Load-Balancing_32.svg",lb:"networking-content-delivery/32/Arch_Elastic-Load-Balancing_32.svg",route53:"networking-content-delivery/32/Arch_Amazon-Route-53_32.svg",cloudfront:"networking-content-delivery/32/Arch_Amazon-CloudFront_32.svg",internet_gateway:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",nat_gateway:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",natgw:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",route_table:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",rds:"database/32/Arch_Amazon-RDS_32.svg",database:"database/32/Arch_Amazon-RDS_32.svg",dynamodb:"database/32/Arch_Amazon-DynamoDB_32.svg",redshift:"database/32/Arch_Amazon-Redshift_32.svg",s3:"storage/32/Arch_Amazon-Simple-Storage-Service_32.svg",ebs:"storage/32/Arch_Amazon-Elastic-Block-Store_32.svg",efs:"storage/32/Arch_Amazon-Elastic-File-System_32.svg",tg:"networking-content-delivery/32/Arch_Elastic-Load-Balancing_32.svg",lt:"compute/32/Arch_Amazon-EC2_32.svg",default:"management-governance/32/Arch_AWS-CloudFormation_32.svg"},r=(null===e||void 0===e?void 0:e.toLowerCase())||"default";return"/aws-service-icons/".concat(t[r]||t.default)})(a),r=e.querySelector("rect, polygon, circle, ellipse");if(!r)return;const s=r.getBBox(),n=document.createElementNS("http://www.w3.org/2000/svg","image");n.setAttributeNS("http://www.w3.org/1999/xlink","href",t),n.setAttribute("width","32"),n.setAttribute("height","32"),n.setAttribute("x",s.x+s.width/2-16),n.setAttribute("y",s.y+12),n.style.pointerEvents="none";const o=e.querySelector(".label"),i=e.querySelectorAll(".label text, text");if(o&&o.parentNode?o.parentNode.insertBefore(n,o):i.length>0&&i[0].parentNode?i[0].parentNode.insertBefore(n,i[0]):e.appendChild(n),i.forEach(e=>{const t=e.getAttribute("transform")||"",r=parseFloat(e.getAttribute("y")||0);if(t){const r="".concat(t," translate(0, 35)");e.setAttribute("transform",r)}else e.setAttribute("y",r+35)}),o){const e=o.getAttribute("transform")||"";if(e){const t="".concat(e," translate(0, 35)");o.setAttribute("transform",t)}else{const e=parseFloat(o.getAttribute("y")||0);o.setAttribute("y",e+35)}}}})}catch(s){console.warn("Failed to add icons to nodes:",s)}};return(async()=>{try{const s="mermaid-".concat(Date.now());if(!e||!o.current)return;const n=o.current;n.removeAttribute("data-processed"),n.innerHTML="";const a=document.createElement("div");if(a.className="mermaid",a.id=s,a.textContent=t,n.appendChild(a),await new Promise(e=>setTimeout(e,100)),!e)return;if(await be.A.run({nodes:[a],suppressErrors:!1}),!e)return;await r(n);const i=n.querySelector("svg");i&&(y(i.outerHTML),x.current&&(x.current.innerHTML=i.outerHTML))}catch(s){console.error("Mermaid rendering error:",s);const r='\n          <div style="color: #ff4d4f; text-align: left; padding: 20px; background: #fff2f0; border: 1px solid #ffccc7; border-radius: 4px;">\n            <div style="font-weight: bold; margin-bottom: 8px;">\u26a0\ufe0f Error rendering diagram</div>\n            <div style="margin-bottom: 12px;">'.concat(s.message,'</div>\n            <details style="margin-top: 12px;">\n              <summary style="cursor: pointer; color: #1890ff;">Show Mermaid Syntax</summary>\n              <pre style="margin-top: 8px; padding: 12px; background: #f5f5f5; border-radius: 4px; overflow: auto;">').concat(t,"</pre>\n            </details>\n          </div>\n        ");e&&x.current&&(x.current.innerHTML=r),y(r)}finally{e&&(i.current=!1)}})(),()=>{e=!1,i.current=!1}},[t,n]);const _=()=>{p(e=>Math.min(e+.25,5))},S=()=>{p(e=>Math.max(e-.25,.25))},z=()=>{p(1),m({x:0,y:0})},E=(0,c.useCallback)(e=>{e.preventDefault();const t=e.deltaY>0?-.1:.1;p(e=>Math.min(Math.max(e+t,.25),5))},[]),R=(0,c.useCallback)(e=>{0===e.button&&(A(!0),j({x:e.clientX-g.x,y:e.clientY-g.y}),e.preventDefault())},[g]),P=(0,c.useCallback)(e=>{v&&m({x:e.clientX-b.x,y:e.clientY-b.y})},[v,b]),N=(0,c.useCallback)(()=>{A(!1)},[]);(0,c.useEffect)(()=>{if(v)return document.addEventListener("mousemove",P),document.addEventListener("mouseup",N),()=>{document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",N)}},[v,P,N]);const L=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,a.jsxs)("div",{style:{position:"relative"},children:[(0,a.jsxs)("div",{style:{position:"absolute",top:"10px",right:"10px",zIndex:10,display:"flex",gap:"8px",background:"rgba(255, 255, 255, 0.95)",padding:"8px",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},children:[(0,a.jsx)(ge.A,{title:"Zoom In (or scroll up)",children:(0,a.jsx)(h.Ay,{icon:(0,a.jsx)(me.A,{}),size:"small",onClick:_})}),(0,a.jsx)(ge.A,{title:"Reset View (Zoom & Pan)",children:(0,a.jsxs)(h.Ay,{icon:(0,a.jsx)(xe.A,{}),size:"small",onClick:z,children:[Math.round(100*u),"%"]})}),(0,a.jsx)(ge.A,{title:"Zoom Out (or scroll down)",children:(0,a.jsx)(h.Ay,{icon:(0,a.jsx)(fe.A,{}),size:"small",onClick:S})}),(0,a.jsx)(ge.A,{title:"Drag to Pan",children:(0,a.jsx)(k.A,{icon:(0,a.jsx)(ye.A,{}),color:"blue",style:{margin:0},children:"Pan Mode"})})]}),(0,a.jsx)("div",{ref:w,onWheel:E,onMouseDown:R,style:{textAlign:"center",backgroundColor:"#fafafa",padding:"20px",borderRadius:"6px",overflow:"hidden",maxHeight:e?"calc(100vh - 200px)":"600px",minHeight:e?"500px":"200px",cursor:v?"grabbing":"grab",position:"relative"},children:(0,a.jsx)("div",{ref:e?null:x,style:{display:"inline-block",minWidth:"100%",transform:"translate(".concat(g.x,"px, ").concat(g.y,"px) scale(").concat(u,")"),transformOrigin:"center center",transition:v?"none":"transform 0.1s ease-out",willChange:"transform"},dangerouslySetInnerHTML:e&&f?{__html:f}:void 0})}),(0,a.jsx)("div",{style:{marginTop:"8px",textAlign:"center",color:"#999",fontSize:"12px"},children:"\ud83d\udca1 Drag to pan \u2022 Scroll to zoom \u2022 Click controls for precise zoom"})]})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{ref:o,style:{position:"absolute",left:"-9999px",top:0}}),(0,a.jsx)(T.A,{title:(0,a.jsxs)(C.A,{children:[(0,a.jsx)(ve.A,{}),(0,a.jsx)(je,{strong:!0,children:"Dependency Visualization"}),(0,a.jsx)(k.A,{color:"blue",children:"Mermaid Diagram"})]}),extra:(0,a.jsxs)(C.A,{children:[r&&(0,a.jsxs)(je,{type:"secondary",style:{fontSize:"12px"},children:["Generated: ",new Date(r).toLocaleString()]}),(0,a.jsx)(ge.A,{title:"View fullscreen",children:(0,a.jsx)(h.Ay,{icon:(0,a.jsx)(Ae.A,{}),size:"small",onClick:()=>{s?s():d(!0)}})})]}),children:L(!1)}),(0,a.jsx)(he.A,{title:(0,a.jsxs)(C.A,{children:[(0,a.jsx)(ve.A,{}),(0,a.jsx)(je,{strong:!0,children:"Dependency Visualization (Fullscreen)"}),(0,a.jsx)(k.A,{color:"blue",children:"Mermaid Diagram"})]}),open:l,onCancel:()=>{d(!1),p(1),m({x:0,y:0})},width:"96vw",style:{top:20,maxWidth:"96vw",paddingBottom:0},styles:{body:{height:"calc(100vh - 120px)",overflow:"auto",padding:"16px"}},footer:null,closeIcon:(0,a.jsx)(H.A,{}),destroyOnClose:!1,centered:!1,children:L(!0)})]})};var _e=r(6612);const{Text:Se}=d.A,ke=e=>{let{metadata:t}=e;if(!t)return null;const{nodeCount:r,edgeCount:s,resourceTypeCounts:n,bottlenecks:o}=t;return(0,a.jsxs)(T.A,{title:"Graph Statistics",style:{marginTop:16},children:[(0,a.jsxs)(ee.A,{gutter:[16,16],children:[(0,a.jsx)(te.A,{xs:12,sm:8,md:6,children:(0,a.jsx)(_e.A,{title:"Total Resources",value:r,valueStyle:{color:"#1890ff"},prefix:(0,a.jsx)(ve.A,{})})}),(0,a.jsx)(te.A,{xs:12,sm:8,md:6,children:(0,a.jsx)(_e.A,{title:"Dependencies",value:s,valueStyle:{color:"#52c41a"}})}),(0,a.jsx)(te.A,{xs:12,sm:8,md:6,children:(0,a.jsx)(_e.A,{title:"Resource Types",value:Object.keys(n||{}).length,valueStyle:{color:"#faad14"}})}),(0,a.jsx)(te.A,{xs:12,sm:8,md:6,children:(0,a.jsx)(_e.A,{title:"Bottlenecks",value:(null===o||void 0===o?void 0:o.length)||0,valueStyle:{color:(null===o||void 0===o?void 0:o.length)>0?"#ff4d4f":"#52c41a"}})})]}),n&&Object.keys(n).length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:{marginTop:24,marginBottom:12},children:(0,a.jsx)(Se,{strong:!0,children:"Resource Type Distribution"})}),(0,a.jsx)(C.A,{wrap:!0,children:Object.entries(n).map(e=>{let[t,r]=e;return(0,a.jsxs)(k.A,{color:"blue",children:[t,": ",r]},t)})})]})]})};var Ce=r(5215);const{Text:Te}=d.A,ze=e=>{let{bottlenecks:t}=e;if(!t||0===t.length)return null;const r=e=>{switch(e){case"critical":return"#ff4d4f";case"high":return"#faad14";case"medium":return"#1890ff";case"low":return"#52c41a";default:return"#d9d9d9"}};return(0,a.jsx)(T.A,{title:(0,a.jsxs)(C.A,{children:[(0,a.jsx)(Ce.A,{style:{color:"#faad14"}}),(0,a.jsx)(Te,{strong:!0,children:"Performance Bottlenecks Detected"})]}),style:{marginTop:16},children:(0,a.jsx)(C.A,{direction:"vertical",size:"middle",style:{width:"100%"},children:t.map((e,t)=>{return(0,a.jsx)(T.A,{size:"small",style:{borderLeft:"4px solid ".concat(r(e.impact)),backgroundColor:"#fafafa"},children:(0,a.jsxs)(C.A,{direction:"vertical",size:"small",style:{width:"100%"},children:[(0,a.jsxs)(C.A,{children:[(s=e.impact,(0,a.jsx)(Ce.A,{style:{color:r(s)}})),(0,a.jsx)(Te,{strong:!0,style:{fontSize:"14px"},children:e.resourceId}),(0,a.jsx)(k.A,{color:r(e.impact),children:e.impact.toUpperCase()})]}),(0,a.jsx)("div",{style:{paddingLeft:"24px"},children:(0,a.jsxs)(Te,{type:"secondary",style:{fontSize:"12px"},children:["Type: ",e.resourceType," \u2022 ",e.dependentCount," dependent",1!==e.dependentCount?"s":""]})})]})},t);var s})})})}}}]);
//# sourceMappingURL=7069.6c60b97c.chunk.js.map