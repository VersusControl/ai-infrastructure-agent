/*! For license information please see 2369.9bdb0172.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkweb_ui_react=self.webpackChunkweb_ui_react||[]).push([[2369],{8354:(e,t,n)=>{n.d(t,{A:()=>y});var a=n(65043),r=n(98139),o=n.n(r),c=n(35296),i=n(89122),s=n(32516),l=n(94414),d=n(78855),h=n(78446);const p=e=>{const{componentCls:t}=e;return{[t]:{"&-horizontal":{["&".concat(t)]:{"&-sm":{marginBlock:e.marginXS},"&-md":{marginBlock:e.margin}}}}}},u=e=>{const{componentCls:t,sizePaddingEdgeHorizontal:n,colorSplit:a,lineWidth:r,textPaddingInline:o,orientationMargin:c,verticalMarginInline:i}=e;return{[t]:Object.assign(Object.assign({},(0,l.dF)(e)),{borderBlockStart:"".concat((0,s.zA)(r)," solid ").concat(a),"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:i,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:"".concat((0,s.zA)(r)," solid ").concat(a)},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:"".concat((0,s.zA)(e.marginLG)," 0")},["&-horizontal".concat(t,"-with-text")]:{display:"flex",alignItems:"center",margin:"".concat((0,s.zA)(e.dividerHorizontalWithTextGutterMargin)," 0"),color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:"0 ".concat(a),"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:"".concat((0,s.zA)(r)," solid transparent"),borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},["&-horizontal".concat(t,"-with-text-start")]:{"&::before":{width:"calc(".concat(c," * 100%)")},"&::after":{width:"calc(100% - ".concat(c," * 100%)")}},["&-horizontal".concat(t,"-with-text-end")]:{"&::before":{width:"calc(100% - ".concat(c," * 100%)")},"&::after":{width:"calc(".concat(c," * 100%)")}},["".concat(t,"-inner-text")]:{display:"inline-block",paddingBlock:0,paddingInline:o},"&-dashed":{background:"none",borderColor:a,borderStyle:"dashed",borderWidth:"".concat((0,s.zA)(r)," 0 0")},["&-horizontal".concat(t,"-with-text").concat(t,"-dashed")]:{"&::before, &::after":{borderStyle:"dashed none none"}},["&-vertical".concat(t,"-dashed")]:{borderInlineStartWidth:r,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},"&-dotted":{background:"none",borderColor:a,borderStyle:"dotted",borderWidth:"".concat((0,s.zA)(r)," 0 0")},["&-horizontal".concat(t,"-with-text").concat(t,"-dotted")]:{"&::before, &::after":{borderStyle:"dotted none none"}},["&-vertical".concat(t,"-dotted")]:{borderInlineStartWidth:r,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},["&-plain".concat(t,"-with-text")]:{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize},["&-horizontal".concat(t,"-with-text-start").concat(t,"-no-default-orientation-margin-start")]:{"&::before":{width:0},"&::after":{width:"100%"},["".concat(t,"-inner-text")]:{paddingInlineStart:n}},["&-horizontal".concat(t,"-with-text-end").concat(t,"-no-default-orientation-margin-end")]:{"&::before":{width:"100%"},"&::after":{width:0},["".concat(t,"-inner-text")]:{paddingInlineEnd:n}}})}},g=(0,d.OF)("Divider",e=>{const t=(0,h.oX)(e,{dividerHorizontalWithTextGutterMargin:e.margin,sizePaddingEdgeHorizontal:0});return[u(t),p(t)]},e=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:e.marginXS}),{unitless:{orientationMargin:!0}});var f=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const m={small:"sm",middle:"md"};const y=e=>{const{getPrefixCls:t,direction:n,className:r,style:s}=(0,c.TP)("divider"),{prefixCls:l,type:d="horizontal",orientation:h="center",orientationMargin:p,className:u,rootClassName:y,children:b,dashed:v,variant:x="solid",plain:j,style:w,size:A}=e,S=f(e,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","variant","plain","style","size"]),z=t("divider",l),[E,T,C]=g(z),k=(0,i.A)(A),O=m[k],L=!!b,H=a.useMemo(()=>"left"===h?"rtl"===n?"end":"start":"right"===h?"rtl"===n?"start":"end":h,[n,h]),B="start"===H&&null!=p,D="end"===H&&null!=p,I=o()(z,r,T,C,"".concat(z,"-").concat(d),{["".concat(z,"-with-text")]:L,["".concat(z,"-with-text-").concat(H)]:L,["".concat(z,"-dashed")]:!!v,["".concat(z,"-").concat(x)]:"solid"!==x,["".concat(z,"-plain")]:!!j,["".concat(z,"-rtl")]:"rtl"===n,["".concat(z,"-no-default-orientation-margin-start")]:B,["".concat(z,"-no-default-orientation-margin-end")]:D,["".concat(z,"-").concat(O)]:!!O},u,y),G=a.useMemo(()=>"number"===typeof p?p:/^\d+$/.test(p)?Number(p):p,[p]),M={marginInlineStart:B?G:void 0,marginInlineEnd:D?G:void 0};return E(a.createElement("div",Object.assign({className:I,style:Object.assign(Object.assign({},s),w)},S,{role:"separator"}),b&&"vertical"!==d&&a.createElement("span",{className:"".concat(z,"-inner-text"),style:M},b)))}},39981:(e,t)=>{t.A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"}},41633:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(65043),r=n(89221),o=n(46571);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c.apply(this,arguments)}const i=(e,t)=>a.createElement(o.A,c({},e,{ref:t,icon:r.A}));const s=a.forwardRef(i)},72369:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var a=n(89379),r=n(65043),o=n(96464),c=n(22019),i=n(85520),s=n(6051),l=n(42261),d=n(15492),h=n(8354),p=n(70015),u=n(12624),g=n(76399),f=n(91686),m=n(99472),y=n(99795),b=n(91522),v=n(81650),x=n(46571);function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},j.apply(this,arguments)}const w=(e,t)=>r.createElement(x.A,j({},e,{ref:t,icon:v.A}));const A=r.forwardRef(w);var S=n(39981);function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},z.apply(this,arguments)}const E=(e,t)=>r.createElement(x.A,z({},e,{ref:t,icon:S.A}));const T=r.forwardRef(E);var C=n(41633),k=n(49415),O=n(7250),L=n(35601),H=n(27240),B=n(70579);const{Title:D,Text:I,Paragraph:G}=o.A,M=()=>{var e,t;const{dispatch:n}=(0,k.nm)(),[o,v]=(0,r.useState)(null),[x,j]=(0,r.useState)(!1),[w,S]=(0,r.useState)("LR"),[z,E]=(0,r.useState)(null),[M,R]=(0,r.useState)([]),[_,P]=(0,r.useState)([]),[W,N]=(0,r.useState)(!0);(0,r.useEffect)(()=>{H.A.initialize({startOnLoad:!0,theme:"default",flowchart:{useMaxWidth:!0,htmlLabels:!0,curve:"basis",rankSpacing:80,nodeSpacing:60},themeVariables:{primaryColor:"#007bff",primaryTextColor:"#333",primaryBorderColor:"#dee2e6",lineColor:"#666",fontSize:"14px"}})},[]),(0,r.useEffect)(()=>{if(o&&o.mermaid){const e=V(o.mermaid);P(e)}},[o]);const V=e=>{const t=new Set;return e.split("\n").forEach(e=>{const n=e.match(/:::(\w+)/);n&&t.add(n[1])}),Array.from(t).sort()},F=e=>{const t=e.match(/vpc-[a-f0-9]+/i);return t?t[0]:null},U=function(e){if(!(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]))return Y(e);const{nodes:t,edges:n,classDefs:a,graphDirection:r}=e,{vpcGroups:o,typeGroups:c}=(e=>{const t={},n=[];e.forEach(e=>{"vpc"===e.type&&(t[e.id]={name:e.label,vpc:e.id,type:"vpc",nodes:[]})}),e.forEach(e=>{if("vpc"===e.type)return;let a=!1;e.vpc&&t[e.vpc]&&(t[e.vpc].nodes.push(e),a=!0),a||n.push(e)});const a={};return n.forEach(e=>{a[e.type]||(a[e.type]={name:"".concat(e.type.toUpperCase()," Resources"),type:e.type,nodes:[]}),a[e.type].nodes.push(e)}),{vpcGroups:Object.values(t),typeGroups:Object.values(a)}})(t);let i="graph ".concat(r,"\n\n");return o.forEach((e,n)=>{if(0===e.nodes.length)return;i+="    subgraph vpc_".concat(n,'["\ud83c\udf10 VPC: ').concat(e.name,'"]\n'),i+="        direction ".concat("LR"===r?"TB":"LR","\n");const a=t.find(t=>t.id===e.vpc);a&&(i+="        ".concat(a.id,'["').concat(a.label,'"]:::').concat(a.type,"\n")),e.nodes.forEach(e=>{i+="        ".concat(e.id,'["').concat(e.label,'"]:::').concat(e.type,"\n")}),i+="    end\n\n"}),c.forEach((e,t)=>{if(0===e.nodes.length)return;const n=X(e.type);i+="    subgraph type_".concat(t,'["').concat(n," ").concat(e.name,'"]\n'),i+="        direction ".concat("LR"===r?"TB":"LR","\n"),e.nodes.forEach(e=>{i+="        ".concat(e.id,'["').concat(e.label,'"]:::').concat(e.type,"\n")}),i+="    end\n\n"}),n.forEach(e=>{i+="    ".concat(e.source," --\x3e ").concat(e.target,"\n")}),i+="\n",a.forEach(e=>{i+="    ".concat(e,"\n")}),i},X=e=>{const t={ec2:"\ud83d\udcbb",ec2_instance:"\ud83d\udcbb",instance:"\ud83d\udcbb",lambda:"\u26a1",rds:"\ud83d\uddc4\ufe0f",database:"\ud83d\uddc4\ufe0f",s3:"\ud83d\udce6",dynamodb:"\ud83d\udd37",subnet:"\ud83d\udd38",sg:"\ud83d\udd12",security_group:"\ud83d\udd12",securitygroup:"\ud83d\udd12",lb:"\u2696\ufe0f",loadbalancer:"\u2696\ufe0f",load_balancer:"\u2696\ufe0f",alb:"\u2696\ufe0f",asg:"\ud83d\udcc8",auto_scaling_group:"\ud83d\udcc8",route53:"\ud83c\udf0d",cloudfront:"\ud83c\udf10",ami:"\ud83d\udcc0",natgw:"\ud83d\udd04",nat_gateway:"\ud83d\udd04",tg:"\ud83c\udfaf",lt:"\ud83d\udccb",default:"\ud83d\udd27"};return t[e.toLowerCase()]||t.default},Y=e=>{const{nodes:t,edges:n,classDefs:a,graphDirection:r}=e;let o="graph ".concat(r,"\n");return t.forEach(e=>{const t="default"!==e.type?":::".concat(e.type):"";o+="    ".concat(e.id,'["').concat(e.label,'"]').concat(t,"\n")}),o+="\n",n.forEach(e=>{o+="    ".concat(e.source," --\x3e ").concat(e.target,"\n")}),o+="\n",a.forEach(e=>{o+="    ".concat(e,"\n")}),o},$=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TD",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return e;const r=(e=>{const t=e.split("\n"),n=[],a=[],r=[];let o="TD";return t.forEach(e=>{const t=e.trim(),c=t.match(/^graph\s+(\w+)/);if(c)return void(o=c[1]);if(t.startsWith("classDef"))return void r.push(t);const i=t.match(/^(\S+)\["([^"]+)"\](:::(\w+))?/);if(i)return void n.push({id:i[1],label:i[2],type:i[4]||"default",vpc:F(i[2])});const s=t.match(/^(\S+)\s+-->\s+(\S+)/);s&&a.push({source:s[1],target:s[2]})}),{nodes:n,edges:a,classDefs:r,graphDirection:o}})(e);return r.graphDirection=t,r.nodes=r.nodes.map(e=>(0,a.A)((0,a.A)({},e),{},{label:q(e.label)})),U(r,n)},[]),q=e=>{if(e.includes("arn:aws:")){const t=e.match(/targetgroup\/([^/]+)\//);if(t)return"TG: ".concat(t[1]);const n=e.match(/loadbalancer\/(app|net|gwy|nlb|alb)\/([^/]+)\//);if(n){const e=n[1].toUpperCase(),t=n[2];return"".concat(e,": ").concat(t)}}if(e.includes("i-")&&e.length>20){const t=e.match(/i-([a-f0-9]+)/);if(t&&t[1].length>8)return e.replace(/i-([a-f0-9]+)/,"i-".concat(t[1].substring(0,8)))}return e};(0,r.useEffect)(()=>{if(o&&o.mermaid){let e=o.mermaid;M.length>0&&(e=((e,t)=>{if(!t||0===t.length)return e;const n=e.split("\n"),a=[],r=new Set;return n.forEach(e=>{t.forEach(t=>{if(e.includes(":::".concat(t))){const t=e.match(/^\s*(\S+)\[/);t&&r.add(t[1])}})}),n.forEach(e=>{if(e.match(/^graph\s+\w+/))return void a.push(e);if(e.match(/^\s*classDef\s+/))return void a.push(e);let t=!1;r.forEach(n=>{e.includes(n)&&(t=!0)}),t&&a.push(e)}),a.join("\n")})(e,M)),e=$(e,w,W),E(e)}else E(null)},[o,w,M,W,$]);const J=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;j(!0),n({type:k.TH.SET_LOADING,payload:{key:"graph",value:!0}});try{const t=await O.A.getDependencyGraph(e);v(t),n({type:k.TH.SET_DEPENDENCY_GRAPH,payload:t});const a="live"===e?"Live discovery graph generated successfully":"Dependency graph generated successfully";n({type:k.TH.SET_STATUS_MESSAGE,payload:a}),c.Ay.success(a)}catch(t){c.Ay.error("Failed to generate graph: ".concat(t.message)),console.error("Failed to load dependency graph:",t)}finally{j(!1),n({type:k.TH.SET_LOADING,payload:{key:"graph",value:!1}})}};return(0,B.jsxs)("div",{style:{maxWidth:1400,margin:"0 auto"},children:[(0,B.jsxs)("div",{style:{marginBottom:24},children:[(0,B.jsxs)(D,{level:2,children:[(0,B.jsx)(y.A,{})," Resource Dependency Graph"]}),(0,B.jsx)(G,{type:"secondary",children:"Visualize dependencies between infrastructure resources and identify potential bottlenecks. The graph shows how resources depend on each other, helping you understand the infrastructure topology."})]}),(0,B.jsxs)(i.A,{children:[(0,B.jsxs)(s.A,{size:"large",style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},children:[(0,B.jsx)(s.A,{wrap:!0,children:(0,B.jsx)(l.A,{message:"The dependency graph is rendered using Mermaid diagram syntax for clear visualization",type:"info",showIcon:!0,style:{marginBottom:0}})}),(0,B.jsxs)(s.A,{wrap:!0,children:[(0,B.jsx)(d.Ay,{type:"primary",icon:(0,B.jsx)(b.A,{}),onClick:()=>J(),loading:x,size:"large",children:"Generate Graph"}),(0,B.jsx)(d.Ay,{type:"primary",icon:(0,B.jsx)(A,{}),onClick:()=>J("live"),loading:x,size:"large",style:{background:"#52c41a",borderColor:"#52c41a"},children:"Discovery Live"})]})]}),o&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(h.A,{}),(0,B.jsxs)(s.A,{size:"middle",wrap:!0,style:{width:"100%"},children:[(0,B.jsxs)("div",{children:[(0,B.jsxs)(I,{strong:!0,style:{marginRight:8},children:[(0,B.jsx)(T,{})," Graph Layout:"]}),(0,B.jsx)(p.A,{value:w,onChange:S,style:{width:150},options:[{label:"\u2b07\ufe0f Top to Bottom",value:"TD"},{label:"\u2b06\ufe0f Bottom to Top",value:"BT"},{label:"\u27a1\ufe0f Left to Right",value:"LR"},{label:"\u2b05\ufe0f Right to Left",value:"RL"}]})]}),(0,B.jsxs)("div",{children:[(0,B.jsxs)(I,{strong:!0,style:{marginRight:8},children:[(0,B.jsx)(C.A,{})," Group by Subgraphs:"]}),(0,B.jsx)(u.A,{checked:W,onChange:N,checkedChildren:"On",unCheckedChildren:"Off"}),(0,B.jsx)(I,{type:"secondary",style:{marginLeft:8,fontSize:"12px"},children:W?"Resources grouped by VPC/Type":"Flat layout"})]}),_.length>0&&(0,B.jsxs)("div",{style:{flex:1},children:[(0,B.jsxs)(I,{strong:!0,style:{marginRight:8},children:[(0,B.jsx)(T,{})," Filter by Resource Type:"]}),(0,B.jsx)(p.A,{mode:"multiple",value:M,onChange:R,placeholder:"Show all types",style:{minWidth:300,maxWidth:"100%"},allowClear:!0,maxTagCount:"responsive",children:_.map(e=>(0,B.jsx)(p.A.Option,{value:e,children:(0,B.jsx)(g.A,{color:"blue",children:e})},e))})]}),(M.length>0||"TD"!==w||!W)&&(0,B.jsx)(d.Ay,{onClick:()=>{S("TD"),R([]),N(!0)},size:"small",children:"Reset All Filters"})]})]})]}),x?(0,B.jsx)(i.A,{style:{marginTop:16},children:(0,B.jsxs)("div",{style:{textAlign:"center",padding:"50px 0"},children:[(0,B.jsx)(f.A,{size:"large"}),(0,B.jsx)("div",{style:{marginTop:16},children:(0,B.jsx)(I,{children:"Analyzing dependencies..."})})]})}):o?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(L.ds,{mermaidSyntax:z||o.mermaid,timestamp:o.timestamp,nodeMetadata:null===(e=o.graph)||void 0===e?void 0:e.nodes}),(0,B.jsx)(L.a6,{metadata:o.metadata}),(0,B.jsx)(L.$,{bottlenecks:null===(t=o.metadata)||void 0===t?void 0:t.bottlenecks})]}):(0,B.jsx)(i.A,{style:{marginTop:16},children:(0,B.jsx)(m.A,{description:"No dependency graph generated yet",image:m.A.PRESENTED_IMAGE_SIMPLE,children:(0,B.jsx)(d.Ay,{type:"primary",onClick:J,icon:(0,B.jsx)(b.A,{}),children:"Generate Graph"})})})]})}},81650:(e,t)=>{t.A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M848 359.3H627.7L825.8 109c4.1-5.3.4-13-6.3-13H436c-2.8 0-5.5 1.5-6.9 4L170 547.5c-3.1 5.3.7 12 6.9 12h174.4l-89.4 357.6c-1.9 7.8 7.5 13.3 13.3 7.7L853.5 373c5.2-4.9 1.7-13.7-5.5-13.7zM378.2 732.5l60.3-241H281.1l189.6-327.4h224.6L487 427.4h211L378.2 732.5z"}}]},name:"thunderbolt",theme:"outlined"}},89221:(e,t)=>{t.A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"}}}]);
//# sourceMappingURL=2369.9bdb0172.chunk.js.map