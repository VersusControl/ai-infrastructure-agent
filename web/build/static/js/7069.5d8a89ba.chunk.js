"use strict";(self.webpackChunkweb_ui_react=self.webpackChunkweb_ui_react||[]).push([[7069],{3681:(e,t,s)=>{s.d(t,{aO:()=>r,js:()=>n});const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return new Promise(r=>{const n=new XMLHttpRequest,o=t.method||"GET",a=setTimeout(()=>{n.abort(),console.warn("\u26a0\ufe0f Request timeout: ".concat(e)),r({ok:!1,status:0,statusText:"Timeout",data:null,error:"Request timeout"})},s);n.onload=()=>{clearTimeout(a);let e=null,t=null;try{n.responseText&&(e=JSON.parse(n.responseText))}catch(s){console.warn("Failed to parse response:",s),t="Failed to parse response"}r({ok:n.status>=200&&n.status<300,status:n.status,statusText:n.statusText,data:e,error:t||(n.status>=200&&n.status<300?null:n.statusText)})},n.onerror=()=>{clearTimeout(a),console.warn("\u26a0\ufe0f Request failed: ".concat(e)),r({ok:!1,status:0,statusText:"Network Error",data:null,error:"Network error"})},n.onabort=()=>{clearTimeout(a),r({ok:!1,status:0,statusText:"Aborted",data:null,error:"Request aborted"})};try{n.open(o,e,!0),t.headers&&Object.entries(t.headers).forEach(e=>{let[t,s]=e;n.setRequestHeader(t,s)}),t.body?n.send(t.body):n.send()}catch(i){clearTimeout(a),console.warn("\u274c Request error: ".concat(e),i.message),r({ok:!1,status:0,statusText:"Error",data:null,error:i.message})}})},n=()=>{const e=e=>{if(e.message&&e.message.includes("Failed to fetch")){var t;const s=(null===(t=e.error)||void 0===t?void 0:t.stack)||"";if(s.includes("/state")||s.includes("checkBackendHealth")||s.includes("safeFetch")||!s)return console.warn("\ud83d\udd07 Suppressed fetch error"),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1}},t=e=>{var t,s;const r=(null===(t=e.reason)||void 0===t?void 0:t.message)||(null===(s=e.reason)||void 0===s?void 0:s.toString())||"";if(r.includes("Failed to fetch")||r.includes("fetch")){var n;const t=(null===(n=e.reason)||void 0===n?void 0:n.stack)||"";if(t.includes("/state")||t.includes("checkBackendHealth")||t.includes("safeFetch")||r.includes("/state")||!t)return console.warn("\ud83d\udd07 Suppressed promise rejection"),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1}};return window.addEventListener("error",e,!0),window.addEventListener("unhandledrejection",t,!0),()=>{window.removeEventListener("error",e,!0),window.removeEventListener("unhandledrejection",t,!0)}}},7250:(e,t,s)=>{s.d(t,{A:()=>a});var r=s(9379);const n=new class{constructor(){this.mockEnabled=!1,console.log("MockDataService initialized. Mock enabled:",this.mockEnabled)}async delay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;return new Promise(t=>setTimeout(t,e))}async loadMockData(e){try{const t=await fetch("/mocks/".concat(e));if(!t.ok)throw new Error("Failed to load mock data: ".concat(e));return await t.json()}catch(t){throw console.error("Error loading mock data:",t),t}}async getDependencyGraph(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;await this.delay(800);try{let t;t="live"===e?"mock-discovery-live.json":"mock-generate-graph.json";const s=await this.loadMockData(t);return this.transformGraphData(s)}catch(t){throw console.error("Mock getDependencyGraph error:",t),new Error("Failed to load mock dependency graph: ".concat(t.message))}}transformGraphData(e){if(e.mermaid&&e.graph)return{mermaid:e.mermaid,graph:e.graph,timestamp:e.timestamp||(new Date).toISOString(),metadata:e.metadata||this.generateDefaultMetadata(e),source:e.source||"unknown",format:e.format||"mermaid"};if(e.mermaid)return{mermaid:e.mermaid,graph:null,timestamp:e.timestamp||(new Date).toISOString(),metadata:e.metadata||this.generateDefaultMetadata(e)};if(e.graph&&e.graph.edges){return{mermaid:this.convertGraphToMermaid(e.graph),graph:e.graph,timestamp:(new Date).toISOString(),metadata:this.generateMetadataFromGraph(e.graph)}}throw new Error("Invalid mock data format")}convertGraphToMermaid(e){const t=["graph TD"],s=new Set,r={};return e.edges.forEach(e=>{s.add(e.source),s.add(e.target);const t=e.source.replace(/[^a-zA-Z0-9_]/g,"_"),n=e.target.replace(/[^a-zA-Z0-9_]/g,"_");e.source.startsWith("vpc-")?r[t]="vpc":e.source.startsWith("subnet-")?r[t]="subnet":e.source.startsWith("sg-")?r[t]="sg":e.source.startsWith("i-")?r[t]="ec2":e.source.startsWith("lt-")?r[t]="lt":e.source.startsWith("nat-")?r[t]="natgw":e.source.includes("targetgroup")?r[t]="tg":e.source.includes("loadbalancer")||e.source.includes("app/")||e.source.includes("net/")?r[t]="lb":(e.source.includes("database")||e.source.includes("cluster"))&&(r[t]="rds"),e.target.startsWith("vpc-")?r[n]="vpc":e.target.startsWith("subnet-")?r[n]="subnet":e.target.startsWith("sg-")?r[n]="sg":e.target.startsWith("i-")?r[n]="ec2":e.target.startsWith("lt-")?r[n]="lt":e.target.startsWith("nat-")?r[n]="natgw":e.target.includes("targetgroup")?r[n]="tg":e.target.includes("loadbalancer")||e.target.includes("app/")||e.target.includes("net/")?r[n]="lb":(e.target.includes("database")||e.target.includes("cluster"))&&(r[n]="rds")}),t.push(""),s.forEach(e=>{const s=r[e]||"default",n=e.replace(/[^a-zA-Z0-9_]/g,"_");t.push("    ".concat(n,'["').concat(e,'"]:::').concat(s))}),t.push(""),e.edges.forEach(e=>{const s=e.source.replace(/[^a-zA-Z0-9_]/g,"_"),r=e.target.replace(/[^a-zA-Z0-9_]/g,"_");t.push("    ".concat(s," --\x3e ").concat(r))}),t.push(""),t.push("    classDef vpc fill:#e1f5fe"),t.push("    classDef subnet fill:#b3e5fc"),t.push("    classDef ec2 fill:#fff3e0"),t.push("    classDef sg fill:#f3e5f5"),t.push("    classDef lb fill:#e8f5e8"),t.push("    classDef asg fill:#fce4ec"),t.push("    classDef natgw fill:#e0f2f1"),t.push("    classDef tg fill:#f1f8e9"),t.push("    classDef rds fill:#fff9c4"),t.push("    classDef lt fill:#fce4ec"),t.push("    classDef default fill:#f5f5f5"),t.join("\n")}generateMetadataFromGraph(e){const t={},s=new Set;return e.edges.forEach(e=>{s.add(e.source),s.add(e.target);const r=this.detectNodeType(e.source),n=this.detectNodeType(e.target);t[r]=(t[r]||0)+1,t[n]=(t[n]||0)+1}),{nodeCount:s.size,edgeCount:e.edges.length,resourceTypeCounts:t,bottlenecks:this.generateMockBottlenecks(s)}}detectNodeType(e){return e.startsWith("vpc-")?"VPC":e.startsWith("subnet-")?"Subnet":e.startsWith("sg-")?"Security Group":e.startsWith("i-")?"EC2 Instance":e.startsWith("lt-")?"Launch Template":e.includes("targetgroup")?"Target Group":e.includes("loadbalancer")?"Load Balancer":"Other"}generateMockBottlenecks(e){const t=[];let s=0;return e.forEach(e=>{s>=3||e.startsWith("vpc-")&&(t.push({resource:e,dependents:Math.floor(20*Math.random())+10,impact:"high",reason:"Multiple resources depend on this VPC"}),s++)}),t}generateDefaultMetadata(e){return{nodeCount:0,edgeCount:0,resourceTypeCounts:{},bottlenecks:[]}}};var o=s(3681);const a=new class{constructor(){this.baseURL="http://localhost:8080/api",this.baseURL=this.baseURL.replace(/\/$/,""),this.mockEnabled=!1,console.log("ApiService initialized with baseURL:",this.baseURL),console.log("Mock mode enabled:",this.mockEnabled)}async call(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s="".concat(this.baseURL).concat(e),n=(0,r.A)({headers:(0,r.A)({"Content-Type":"application/json"},t.headers)},t);try{const e=await fetch(s,n);if(!e.ok){let t="HTTP ".concat(e.status,": ").concat(e.statusText),s=null;try{const r=await e.text();if(r)try{const e=JSON.parse(r);e.error?t=e.error:e.message?t=e.message:e.detail&&(t=e.detail),s=e}catch(o){r.length<200&&(t=r)}}catch(a){console.warn("Could not read error response body:",a)}const r=new Error(t);throw r.status=e.status,r.statusText=e.statusText,r.details=s,r}const t=await e.text();if(!t)throw new Error("Empty response from server");try{return JSON.parse(t)}catch(o){throw console.error("JSON parse error:",o),console.error("Response text:",t),new Error("Invalid JSON response: ".concat(o.message))}}catch(i){if(console.error("API call failed for ".concat(e,":"),i),"TypeError"===i.name&&"Failed to fetch"===i.message){const e=new Error("Unable to connect to server. Please check your internet connection and try again.");throw e.originalError=i,e.isNetworkError=!0,e}if("AbortError"===i.name){const e=new Error("Request timed out. Please try again.");throw e.originalError=i,e.isTimeoutError=!0,e}throw i}}async safeCall(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("GET"===(t.method||"GET")){const s="".concat(this.baseURL).concat(e),n=await(0,o.aO)(s,{method:"GET",headers:(0,r.A)({"Content-Type":"application/json"},t.headers)});if(!n.ok){const e=new Error(n.error||"HTTP ".concat(n.status,": ").concat(n.statusText));throw e.status=n.status,e.statusText=n.statusText,e.isNetworkError=0===n.status,e}return n.data}return this.call(e,t)}async processAgentRequest(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.call("/agent/process",{method:"POST",body:JSON.stringify({request:e,dry_run:t})})}async executeConfirmedPlan(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.call("/agent/execute-with-plan-recovery",{method:"POST",body:JSON.stringify({decisionId:e,dry_run:t})})}async getInfrastructureState(){const e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"?discovered_only=true":"";return this.safeCall("/state".concat(e))}async discoverInfrastructure(){return this.call("/discover",{method:"POST"})}async exportState(){const e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"?include_discovered=true":"",t=await fetch("".concat(this.baseURL,"/export").concat(e));if(!t.ok)throw new Error("Export failed: ".concat(t.statusText));return t.blob()}async getDependencyGraph(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.mockEnabled)return console.log("Using mock data for getDependencyGraph, source:",e),n.getDependencyGraph(e);const t=e?"?source=".concat(e):"";return this.call("/graph".concat(t))}async detectConflicts(){const e=new URLSearchParams({auto_resolve:(arguments.length>0&&void 0!==arguments[0]&&arguments[0]).toString()});return this.call("/conflicts?".concat(e))}async generateDeploymentPlan(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const s=new URLSearchParams;return e.length>0&&e.forEach(e=>{s.append("target_resources",e)}),s.set("include_levels",t.toString()),this.call("/plan?".concat(s))}downloadFile(e,t){const s=window.URL.createObjectURL(e),r=document.createElement("a");r.href=s,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(s)}getCurrentTimestamp(){return(new Date).toISOString().split("T")[0]}getBaseURL(){return this.baseURL}getConfig(){return{baseURL:this.baseURL,wsURL:"ws://localhost:8080/ws",environment:"production"}}}},9466:(e,t,s)=>{s.d(t,{$:()=>Re,wW:()=>G,a6:()=>Te,ds:()=>Se,zY:()=>h,Rt:()=>ie,l3:()=>he,RD:()=>c});var r=s(9379),n=s(3986),o=s(2261),a=s(7319),i=s(579);const l=["message","type","showIcon","closable","style"],c=e=>{let{message:t,type:s="auto",showIcon:c=!0,closable:d=!1,style:u={}}=e,p=(0,n.A)(e,l);if("thinking"===s)return(0,i.jsx)(o.A,(0,r.A)({message:"AI is thinking...",type:"info",showIcon:!0,icon:(0,i.jsx)(a.A,{spin:!0}),closable:!1,style:(0,r.A)({borderRadius:6,fontSize:14,marginBottom:16},u)},p));const g=(()=>{if("auto"!==s)return s;const e=t.toLowerCase();return e.includes("error")||e.includes("failed")||e.includes("fail")?"error":e.includes("warning")||e.includes("warn")?"warning":(e.includes("success")||e.includes("completed")||e.includes("processed"),"success")})(),h="string"===typeof t&&t.startsWith("Error: ")?t.substring(7):t;return(0,i.jsx)(o.A,(0,r.A)({message:h,type:g,showIcon:c,closable:d,style:(0,r.A)({borderRadius:6,fontSize:14,marginBottom:16},u)},p))};var d=s(5043),u=s(6464);const{Title:p,Paragraph:g}=u.A,h=e=>{let{title:t,description:s,level:n=2,extra:o=null,style:a={}}=e;return(0,i.jsxs)("div",{style:(0,r.A)({marginBottom:24},a),children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:8},children:[(0,i.jsx)(p,{level:n,style:{margin:0},children:t}),o&&(0,i.jsx)("div",{children:o})]}),s&&(0,i.jsx)(g,{type:"secondary",style:{margin:0,fontSize:"1rem"},children:s})]})};var m=s(5492),x=s(1219),f=s(5615),y=s(5229),v=s(7514),A=s(7914),b=s(4811);const j=["step","index","logs","className"],w=(0,d.forwardRef)((e,t)=>{let{step:s,index:o,logs:l=[],className:c=""}=e,u=(0,n.A)(e,j);const[p,g]=(0,d.useState)(!1),[h,w]=(0,d.useState)(!1),_=s.status||"pending";(0,d.useEffect)(()=>{p||("failed"===_||_.includes("recovery")||"running"===_&&l.length>0)&&g(!0)},[_,l.length,p]);const S=s.name||s.description||s.action||"Step ".concat(o+1),k=s.details||s.description||"Executing infrastructure operation...",C=!0===s.isRecoveryStep,T="completed"===_;return(0,i.jsxs)("div",(0,r.A)((0,r.A)({ref:t,className:"execution-step ".concat(c," ").concat(C?"recovery-step":""),"data-step-status":_},u),{},{children:[(0,i.jsxs)("div",{className:"execution-step-header",children:[(0,i.jsx)("div",{className:(z=_,"execution-step-number ".concat(z)),children:(0,i.jsx)("div",{className:"step-number-content",children:(0,i.jsx)("span",{className:"step-number-text",children:o+1})})}),(0,i.jsxs)("div",{className:"execution-step-content",children:[(0,i.jsxs)("div",{className:"execution-step-title",children:[S,C&&!T&&(0,i.jsx)("span",{style:{marginLeft:8,padding:"2px 8px",background:"#e6f7ff",color:"#1890ff",borderRadius:4,fontSize:11,fontWeight:600},children:"\ud83d\udd27 Recovery"}),T&&(0,i.jsx)("span",{style:{marginLeft:8,padding:"2px 8px",background:"#f6ffed",color:"#52c41a",borderRadius:4,fontSize:11,fontWeight:600},children:"\u2713 Completed"})]}),(0,i.jsx)("div",{className:"execution-step-description",children:k}),(0,i.jsxs)("div",{className:"execution-step-meta",children:[(0,i.jsxs)("span",{className:"step-duration",children:["Duration: ",s.duration||"Estimating..."]}),(0,i.jsxs)("span",{className:"step-dependencies",children:["Status: ",_]}),s.dependencies&&(0,i.jsxs)("span",{className:"step-dependencies",children:["Dependencies: ",s.dependencies]})]}),(s.id||s.mcpTool||s.toolParameters||s.parameters)&&(0,i.jsxs)("div",{style:{marginTop:"12px"},children:[(0,i.jsxs)(m.Ay,{type:"text",size:"small",icon:(0,i.jsx)(v.A,{}),onClick:()=>w(!h),style:{padding:"4px 8px",height:"auto",fontSize:"12px",color:"#1890ff"},children:[h?"Hide":"Show"," Step Details"]}),h&&(0,i.jsxs)("div",{style:{marginTop:"8px",padding:"12px",background:"#f6f8fa",borderRadius:"6px",border:"1px solid #e1e4e8",fontSize:"13px",overflow:"auto",maxHeight:"300px"},children:[s.id&&(0,i.jsxs)("div",{style:{marginBottom:s.mcpTool||s.toolParameters||s.parameters?"12px":"0",paddingBottom:s.mcpTool||s.toolParameters||s.parameters?"12px":"0",borderBottom:s.mcpTool||s.toolParameters||s.parameters?"1px solid #e1e4e8":"none"},children:[(0,i.jsx)("div",{style:{fontWeight:"600",color:"#24292e",marginBottom:"4px"},children:"Step ID"}),(0,i.jsx)("div",{style:{fontFamily:'Monaco, Menlo, "Ubuntu Mono", monospace',color:"#0366d6",fontSize:"12px"},children:s.id})]}),s.mcpTool&&(0,i.jsxs)("div",{style:{marginBottom:s.toolParameters||s.parameters?"12px":"0",paddingBottom:s.toolParameters||s.parameters?"12px":"0",borderBottom:s.toolParameters||s.parameters?"1px solid #e1e4e8":"none"},children:[(0,i.jsx)("div",{style:{fontWeight:"600",color:"#24292e",marginBottom:"4px"},children:"MCP Tool"}),(0,i.jsx)("div",{style:{fontFamily:'Monaco, Menlo, "Ubuntu Mono", monospace',color:"#0366d6",fontSize:"12px"},children:s.mcpTool})]}),(s.toolParameters||s.parameters)&&(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontWeight:"600",color:"#24292e",marginBottom:"8px"},children:"Parameters"}),(0,i.jsx)("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:'Monaco, Menlo, "Ubuntu Mono", monospace',fontSize:"12px",color:"#24292e"},children:JSON.stringify(s.toolParameters||s.parameters,null,2)})]})]})]})]}),(0,i.jsx)("div",{className:"step-status-icon-container",children:(e=>{switch(e){case"completed":return(0,i.jsx)(x.A,{style:{color:"white",fontSize:"12px"}});case"failed":return(0,i.jsx)(f.A,{style:{color:"white",fontSize:"12px"}});case"running":case"recovery-generating":case"recovery-in-progress":return(0,i.jsx)(a.A,{spin:!0,style:{color:"white",fontSize:"12px"}});case"recovery-pending":return(0,i.jsx)(y.A,{style:{color:"#212529",fontSize:"12px"}});default:return(0,i.jsx)(y.A,{style:{color:"#6c757d",fontSize:"12px"}})}})(_)}),(l.length>0||["running","completed","failed"].includes(_))&&(0,i.jsx)(m.Ay,{type:"text",size:"small",icon:p?(0,i.jsx)(A.A,{}):(0,i.jsx)(b.A,{}),onClick:()=>g(!p),className:"expand-logs-button"})]}),p&&(0,i.jsx)("div",{className:"execution-step-logs",children:(0,i.jsx)("div",{className:"logs-content",children:l.length>0?l.map((e,t)=>{var s,r;return(0,i.jsxs)("div",{className:"step-log-entry level-".concat(e.type),children:[(0,i.jsx)("span",{className:"timestamp",children:(null===(s=e.timestamp)||void 0===s?void 0:s.toLocaleTimeString())||(new Date).toLocaleTimeString()}),(0,i.jsxs)("span",{className:"level",children:["[",(null===(r=e.type)||void 0===r?void 0:r.toUpperCase())||"INFO","]"]}),(0,i.jsx)("span",{className:"message",children:e.message})]},t)}):(0,i.jsx)("div",{className:"no-logs",children:"No logs available for this step"})})})]}));var z});w.displayName="ExecutionStep";const _=w;var S=s(7692),k=s(6399),C=s(6051),T=s(5520),z=s(1686),E=s(6087),R=s(9157),P=s(8180),N=s(5870),L=s(4763),D=s(1837);const{Text:B,Paragraph:M}=u.A,W=e=>{let{option:t,index:s,isSelected:r,onSelect:n}=e;const[o,a]=(0,d.useState)(!1),l=Math.round(100*(t.successProbability||0)),c=(t.riskLevel||"medium").toLowerCase(),u="multi_step_recovery"===t.action&&t.multiStepPlan&&t.multiStepPlan.length>0;return(0,i.jsxs)(T.A,{size:"small",className:"recovery-option ".concat(r?"selected":""),onClick:n,style:{cursor:"pointer",border:r?"2px solid #1890ff":"1px solid #d9d9d9",backgroundColor:r?"#f0f7ff":"#fff"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[(0,i.jsxs)(B,{strong:!0,children:[t.action,u&&(0,i.jsxs)(k.A,{size:"small",color:"blue",style:{marginLeft:"8px"},children:[t.totalSteps||t.multiStepPlan.length," steps"]})]}),(0,i.jsxs)(C.A,{size:"small",children:[(0,i.jsxs)(k.A,{color:"blue",children:[l,"% Success"]}),(0,i.jsxs)(k.A,{color:(e=>{switch(e){case"low":return"green";case"high":return"red";default:return"orange"}})(c),children:[t.riskLevel||"Medium"," Risk"]})]})]}),(0,i.jsx)(M,{style:{marginBottom:u||t.details?"8px":"0",color:"#666"},children:t.reasoning||"No reasoning provided"}),!u&&(t.newTool||t.modifiedParameters)&&(0,i.jsxs)("div",{style:{fontSize:"12px",color:"#888",marginBottom:"8px"},children:[t.newTool&&"New Tool: ".concat(t.newTool),t.newTool&&t.modifiedParameters&&" | ",t.modifiedParameters&&"Parameters: ".concat(JSON.stringify(t.modifiedParameters))]}),t.details&&!u&&(0,i.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:t.details}),u&&(0,i.jsxs)("div",{style:{marginTop:"8px"},children:[(0,i.jsxs)(m.Ay,{type:"text",size:"small",icon:o?(0,i.jsx)(A.A,{}):(0,i.jsx)(b.A,{}),onClick:e=>{e.stopPropagation(),a(!o)},style:{padding:"0",height:"auto",fontSize:"12px"},children:[o?"Hide":"Show"," Multi-Step Plan (",t.totalSteps||t.multiStepPlan.length," steps)"]}),o&&(0,i.jsx)("div",{style:{marginTop:"8px",paddingLeft:"16px",borderLeft:"2px solid #f0f0f0"},children:t.multiStepPlan.map((e,t)=>(0,i.jsx)("div",{style:{marginBottom:"8px",fontSize:"12px"},children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px"},children:[(0,i.jsx)("div",{style:{minWidth:"16px",height:"16px",borderRadius:"50%",backgroundColor:"#1890ff",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",marginTop:"2px"},children:e.stepOrder||t+1}),(0,i.jsxs)("div",{style:{flex:1},children:[(0,i.jsx)("div",{style:{fontWeight:"bold"},children:e.toolName}),(0,i.jsx)("div",{style:{color:"#666"},children:e.purpose}),e.parameters&&Object.keys(e.parameters).length>0&&(0,i.jsxs)("div",{style:{color:"#888",marginTop:"2px"},children:["Parameters: ",JSON.stringify(e.parameters,null,2)]})]})]})},t))})]})]})},I=e=>{let{stepId:t,recoveryData:s,onProceedWithRecovery:r,onAbortRecovery:n}=e;const[o,l]=(0,d.useState)(null);if(!s)return null;if(s.inProgress)return(0,i.jsxs)(T.A,{size:"small",className:"inline-recovery-card recovery-in-progress",style:{borderLeft:"4px solid #17a2b8",backgroundColor:"#f8f9fa"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,i.jsx)(a.A,{spin:!0,style:{color:"#17a2b8"}}),(0,i.jsx)(B,{strong:!0,children:"Executing Recovery..."}),"skip"===s.selectedOption?(0,i.jsx)(B,{type:"secondary",children:"Skipping step"}):(0,i.jsxs)(B,{type:"secondary",children:["Option ",parseInt(s.selectedOption)+1]})]}),s.progressMessage&&(0,i.jsx)("div",{style:{marginTop:"8px"},children:(0,i.jsx)(B,{type:"secondary",children:s.progressMessage})})]});if(!s.visible)return null;const{failureContext:c,recoveryOptions:u}=s,p=e=>{l(e)};return(0,i.jsxs)(T.A,{size:"small",className:"inline-recovery-card",style:{borderLeft:"4px solid #ffc107",backgroundColor:"#fffef0",marginTop:"8px"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[(0,i.jsx)(N.A,{style:{color:"#ffc107",fontSize:"16px"}}),(0,i.jsx)(B,{strong:!0,style:{color:"#856404"},children:"Step Failed - Recovery Options Available"})]}),(0,i.jsxs)("div",{style:{marginBottom:"12px",padding:"8px",backgroundColor:"#f8d7da",borderRadius:"4px"},children:[(0,i.jsx)(B,{strong:!0,children:"Error: "}),(0,i.jsx)(B,{children:(null===c||void 0===c?void 0:c.errorMessage)||"Unknown error"}),(0,i.jsx)("br",{}),(0,i.jsx)(B,{strong:!0,children:"Step: "}),(0,i.jsx)(B,{children:(null===c||void 0===c?void 0:c.stepName)||"Unknown"}),(null===c||void 0===c?void 0:c.toolName)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{children:" | "}),(0,i.jsx)(B,{strong:!0,children:"Tool: "}),(0,i.jsx)(B,{children:c.toolName})]})]}),(null===c||void 0===c?void 0:c.aiAnalysis)&&(0,i.jsxs)("div",{style:{marginBottom:"12px",padding:"8px",backgroundColor:"#d1ecf1",borderRadius:"4px"},children:[(0,i.jsxs)("div",{style:{marginBottom:"4px"},children:[(0,i.jsx)(B,{strong:!0,children:"Root Cause: "}),(0,i.jsx)(B,{children:c.aiAnalysis.rootCause||"Not available"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(B,{strong:!0,children:"Recommendation: "}),(0,i.jsx)(B,{children:c.aiAnalysis.recommendation||"Not available"})]})]}),(0,i.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,i.jsx)(B,{strong:!0,style:{marginBottom:"8px",display:"block"},children:"Choose Recovery Action:"}),(0,i.jsxs)(C.A,{direction:"vertical",size:"small",style:{width:"100%"},children:[u&&u.map((e,t)=>(0,i.jsx)(W,{option:e,index:t,isSelected:o===t,onSelect:()=>p(t)},t)),(0,i.jsx)(W,{option:{action:"Skip This Step",reasoning:"Skip this step and continue with the next step in the plan.",riskLevel:"medium",successProbability:.7,details:"Note: May affect steps that depend on this step's output."},index:"skip",isSelected:"skip"===o,onSelect:()=>p("skip")})]})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[(0,i.jsx)(m.Ay,{type:"default",danger:!0,icon:(0,i.jsx)(L.A,{}),onClick:()=>{n&&n(t)},children:"Abort Execution"}),(0,i.jsx)(m.Ay,{type:"primary",icon:(0,i.jsx)(D.A,{}),disabled:null===o,onClick:()=>{null!==o&&r&&r(t,o)},children:"Proceed with Selected Option"})]})]})},O=["steps","logs","recoveryOptions","isExecuting","executionProgress","executionElapsed","executionCompleted","isRecoveryAnalyzing","onConfirm","onCancel","onProceedWithRecovery","onAbortRecovery","showConfirmButton","showCancelButton","confirmButtonText","children","title","icon","className"],{Text:F}=u.A,U=(0,d.forwardRef)((e,t)=>{let{steps:s=[],logs:l=[],recoveryOptions:c={},isExecuting:u=!1,executionProgress:p=0,executionElapsed:g="00:00",executionCompleted:h=!1,isRecoveryAnalyzing:y=!1,onConfirm:v=null,onCancel:A=null,onProceedWithRecovery:b=null,onAbortRecovery:j=null,showConfirmButton:w=!0,showCancelButton:N=!0,confirmButtonText:L="Confirm & Execute",children:D=null,title:B="Execution Plan",icon:M=(0,i.jsx)(E.A,{}),className:W=""}=e,U=(0,n.A)(e,O);const G=(0,d.useRef)({}),[H,V]=(0,d.useState)(!0);(0,d.useImperativeHandle)(t,()=>({scrollToStep:e=>{const t=G.current[e];t&&t.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}));const q=(0,r.A)({marginTop:16},h&&{borderColor:"#28a745",boxShadow:"0 4px 12px rgba(40, 167, 69, 0.15)"});return(0,i.jsx)("div",{className:"execution-plan-container ".concat(W," ").concat(h?"execution-success":""),children:(0,i.jsx)(T.A,(0,r.A)((0,r.A)({title:(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[M," ",B,(0,i.jsxs)(k.A,{color:H?"blue":"default",style:{marginLeft:8},children:[s.length," ",1===s.length?"step":"steps"]})]}),(0,i.jsx)(m.Ay,{type:"text",size:"small",icon:H?(0,i.jsx)(R.A,{}):(0,i.jsx)(P.A,{}),onClick:()=>V(!H),style:{display:"flex",alignItems:"center",gap:4,fontSize:12,color:"#666"},children:H?"Collapse":"Expand"})]}),style:q},U),{},{children:(0,i.jsxs)(C.A,{direction:"vertical",size:"large",style:{width:"100%"},children:[(()=>{if(!u&&!h)return null;const e=h?{background:"#d4edda",border:"1px solid #28a745",boxShadow:"0 0 8px rgba(40, 167, 69, 0.3)"}:{background:"#f8f9fa",border:"1px solid #dee2e6"};return(0,i.jsxs)("div",{style:(0,r.A)({padding:"16px",borderRadius:"8px"},e),children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[(0,i.jsx)(F,{strong:!0,className:h?"status-success":"status-running",children:h?"Execution Completed Successfully":"Execution in Progress"}),(0,i.jsx)(F,{type:"secondary",style:{fontFamily:"monospace"},children:g})]}),(0,i.jsx)(S.A,{percent:p,status:h?"success":"active",strokeColor:h?"#28a745":"#007bff",trailColor:"#e9ecef"})]})})(),H&&(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:s.map((e,t)=>{return(0,i.jsxs)(d.Fragment,{children:[(0,i.jsx)(_,{ref:t=>{t&&e.id&&(G.current[e.id]=t)},step:e,index:t,logs:(s=e.id,r=t,l&&0!==l.length?l.filter(e=>{if(e.stepId){if(e.stepId===s)return!0;if(e.stepId==="step-".concat(r))return!0;if(e.stepId===r.toString())return!0;if(e.stepId==="step_".concat(r))return!0}return 0===r&&!e.stepId}):[])}),y&&"failed"===e.status&&(0,i.jsx)(o.A,{message:(0,i.jsxs)(C.A,{children:[(0,i.jsx)(z.A,{indicator:(0,i.jsx)(a.A,{style:{fontSize:18},spin:!0})}),(0,i.jsx)(F,{strong:!0,children:"Analyzing Recovery Options..."})]}),description:"AI is analyzing the failure and generating recovery strategies. This may take a moment.",type:"warning",showIcon:!1,style:{marginLeft:48,marginTop:6,marginBottom:12}}),c[e.id]&&(0,i.jsx)(I,{stepId:e.id,recoveryData:c[e.id],onProceedWithRecovery:b,onAbortRecovery:j})]},e.id||t);var s,r})}),u||h?u?(0,i.jsx)(k.A,{color:"processing",children:"Executing..."}):null:(0,i.jsxs)(C.A,{children:[w&&v&&(0,i.jsx)(m.Ay,{type:"primary",icon:(0,i.jsx)(x.A,{}),onClick:v,size:"large",children:L}),N&&A&&(0,i.jsx)(m.Ay,{icon:(0,i.jsx)(f.A,{}),onClick:A,size:"large",children:"Cancel"})]}),D&&d.Children.map(D,e=>{var t;return d.isValidElement(e)&&"ExecutionLogs"===(null===(t=e.type)||void 0===t?void 0:t.name)?null:e})]})}))})});U.displayName="ExecutionPlan";const G=U,{Text:H}=u.A;var V=s(7326),q=s(9587),J=s(7175);const{Text:Z,Title:Y}=u.A,{Panel:X}=V.A,$=e=>{var t;let{resource:s,searchTerm:r,iconUrl:n}=e;const[o,a]=(0,d.useState)(!1),l=(null===(t=s.properties)||void 0===t?void 0:t.properties)||s.properties||{};return(0,i.jsxs)(T.A,{className:"resource-card",hoverable:!0,bodyStyle:{padding:"20px"},children:[(0,i.jsx)("div",{className:"resource-header",children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[(0,i.jsx)("div",{className:"resource-icon",children:(0,i.jsx)("img",{src:n,alt:"".concat(s.type," icon"),style:{width:"32px",height:"32px"},onError:e=>{e.target.src="/aws-service-icons/management-governance/32/Arch_AWS-CloudFormation_32.svg"}})}),(0,i.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,i.jsx)(Y,{level:5,style:{margin:0,fontSize:"16px",fontWeight:600,color:"#1a1a1a",wordBreak:"break-all"},children:((e,t)=>{if(!t)return e;const s=new RegExp("(".concat(t,")"),"gi");return e.split(s).map((e,t)=>s.test(e)?(0,i.jsx)("span",{className:"search-highlight",children:e},t):e)})(s.id,r)}),(0,i.jsx)(Z,{type:"secondary",style:{fontSize:"12px",textTransform:"uppercase",fontWeight:500,letterSpacing:"0.5px"},children:s.type})]}),(0,i.jsx)(m.Ay,{type:"text",size:"small",icon:o?(0,i.jsx)(q.A,{}):(0,i.jsx)(J.A,{}),onClick:()=>a(!o),style:{color:"#666",opacity:.7}})]})}),(0,i.jsx)(V.A,{ghost:!0,activeKey:o?["properties"]:[],onChange:()=>a(!o),style:{border:"none"},children:(0,i.jsx)(X,{header:null,showArrow:!1,style:{padding:0,border:"none"},children:(0,i.jsx)("div",{className:"properties-container",children:(0,i.jsx)("pre",{style:{margin:0,padding:"16px",fontSize:"12px",lineHeight:"1.5",fontFamily:"SF Mono, Monaco, Consolas, monospace",color:"#2d3748",backgroundColor:"transparent",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:JSON.stringify(l,null,2)})})},"properties")})]})};$.defaultProps={searchTerm:""};const K=$,{Title:Q,Text:ee}=u.A;var te=s(9472),se=s(7419),re=s(1645);const{Text:ne}=u.A,oe=e=>{const t={ec2_instance:"compute/32/Arch_Amazon-EC2_32.svg",instance:"compute/32/Arch_Amazon-EC2_32.svg",lambda:"compute/32/Arch_AWS-Lambda_32.svg",auto_scaling_group:"compute/32/Arch_Amazon-EC2-Auto-Scaling_32.svg",asg:"compute/32/Arch_Amazon-EC2-Auto-Scaling_32.svg",vpc:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",subnet:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",security_group:"security-identity-compliance/32/Arch_AWS-WAF_32.svg",securitygroup:"security-identity-compliance/32/Arch_AWS-WAF_32.svg",load_balancer:"networking-content-delivery/32/Arch_Elastic-Load-Balancing_32.svg",loadbalancer:"networking-content-delivery/32/Arch_Elastic-Load-Balancing_32.svg",alb:"networking-content-delivery/32/Arch_Elastic-Load-Balancing_32.svg",route53:"networking-content-delivery/32/Arch_Amazon-Route-53_32.svg",cloudfront:"networking-content-delivery/32/Arch_Amazon-CloudFront_32.svg",internet_gateway:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",nat_gateway:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",route_table:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",rds:"database/32/Arch_Amazon-RDS_32.svg",database:"database/32/Arch_Amazon-RDS_32.svg",dynamodb:"database/32/Arch_Amazon-DynamoDB_32.svg",redshift:"database/32/Arch_Amazon-Redshift_32.svg",s3:"storage/32/Arch_Amazon-Simple-Storage-Service_32.svg",ebs:"storage/32/Arch_Amazon-Elastic-Block-Store_32.svg",efs:"storage/32/Arch_Amazon-Elastic-File-System_32.svg",default:"management-governance/32/Arch_AWS-CloudFormation_32.svg"},s=(null===e||void 0===e?void 0:e.toLowerCase())||"default";return"/aws-service-icons/".concat(t[s]||t.default)},ae=e=>{let{infrastructureData:t,searchTerm:s}=e;if(!t)return(0,i.jsx)("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e8e8e8",padding:"48px"},children:(0,i.jsx)(te.A,{description:(0,i.jsx)(ne,{type:"secondary",style:{fontSize:"16px"},children:"No infrastructure data available"}),style:{padding:"48px 0"}})});let r={};const n=t.resources&&t.resources.length>0,o=t.managed_state?Object.keys(t.managed_state.resources||{}).length:0;t.managed_state&&o>0?r=t.managed_state.resources||{}:n&&(r={},t.resources.forEach((e,t)=>{var s;r[e.id||"resource-".concat(t)]={id:e.id,name:e.name||e.id,type:e.type,status:e.status,properties:{aws_details:e.properties},createdAt:e.createdAt,dependencies:null===(s=e.properties)||void 0===s?void 0:s.dependencies}}));const a=Object.values(r).filter(e=>"step_reference"!==e.type).filter(e=>!s||e.id.toLowerCase().includes(s.toLowerCase())).reduce((e,t)=>{const s=t.type||"unknown";return e[s]||(e[s]=[]),e[s].push(t),e},{});return 0===Object.keys(a).length?(0,i.jsx)("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e8e8e8",padding:"48px"},children:(0,i.jsx)(te.A,{description:(0,i.jsx)(ne,{type:"secondary",style:{fontSize:"16px"},children:s?"No resources match your search":"No resources found"}),style:{padding:"48px 0"}})}):(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:Object.entries(a).map(e=>{let[t,r]=e;return(0,i.jsx)(T.A,{className:"category-card",bodyStyle:{padding:"24px"},title:(0,i.jsx)("div",{className:"category-header",children:(0,i.jsxs)(ne,{strong:!0,style:{textTransform:"capitalize",fontSize:"18px",color:"#1a1a1a"},children:[t.replace("_"," ")," (",r.length,")"]})}),children:(0,i.jsx)(se.A,{gutter:[16,16],children:r.map(e=>(0,i.jsx)(re.A,{xs:24,sm:12,lg:8,xl:6,children:(0,i.jsx)(K,{resource:e,searchTerm:s,iconUrl:oe(e.type)})},e.id))})},t)})})};ae.defaultProps={searchTerm:""};const ie=ae;var le=s(777),ce=s(1522),de=s(2411);const{Text:ue,Title:pe}=u.A,ge=e=>{let{onRefresh:t,refreshing:s,searchTerm:r,onSearchChange:n,totalResources:o,totalCategories:a}=e;return(0,i.jsxs)("div",{style:{marginBottom:"32px",backgroundColor:"white",padding:"24px",borderRadius:"16px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",border:"1px solid #e8e8e8"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[(0,i.jsx)(pe,{level:2,style:{margin:0,color:"#1a1a1a",fontWeight:700},children:"Infrastructure Resources"}),(0,i.jsx)(m.Ay,{type:"primary",icon:(0,i.jsx)(ce.A,{spin:s}),onClick:t,loading:s,style:{borderRadius:"8px",height:"40px",backgroundColor:"#1890ff",borderColor:"#1890ff"},children:"Refresh"})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[(0,i.jsx)(le.A,{placeholder:"Search resources by ID...",prefix:(0,i.jsx)(de.A,{}),value:r,onChange:n,style:{maxWidth:"300px",borderRadius:"8px"},allowClear:!0}),(0,i.jsxs)(ue,{type:"secondary",children:[o," resource",1!==o?"s":""," in ",a," categories"]})]})]})};ge.defaultProps={refreshing:!1,searchTerm:"",onSearchChange:()=>{},totalResources:0,totalCategories:0};const he=ge;var me=s(2846),xe=s(5672),fe=s(1243),ye=s(4242),ve=s(1182),Ae=s(121),be=s(9795),je=s(6626),we=s(7240);const{Text:_e}=u.A,Se=e=>{let{mermaidSyntax:t,timestamp:s,onFullscreen:r,nodeMetadata:n}=e;const o=(0,d.useRef)(null),a=(0,d.useRef)(!1),[l,c]=(0,d.useState)(!1),[u,p]=(0,d.useState)(1),[g,h]=(0,d.useState)({x:0,y:0}),x=(0,d.useRef)(null),[f,y]=(0,d.useState)(null),[v,A]=(0,d.useState)(!1),[b,j]=(0,d.useState)({x:0,y:0}),w=(0,d.useRef)(null);(0,d.useEffect)(()=>{if(!t||!o.current||a.current)return;let e=!0;a.current=!0;const s=async s=>{if(e)try{if(await new Promise(e=>setTimeout(e,150)),!e)return;const r=(e=>{const t={};return e&&Array.isArray(e)?(e.forEach(e=>{if(e.id&&e.type){const s=e.id.replace(/[^a-zA-Z0-9_]/g,"_");t[s]=e.type}}),t):t})(n),o=(e=>{const t={};return e?(e.split("\n").forEach(e=>{const s=e.trim().match(/^(\S+)\[.*?\]:::(\w+)/);if(s){const[,e,r]=s;t[e]=r}}),t):t})(t);s.querySelectorAll(".node").forEach(e=>{const t=e.id||"",s=e.getAttribute("class")||"",n=(e=>{if(!e)return"";let t=e.replace(/^(flowchart-|graph-|L-|subgraph-)/gi,"");return t=t.replace(/-(\d+)$/g,""),t})(t);let a=r[n];if(a||(a=o[n]),a||(a=((e,t)=>{const s=e.toLowerCase();if(t){const e=t.toLowerCase();if(e.includes("vpc")&&!e.includes("subnet"))return"vpc";if(e.includes("subnet"))return"subnet";if(e.includes("lambda"))return"lambda";if(e.includes("rds")||e.includes("database"))return"rds";if(e.includes("dynamodb"))return"dynamodb";if(e.includes("s3"))return"s3";if(e.includes("ami"))return"ami";if(e.includes("natgw")||e.includes("nat_gateway"))return"nat_gateway";if(e.includes("alb")||e.includes("lb")||e.includes("loadbalancer")||e.includes("load_balancer"))return"load_balancer";if(e.includes("tg")||e.includes("targetgroup"))return"load_balancer";if(e.includes("asg")||e.includes("auto_scaling"))return"auto_scaling_group";if(e.includes("sg")||e.includes("security")||e.includes("securitygroup"))return"security_group";if(e.includes("ec2"))return"ec2_instance";if(e.includes("lt")||e.includes("launch"))return"ec2_instance";if(e.match(/\bec2\b|\binstance\b/)&&!e.includes("vpc"))return"ec2_instance"}return s.includes("vpc-")||s.includes("vpc_")?"vpc":s.includes("subnet-")||s.includes("subnet_")?"subnet":s.includes("sg-")||s.includes("sg_")?"security_group":s.includes("i-")||s.includes("i_")||s.includes("lt-")||s.includes("lt_")?"ec2_instance":s.includes("ami-")||s.includes("ami_")?"ami":s.includes("targetgroup")||s.includes("elasticloadbalancing")?"load_balancer":null})(t,s)),a){const t=(e=>{const t={ec2_instance:"compute/32/Arch_Amazon-EC2_32.svg",instance:"compute/32/Arch_Amazon-EC2_32.svg",ec2:"compute/32/Arch_Amazon-EC2_32.svg",ami:"compute/32/Arch_Amazon-EC2_32.svg",lambda:"compute/32/Arch_AWS-Lambda_32.svg",auto_scaling_group:"compute/32/Arch_Amazon-EC2-Auto-Scaling_32.svg",asg:"compute/32/Arch_Amazon-EC2-Auto-Scaling_32.svg",vpc:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",subnet:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",security_group:"security-identity-compliance/32/Arch_AWS-WAF_32.svg",securitygroup:"security-identity-compliance/32/Arch_AWS-WAF_32.svg",sg:"security-identity-compliance/32/Arch_AWS-WAF_32.svg",load_balancer:"networking-content-delivery/32/Arch_Elastic-Load-Balancing_32.svg",loadbalancer:"networking-content-delivery/32/Arch_Elastic-Load-Balancing_32.svg",alb:"networking-content-delivery/32/Arch_Elastic-Load-Balancing_32.svg",lb:"networking-content-delivery/32/Arch_Elastic-Load-Balancing_32.svg",route53:"networking-content-delivery/32/Arch_Amazon-Route-53_32.svg",cloudfront:"networking-content-delivery/32/Arch_Amazon-CloudFront_32.svg",internet_gateway:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",nat_gateway:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",natgw:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",route_table:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",rds:"database/32/Arch_Amazon-RDS_32.svg",database:"database/32/Arch_Amazon-RDS_32.svg",dynamodb:"database/32/Arch_Amazon-DynamoDB_32.svg",redshift:"database/32/Arch_Amazon-Redshift_32.svg",s3:"storage/32/Arch_Amazon-Simple-Storage-Service_32.svg",ebs:"storage/32/Arch_Amazon-Elastic-Block-Store_32.svg",efs:"storage/32/Arch_Amazon-Elastic-File-System_32.svg",tg:"networking-content-delivery/32/Arch_Elastic-Load-Balancing_32.svg",lt:"compute/32/Arch_Amazon-EC2_32.svg",default:"management-governance/32/Arch_AWS-CloudFormation_32.svg"},s=(null===e||void 0===e?void 0:e.toLowerCase())||"default";return"/aws-service-icons/".concat(t[s]||t.default)})(a),s=e.querySelector("rect, polygon, circle, ellipse");if(!s)return;const r=s.getBBox(),n=document.createElementNS("http://www.w3.org/2000/svg","image");n.setAttributeNS("http://www.w3.org/1999/xlink","href",t),n.setAttribute("width","32"),n.setAttribute("height","32"),n.setAttribute("x",r.x+r.width/2-16),n.setAttribute("y",r.y+12),n.style.pointerEvents="none";const o=e.querySelector(".label"),i=e.querySelectorAll(".label text, text");if(o&&o.parentNode?o.parentNode.insertBefore(n,o):i.length>0&&i[0].parentNode?i[0].parentNode.insertBefore(n,i[0]):e.appendChild(n),i.forEach(e=>{const t=e.getAttribute("transform")||"",s=parseFloat(e.getAttribute("y")||0);if(t){const s="".concat(t," translate(0, 35)");e.setAttribute("transform",s)}else e.setAttribute("y",s+35)}),o){const e=o.getAttribute("transform")||"";if(e){const t="".concat(e," translate(0, 35)");o.setAttribute("transform",t)}else{const e=parseFloat(o.getAttribute("y")||0);o.setAttribute("y",e+35)}}}})}catch(r){console.warn("Failed to add icons to nodes:",r)}};return(async()=>{try{const r="mermaid-".concat(Date.now());if(!e||!o.current)return;const n=o.current;n.removeAttribute("data-processed"),n.innerHTML="";const a=document.createElement("div");if(a.className="mermaid",a.id=r,a.textContent=t,n.appendChild(a),await new Promise(e=>setTimeout(e,100)),!e)return;if(await we.A.run({nodes:[a],suppressErrors:!1}),!e)return;await s(n);const i=n.querySelector("svg");i&&(y(i.outerHTML),x.current&&(x.current.innerHTML=i.outerHTML))}catch(r){console.error("Mermaid rendering error:",r);const s='\n          <div style="color: #ff4d4f; text-align: left; padding: 20px; background: #fff2f0; border: 1px solid #ffccc7; border-radius: 4px;">\n            <div style="font-weight: bold; margin-bottom: 8px;">\u26a0\ufe0f Error rendering diagram</div>\n            <div style="margin-bottom: 12px;">'.concat(r.message,'</div>\n            <details style="margin-top: 12px;">\n              <summary style="cursor: pointer; color: #1890ff;">Show Mermaid Syntax</summary>\n              <pre style="margin-top: 8px; padding: 12px; background: #f5f5f5; border-radius: 4px; overflow: auto;">').concat(t,"</pre>\n            </details>\n          </div>\n        ");e&&x.current&&(x.current.innerHTML=s),y(s)}finally{e&&(a.current=!1)}})(),()=>{e=!1,a.current=!1}},[t,n]);const _=()=>{p(e=>Math.min(e+.25,5))},S=()=>{p(e=>Math.max(e-.25,.25))},z=()=>{p(1),h({x:0,y:0})},E=(0,d.useCallback)(e=>{e.preventDefault();const t=e.deltaY>0?-.1:.1;p(e=>Math.min(Math.max(e+t,.25),5))},[]),R=(0,d.useCallback)(e=>{0===e.button&&(A(!0),j({x:e.clientX-g.x,y:e.clientY-g.y}),e.preventDefault())},[g]),P=(0,d.useCallback)(e=>{v&&h({x:e.clientX-b.x,y:e.clientY-b.y})},[v,b]),N=(0,d.useCallback)(()=>{A(!1)},[]);(0,d.useEffect)(()=>{if(v)return document.addEventListener("mousemove",P),document.addEventListener("mouseup",N),()=>{document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",N)}},[v,P,N]);const L=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,i.jsxs)("div",{style:{position:"relative"},children:[(0,i.jsxs)("div",{style:{position:"absolute",top:"10px",right:"10px",zIndex:10,display:"flex",gap:"8px",background:"rgba(255, 255, 255, 0.95)",padding:"8px",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},children:[(0,i.jsx)(me.A,{title:"Zoom In (or scroll up)",children:(0,i.jsx)(m.Ay,{icon:(0,i.jsx)(fe.A,{}),size:"small",onClick:_})}),(0,i.jsx)(me.A,{title:"Reset View (Zoom & Pan)",children:(0,i.jsxs)(m.Ay,{icon:(0,i.jsx)(ye.A,{}),size:"small",onClick:z,children:[Math.round(100*u),"%"]})}),(0,i.jsx)(me.A,{title:"Zoom Out (or scroll down)",children:(0,i.jsx)(m.Ay,{icon:(0,i.jsx)(ve.A,{}),size:"small",onClick:S})}),(0,i.jsx)(me.A,{title:"Drag to Pan",children:(0,i.jsx)(k.A,{icon:(0,i.jsx)(Ae.A,{}),color:"blue",style:{margin:0},children:"Pan Mode"})})]}),(0,i.jsx)("div",{ref:w,onWheel:E,onMouseDown:R,style:{textAlign:"center",backgroundColor:"#fafafa",padding:"20px",borderRadius:"6px",overflow:"hidden",maxHeight:e?"calc(100vh - 200px)":"600px",minHeight:e?"500px":"200px",cursor:v?"grabbing":"grab",position:"relative"},children:(0,i.jsx)("div",{ref:e?null:x,style:{display:"inline-block",minWidth:"100%",transform:"translate(".concat(g.x,"px, ").concat(g.y,"px) scale(").concat(u,")"),transformOrigin:"center center",transition:v?"none":"transform 0.1s ease-out",willChange:"transform"},dangerouslySetInnerHTML:e&&f?{__html:f}:void 0})}),(0,i.jsx)("div",{style:{marginTop:"8px",textAlign:"center",color:"#999",fontSize:"12px"},children:"\ud83d\udca1 Drag to pan \u2022 Scroll to zoom \u2022 Click controls for precise zoom"})]})};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:o,style:{position:"absolute",left:"-9999px",top:0}}),(0,i.jsx)(T.A,{title:(0,i.jsxs)(C.A,{children:[(0,i.jsx)(be.A,{}),(0,i.jsx)(_e,{strong:!0,children:"Dependency Visualization"}),(0,i.jsx)(k.A,{color:"blue",children:"Mermaid Diagram"})]}),extra:(0,i.jsxs)(C.A,{children:[s&&(0,i.jsxs)(_e,{type:"secondary",style:{fontSize:"12px"},children:["Generated: ",new Date(s).toLocaleString()]}),(0,i.jsx)(me.A,{title:"View fullscreen",children:(0,i.jsx)(m.Ay,{icon:(0,i.jsx)(je.A,{}),size:"small",onClick:()=>{r?r():c(!0)}})})]}),children:L(!1)}),(0,i.jsx)(xe.A,{title:(0,i.jsxs)(C.A,{children:[(0,i.jsx)(be.A,{}),(0,i.jsx)(_e,{strong:!0,children:"Dependency Visualization (Fullscreen)"}),(0,i.jsx)(k.A,{color:"blue",children:"Mermaid Diagram"})]}),open:l,onCancel:()=>{c(!1),p(1),h({x:0,y:0})},width:"96vw",style:{top:20,maxWidth:"96vw",paddingBottom:0},styles:{body:{height:"calc(100vh - 120px)",overflow:"auto",padding:"16px"}},footer:null,closeIcon:(0,i.jsx)(q.A,{}),destroyOnClose:!1,centered:!1,children:L(!0)})]})};var ke=s(6612);const{Text:Ce}=u.A,Te=e=>{let{metadata:t}=e;if(!t)return null;const{nodeCount:s,edgeCount:r,resourceTypeCounts:n,bottlenecks:o}=t;return(0,i.jsxs)(T.A,{title:"Graph Statistics",style:{marginTop:16},children:[(0,i.jsxs)(se.A,{gutter:[16,16],children:[(0,i.jsx)(re.A,{xs:12,sm:8,md:6,children:(0,i.jsx)(ke.A,{title:"Total Resources",value:s,valueStyle:{color:"#1890ff"},prefix:(0,i.jsx)(be.A,{})})}),(0,i.jsx)(re.A,{xs:12,sm:8,md:6,children:(0,i.jsx)(ke.A,{title:"Dependencies",value:r,valueStyle:{color:"#52c41a"}})}),(0,i.jsx)(re.A,{xs:12,sm:8,md:6,children:(0,i.jsx)(ke.A,{title:"Resource Types",value:Object.keys(n||{}).length,valueStyle:{color:"#faad14"}})}),(0,i.jsx)(re.A,{xs:12,sm:8,md:6,children:(0,i.jsx)(ke.A,{title:"Bottlenecks",value:(null===o||void 0===o?void 0:o.length)||0,valueStyle:{color:(null===o||void 0===o?void 0:o.length)>0?"#ff4d4f":"#52c41a"}})})]}),n&&Object.keys(n).length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{marginTop:24,marginBottom:12},children:(0,i.jsx)(Ce,{strong:!0,children:"Resource Type Distribution"})}),(0,i.jsx)(C.A,{wrap:!0,children:Object.entries(n).map(e=>{let[t,s]=e;return(0,i.jsxs)(k.A,{color:"blue",children:[t,": ",s]},t)})})]})]})};var ze=s(5215);const{Text:Ee}=u.A,Re=e=>{let{bottlenecks:t}=e;if(!t||0===t.length)return null;const s=e=>{switch(e){case"critical":return"#ff4d4f";case"high":return"#faad14";case"medium":return"#1890ff";case"low":return"#52c41a";default:return"#d9d9d9"}};return(0,i.jsx)(T.A,{title:(0,i.jsxs)(C.A,{children:[(0,i.jsx)(ze.A,{style:{color:"#faad14"}}),(0,i.jsx)(Ee,{strong:!0,children:"Performance Bottlenecks Detected"})]}),style:{marginTop:16},children:(0,i.jsx)(C.A,{direction:"vertical",size:"middle",style:{width:"100%"},children:t.map((e,t)=>{return(0,i.jsx)(T.A,{size:"small",style:{borderLeft:"4px solid ".concat(s(e.impact)),backgroundColor:"#fafafa"},children:(0,i.jsxs)(C.A,{direction:"vertical",size:"small",style:{width:"100%"},children:[(0,i.jsxs)(C.A,{children:[(r=e.impact,(0,i.jsx)(ze.A,{style:{color:s(r)}})),(0,i.jsx)(Ee,{strong:!0,style:{fontSize:"14px"},children:e.resourceId}),(0,i.jsx)(k.A,{color:s(e.impact),children:e.impact.toUpperCase()})]}),(0,i.jsx)("div",{style:{paddingLeft:"24px"},children:(0,i.jsxs)(Ee,{type:"secondary",style:{fontSize:"12px"},children:["Type: ",e.resourceType," \u2022 ",e.dependentCount," dependent",1!==e.dependentCount?"s":""]})})]})},t);var r})})})}}}]);
//# sourceMappingURL=7069.5d8a89ba.chunk.js.map