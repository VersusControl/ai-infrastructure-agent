"use strict";(self.webpackChunkweb_ui_react=self.webpackChunkweb_ui_react||[]).push([[1707],{31707:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var s=n(89379),o=n(65043),a=n(42261),r=n(15492),l=n(85520),i=n(16368),c=n(50777),d=n(22019),p=n(6051),u=n(52846),y=n(96464),g=n(76711),E=n(26087),x=n(68397),T=n(94510),m=n(49415),v=n(7250),h=n(63681),S=n(35601),f=n(70579);const{TextArea:A}=c.A,{Text:b,Paragraph:_}=y.A,k=()=>{const{state:e,dispatch:t}=(0,m.nm)(),[n,c]=(0,o.useState)(""),[y,k]=(0,o.useState)(!0),[I,j]=(0,o.useState)(!0),[N,C]=(0,o.useState)(null),[R,P]=(0,o.useState)(!0),[w,O]=(0,o.useState)(!1),[L,U]=(0,o.useState)(null),[H,G]=(0,o.useState)(null),[D,z]=(0,o.useState)(null),[X,B]=(0,o.useState)(250),W=(0,o.useRef)(null),q=(0,o.useRef)(null);(0,o.useEffect)(()=>{const e=()=>{const e=window.innerWidth;if(e<=768)B(0);else{const t=document.querySelector(".ant-layout-sider");if(t){const e=t.classList.contains("ant-layout-sider-collapsed"),n=e?80:250;B(n),console.log("Sidebar state updated:",{isCollapsed:e,siderWidth:n})}else{B(e<=992?80:250)}}};e(),window.addEventListener("resize",e);const t=document.querySelector(".ant-layout-sider"),n=new MutationObserver(t=>{t.forEach(t=>{"attributes"===t.type&&"class"===t.attributeName&&(console.log("Sidebar class changed, updating position..."),e())})});t&&n.observe(t,{attributes:!0,attributeFilter:["class","style"]});const s=setInterval(e,500);return()=>{window.removeEventListener("resize",e),n.disconnect(),clearInterval(s)}},[]),(0,o.useEffect)(()=>{const t=(0,h.js)();if((()=>{if(e.websocket){const t=e.websocket.readyState===WebSocket.OPEN;P(t),t?console.log("\u2705 Backend available (WebSocket connected)"):console.log("\u26a0\ufe0f Backend unavailable (WebSocket not connected)")}else P(!1),console.log("\u26a0\ufe0f Backend unavailable (No WebSocket)")})(),e.websocket){const n=e.websocket,s=()=>{console.log("\u2705 WebSocket opened - Backend available"),P(!0)},o=()=>{console.log("\u26a0\ufe0f WebSocket closed - Backend unavailable"),P(!1)},a=()=>{console.log("\u274c WebSocket error - Backend unavailable"),P(!1)};return n.addEventListener("open",s),n.addEventListener("close",o),n.addEventListener("error",a),()=>{n.removeEventListener("open",s),n.removeEventListener("close",o),n.removeEventListener("error",a),t()}}return()=>{t()}},[e.websocket]);const F=(0,o.useCallback)(()=>{const e=new Date,n=setInterval(()=>{const n=new Date,s=Math.floor((n-e)/1e3),o=Math.floor(s/60),a=s%60,r="".concat(o.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"));t({type:m.TH.SET_AGENT_EXECUTION_ELAPSED,payload:r})},1e3);C(n)},[t]),M=(0,o.useCallback)(()=>{N&&(clearInterval(N),C(null))},[N]),K=(0,o.useCallback)((e,n)=>{t({type:m.TH.UPDATE_STEP_STATUS,payload:{stepId:e,status:n}})},[t]),J=(0,o.useCallback)(()=>{t({type:m.TH.UPDATE_EXECUTION_PROGRESS})},[t]),Y=(0,o.useCallback)(e=>{t({type:m.TH.ADD_AGENT_EXECUTION_LOG,payload:(0,s.A)((0,s.A)({},e),{},{timestamp:new Date})})},[t]),V=(0,o.useCallback)(n=>{console.log("\ud83d\udccb Recovery plan received, replacing current execution plan");const{executionId:s,strategy:o,failureContext:a}=n;if(!o)return d.Ay.error("Backend sent incomplete recovery plan (missing strategy field)"),void O(!1);if(!o.executionPlan)return d.Ay.error("Backend sent incomplete recovery plan (missing execution plan)"),void O(!1);if(0===o.executionPlan.length)return d.Ay.error("Recovery plan has no steps"),void O(!1);H||(console.log("\ud83d\udcbe Storing original plan for cancel button"),G(e.agentExecutionPlan)),U(s),console.log("\ud83d\udcbe Set recoveryExecutionId:",s),z({preservedCount:o.preservedCount||0,newStepsCount:o.newStepsCount||0,totalSteps:o.totalSteps||o.executionPlan.length,recoveryNotes:o.recoveryNotes||"",reasoning:o.reasoning||"",successProbability:o.successProbability||0,riskLevel:o.riskLevel||"unknown",estimatedDuration:o.estimatedDuration||"unknown",attemptNumber:(null===a||void 0===a?void 0:a.attemptNumber)||1});const r=o.preservedCount||0,l=o.newStepsCount||0,i=o.executionPlan.map((e,t)=>{const n=t>=r&&t<r+l;return{id:e.id,name:e.name,action:e.action,resource_type:e.resourceId||e.mcpTool||"recovery",description:e.description,status:e.status||"pending",mcpTool:e.mcpTool,toolParameters:e.toolParameters,parameters:e.parameters,dependsOn:e.dependsOn,estimatedDuration:e.estimatedDuration,riskLevel:e.riskLevel,isRecoveryStep:n}});t({type:m.TH.SET_AGENT_EXECUTION_PLAN,payload:i}),t({type:m.TH.SET_CURRENT_EXECUTION,payload:{status:"pending",executionId:s,isRecovery:!0}}),O(!1);const c=(null===a||void 0===a?void 0:a.attemptNumber)>1?" (Recovery Attempt #".concat(a.attemptNumber,")"):"";d.Ay.info("Recovery plan ready - please review and confirm".concat(c))},[t,e.agentExecutionPlan,H]),Q=(0,o.useCallback)(async()=>{if(console.log("\ud83d\udd35 ========================================"),console.log("\ud83d\udd35 Sending WebSocket approval to backend"),console.log("\ud83d\udd35 ========================================"),L){t({type:m.TH.SET_LOADING,payload:{key:"agent",value:!0}});try{if(t({type:m.TH.SET_AGENT_EXECUTION_LOGS,payload:[]}),t({type:m.TH.SET_AGENT_EXECUTION_PROGRESS,payload:0}),t({type:m.TH.SET_AGENT_EXECUTION_COMPLETED,payload:!1}),e.agentExecutionPlan){const n=e.agentExecutionPlan.map(e=>"completed"===e.status?e:(0,s.A)((0,s.A)({},e),{},{status:"pending"}));t({type:m.TH.SET_AGENT_EXECUTION_PLAN,payload:n})}if(!e.websocket||e.websocket.readyState!==WebSocket.OPEN)throw new Error("WebSocket not connected");e.websocket.send(JSON.stringify({type:"plan_recovery_decision",executionId:L,approved:!0,timestamp:(new Date).toISOString()})),d.Ay.success("Recovery plan confirmed - execution starting..."),setTimeout(()=>{W.current&&W.current.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},200)}catch(n){console.error("\u274c Failed to send recovery approval:",n),d.Ay.error("Failed to send recovery confirmation"),t({type:m.TH.SET_LOADING,payload:{key:"agent",value:!1}})}}else d.Ay.error("No recovery plan to confirm")},[L,e.websocket,e.agentExecutionPlan,t,W]),Z=(0,o.useCallback)(async()=>{if(console.log("\u274c User cancelled recovery - restoring original plan"),L){try{e.websocket&&e.websocket.readyState===WebSocket.OPEN&&e.websocket.send(JSON.stringify({type:"plan_recovery_abort",executionId:L,approved:!1,timestamp:(new Date).toISOString()}))}catch(n){console.error("Failed to send recovery abort:",n)}H&&t({type:m.TH.SET_AGENT_EXECUTION_PLAN,payload:H}),U(null),G(null),t({type:m.TH.UPDATE_EXECUTION_STATUS,payload:"aborted"}),M(),d.Ay.info("Recovery cancelled")}},[L,H,e.websocket,t,M]),$=(0,o.useCallback)(e=>{switch(console.log("\ud83d\udce8 WebSocket message received:",{type:e.type,executionId:e.executionId,hasStrategy:!!e.strategy,hasFailureContext:!!e.failureContext,keys:Object.keys(e)}),e.type){case"processing_started":t({type:m.TH.SET_LOADING,payload:{key:"agent",value:!0}});break;case"processing_completed":e.success?t({type:m.TH.SET_STATUS_MESSAGE,payload:"Processing completed successfully"}):t({type:m.TH.SET_STATUS_MESSAGE,payload:"Processing failed"}),t({type:m.TH.SET_LOADING,payload:{key:"agent",value:!1}});break;case"execution_started":F(),t({type:m.TH.SET_AGENT_EXECUTION_COMPLETED,payload:!1}),t({type:m.TH.SET_AGENT_EXECUTION_PROGRESS,payload:0}),Y({type:"info",message:e.message||"Execution started",stepId:null});break;case"step_started":console.log("\ud83d\udd35 Step started:",{stepId:e.stepId,message:e.message}),K(e.stepId,"running"),Y({type:"info",message:e.message,stepId:e.stepId}),I&&setTimeout(()=>{q.current&&e.stepId&&q.current.scrollToStep(e.stepId)},100);break;case"step_progress":console.log("\ud83d\udd35 Step progress:",{stepId:e.stepId,message:e.message}),Y({type:"info",message:e.message,stepId:e.stepId});break;case"step_completed":console.log("\u2705 Step completed:",{stepId:e.stepId,message:e.message}),K(e.stepId,"completed"),J(),Y({type:"success",message:e.message,stepId:e.stepId}),I&&setTimeout(()=>{q.current&&e.stepId&&q.current.scrollToStep(e.stepId)},100);break;case"step_failed":console.log("\u274c Step failed:",{stepId:e.stepId,message:e.message}),K(e.stepId,"failed"),Y({type:"error",message:e.message,stepId:e.stepId}),I&&setTimeout(()=>{q.current&&e.stepId&&q.current.scrollToStep(e.stepId)},100);break;case"execution_completed":console.log("\u2705 Execution completed successfully"),M(),t({type:m.TH.SET_AGENT_EXECUTION_PROGRESS,payload:100}),t({type:m.TH.SET_AGENT_EXECUTION_COMPLETED,payload:!0}),t({type:m.TH.UPDATE_EXECUTION_STATUS,payload:"completed"}),G(null),U(null),O(!1),z(null),d.Ay.success("Execution completed successfully"),setTimeout(()=>{t({type:m.TH.REFRESH_INFRASTRUCTURE})},1e3);break;case"execution_aborted":console.log("\u274c Execution aborted"),M(),t({type:m.TH.SET_AGENT_EXECUTION_COMPLETED,payload:!0}),t({type:m.TH.UPDATE_EXECUTION_STATUS,payload:"aborted"}),G(null),U(null),O(!1),z(null),d.Ay.error("Execution was aborted");break;case"plan_recovery_analyzing":O(!0),Y({type:"warning",message:e.message||"Plan failed at step ".concat(e.failedStepIndex+1,". AI is analyzing recovery options..."),stepId:e.failedStepId});break;case"plan_recovery_request":V(e);break;case"plan_recovery_executing":console.log("\u2705 Backend started executing recovery plan"),console.log("\ud83d\udccb Recovery execution data:",{executionId:e.executionId,action:e.action,totalSteps:e.totalSteps}),O(!1),t({type:m.TH.SET_LOADING,payload:{key:"agent",value:!1}}),F(),t({type:m.TH.SET_CURRENT_EXECUTION,payload:{status:"running",executionId:e.executionId,isRecovery:!0}}),t({type:m.TH.SET_AGENT_EXECUTION_COMPLETED,payload:!1}),U(null),d.Ay.success("Executing recovery plan..."),Y({type:"info",message:"Recovery plan execution started: ".concat(e.action||"Executing recovery steps"),stepId:null});break;case"plan_recovery_completed":console.log("\u2705 Recovery completed successfully"),O(!1),d.Ay.success("Recovery completed - continuing execution");break;case"plan_recovery_failed":console.error("\u274c Recovery failed"),O(!1),M(),t({type:m.TH.UPDATE_EXECUTION_STATUS,payload:"failed"}),U(null),d.Ay.error("Recovery failed")}},[t,F,M,K,J,Y,V,I,q]);(0,o.useEffect)(()=>{const{websocket:t}=e;if(!t)return;const n=e=>{try{const t=JSON.parse(e.data);$(t)}catch(t){console.error("AIAgentPage: Failed to parse WebSocket message:",t)}};return t.addEventListener("message",n),()=>{t.removeEventListener("message",n)}},[e.websocket,$]),(0,o.useEffect)(()=>()=>{N&&clearInterval(N)},[N]);const ee=async()=>{if(n.trim())if(R){console.log("\ud83c\udd95 New request submitted - resetting ALL state"),t({type:m.TH.CLEAR_AGENT_RESPONSE}),M(),G(null),U(null),O(!1),z(null),t({type:m.TH.SET_LOADING,payload:{key:"agent",value:!0}});try{const e=await v.A.processAgentRequest(n,y);t({type:m.TH.SET_AGENT_RESPONSE,payload:e}),e.executionPlan&&e.executionPlan.length>0&&t({type:m.TH.SET_AGENT_EXECUTION_PLAN,payload:e.executionPlan}),t({type:m.TH.SET_STATUS_MESSAGE,payload:"AI processed successfully"}),c(""),P(!0)}catch(e){console.error("Agent request failed:",e),t({type:m.TH.CLEAR_AGENT_RESPONSE});let n="Failed to process request",s=!1;500===e.status?n="Server error occurred. Please try again or check with your administrator.":400===e.status?n=e.message||"Invalid request. Please check your input and try again.":401===e.status?n="Authentication required. Please log in and try again.":403===e.status?n="You do not have permission to perform this action.":404===e.status?n="Service not found. Please check your configuration.":429===e.status?n="Too many requests. Please wait a moment and try again.":e.message&&"Failed to fetch"!==e.message?n=e.message:"Failed to fetch"===e.message&&(s=!0,n="Unable to connect to backend server. The server may not be running.",P(!1)),s?d.Ay.error({content:(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{style:{fontWeight:600,marginBottom:4},children:"Connection Failed"}),(0,f.jsx)("div",{style:{fontSize:13},children:n}),(0,f.jsx)("div",{style:{fontSize:12,marginTop:8,color:"#666"},children:"Make sure the backend server is running on port 8080 and try again."})]}),duration:6}):d.Ay.error(n),t({type:m.TH.SET_STATUS_MESSAGE,payload:"Error: ".concat(n)})}finally{t({type:m.TH.SET_LOADING,payload:{key:"agent",value:!1}})}}else d.Ay.error({content:(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{style:{fontWeight:600,marginBottom:4},children:"Backend Server Not Available"}),(0,f.jsx)("div",{style:{fontSize:13},children:"The backend server (http://localhost:8080) is not responding."}),(0,f.jsx)("div",{style:{fontSize:12,marginTop:8,color:"#666"},children:"Please ensure the backend server is running and try again."})]}),duration:6});else d.Ay.warning("Please enter a request")},te=async()=>{var n,o;if(console.log("\ud83d\udfe2 ========================================"),console.log("\ud83d\udfe2 ORIGINAL PLAN CONFIRMATION"),console.log('\ud83d\udfe2 User clicked "Confirm & Execute" on ORIGINAL plan'),console.log("\ud83d\udfe2 This WILL call API: /agent/execute-with-plan-recovery"),console.log("\ud83d\udfe2 ========================================"),null!==(n=e.agentResponse)&&void 0!==n&&null!==(o=n.decision)&&void 0!==o&&o.id){t({type:m.TH.SET_LOADING,payload:{key:"agent",value:!0}});try{var a,r;if(t({type:m.TH.SET_AGENT_EXECUTION_LOGS,payload:[]}),t({type:m.TH.SET_AGENT_EXECUTION_PROGRESS,payload:0}),t({type:m.TH.SET_AGENT_EXECUTION_COMPLETED,payload:!1}),M(),e.agentExecutionPlan){const n=e.agentExecutionPlan.map(e=>(0,s.A)((0,s.A)({},e),{},{status:"pending"}));t({type:m.TH.SET_AGENT_EXECUTION_PLAN,payload:n})}const n=null!==(a=null===(r=e.agentResponse)||void 0===r?void 0:r.dry_run)&&void 0!==a?a:y;await v.A.executeConfirmedPlan(e.agentResponse.decision.id,n),t({type:m.TH.SET_CURRENT_EXECUTION,payload:{status:"running",decisionId:e.agentResponse.decision.id}}),n?d.Ay.success("Dry run execution started"):d.Ay.success("Execution started"),setTimeout(()=>{W.current&&W.current.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},200)}catch(l){console.error("Execution start failed:",l);let e="Failed to start execution";500===l.status?e="Server error occurred while starting execution. Please try again.":400===l.status?e=l.message||"Invalid execution request. Please regenerate the plan and try again.":404===l.status?e="Execution plan not found. Please regenerate the plan and try again.":409===l.status?e="Another execution is already in progress. Please wait for it to complete.":l.message&&"Failed to fetch"!==l.message?e=l.message:"Failed to fetch"===l.message&&(e="Unable to connect to server. Please check your connection and try again."),d.Ay.error(e),t({type:m.TH.SET_STATUS_MESSAGE,payload:"Error: ".concat(e)})}finally{t({type:m.TH.SET_LOADING,payload:{key:"agent",value:!1}})}}else d.Ay.error("No execution plan to confirm")},ne=()=>{t({type:m.TH.CLEAR_AGENT_RESPONSE}),M(),d.Ay.info("Plan cancelled")},se=e=>{(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&ee()},oe=()=>{var t,n,s,o;const r=Array.isArray(e.agentExecutionLogs)?e.agentExecutionLogs:[],i=!!L||(null===(t=e.currentExecution)||void 0===t?void 0:t.isRecovery);console.log("\ud83d\udd0d renderExecutionPlan check:",{recoveryExecutionId:L,currentExecutionIsRecovery:null===(n=e.currentExecution)||void 0===n?void 0:n.isRecovery,isRecoveryPlan:i,currentExecutionStatus:null===(s=e.currentExecution)||void 0===s?void 0:s.status});const c=i?"Recovery Plan":y?"Execution Plan (Dry Run)":"Execution Plan",d=i?"Confirm Recovery":y?"Confirm & Execute (Dry Run)":"Confirm & Execute",u="running"===(null===(o=e.currentExecution)||void 0===o?void 0:o.status);return(0,f.jsxs)("div",{ref:W,style:{scrollMarginTop:"100px"},children:[i&&D&&(0,f.jsx)(l.A,{style:{marginTop:16,marginBottom:8,background:"#fff7e6",border:"1px solid #ffa940"},children:(0,f.jsxs)(p.A,{direction:"vertical",size:"small",style:{width:"100%"},children:[(0,f.jsx)("div",{style:{display:"flex",alignItems:"center",gap:8},children:(0,f.jsx)("span",{style:{fontSize:16,fontWeight:600},children:"\ud83d\udd27 Recovery Strategy"})}),D.reasoning&&(0,f.jsx)(b,{style:{fontSize:13,color:"#595959"},children:D.reasoning}),(0,f.jsxs)("div",{style:{display:"flex",gap:16,flexWrap:"wrap",marginTop:8,padding:"8px 12px",background:"#fff",borderRadius:4,border:"1px solid #ffd591"},children:[(0,f.jsxs)(b,{style:{fontSize:12},children:[(0,f.jsx)("strong",{children:"Completed:"})," ",D.preservedCount," steps \u2713"]}),(0,f.jsxs)(b,{style:{fontSize:12},children:[(0,f.jsx)("strong",{children:"Recovery:"})," ",D.newStepsCount," new steps \ud83d\udd27"]}),(0,f.jsxs)(b,{style:{fontSize:12},children:[(0,f.jsx)("strong",{children:"Total:"})," ",D.totalSteps," steps"]}),(0,f.jsxs)(b,{style:{fontSize:12},children:[(0,f.jsx)("strong",{children:"Success:"})," ",Math.round(100*(D.successProbability||0)),"%"]}),(0,f.jsxs)(b,{style:{fontSize:12},children:[(0,f.jsx)("strong",{children:"Risk:"})," ",D.riskLevel]}),(0,f.jsxs)(b,{style:{fontSize:12},children:[(0,f.jsx)("strong",{children:"Duration:"})," ~",D.estimatedDuration]})]}),D.recoveryNotes&&(0,f.jsx)(a.A,{message:D.recoveryNotes,type:"info",showIcon:!0,style:{marginTop:8,fontSize:12}})]})}),(0,f.jsx)(S.wW,{ref:q,steps:e.agentExecutionPlan,logs:r,isExecuting:u,executionProgress:e.agentExecutionProgress,executionElapsed:e.agentExecutionElapsed,executionCompleted:e.agentExecutionCompleted,onConfirm:i?Q:te,onCancel:i?Z:ne,showConfirmButton:!0,showCancelButton:!0,confirmButtonText:d,title:c,isRecoveryAnalyzing:w})]})},ae=e.agentResponse||e.loading.agent;return(0,f.jsxs)("div",{style:{maxWidth:1200,margin:"0 auto",paddingBottom:ae?110:0},children:[!ae&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(S.zY,{title:"Enter Your Prompt",description:"Describe what you want to do with your infrastructure in natural language. We currently support single-prompt execution, with multi-turn conversations coming soon in the new version (AI Chatbot)."}),!R&&(0,f.jsx)(a.A,{message:"Backend Server Not Available",description:(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{style:{marginBottom:8},children:"The backend server (http://localhost:8080) is not responding. Please start the backend server to use this application."}),(0,f.jsxs)("div",{style:{fontSize:12,color:"#666"},children:[(0,f.jsx)("strong",{children:"To start the backend:"}),(0,f.jsxs)("ol",{style:{marginTop:8,marginBottom:8,paddingLeft:20},children:[(0,f.jsx)("li",{children:"Navigate to your backend project directory"}),(0,f.jsxs)("li",{children:["Run: ",(0,f.jsx)("code",{style:{background:"#f5f5f5",padding:"2px 6px"},children:"go run cmd/server/main.go"})]}),(0,f.jsx)("li",{children:'Wait for "Server starting on :8080" message'}),(0,f.jsx)("li",{children:"The connection will automatically reconnect"})]})]})]}),type:"warning",showIcon:!0,icon:(0,f.jsx)(g.A,{}),style:{marginBottom:16}}),(0,f.jsx)(l.A,{children:(0,f.jsxs)(p.A,{direction:"vertical",size:"large",style:{width:"100%"},children:[(0,f.jsx)(A,{placeholder:"Example: Create an EC2 for hosting an Apache Server with a dedicated security group that allows inbound HTTP (port 80) and SSH (port 22) traffic.",value:n,onChange:e=>c(e.target.value),onKeyDown:se,rows:6,style:{fontSize:16},autoFocus:!0}),(0,f.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,f.jsxs)(p.A,{direction:"horizontal",size:"large",children:[(0,f.jsx)(i.A,{checked:y,onChange:e=>k(e.target.checked),children:"Dry Run Mode"}),(0,f.jsx)(i.A,{checked:I,onChange:e=>j(e.target.checked),children:"Auto-scroll to steps"})]}),(0,f.jsx)(u.A,{title:R?n.trim()?"Click to process your request":"Please enter a request":"Backend server is not available. Please start it first.",children:(0,f.jsx)(r.Ay,{type:"primary",size:"large",icon:(0,f.jsx)(x.A,{}),onClick:ee,disabled:!n.trim()||!R,danger:!R,children:"Process Request"})})]}),(0,f.jsx)("div",{style:{fontSize:12,color:"#666"},children:"Tip: Press Ctrl+Enter (Cmd+Enter on Mac) to quickly process your request"})]})})]}),ae&&(0,f.jsxs)(f.Fragment,{children:[!R&&(0,f.jsx)(a.A,{message:"Backend Server Not Available",description:"Please start the backend server (http://localhost:8080) to continue.",type:"warning",showIcon:!0,icon:(0,f.jsx)(g.A,{}),style:{marginBottom:16},closable:!0}),e.loading.agent&&n&&!e.agentResponse?(0,f.jsx)(S.RD,{type:"thinking",style:{marginTop:16}}):e.agentResponse?(0,f.jsx)(l.A,{title:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(E.A,{})," AI Agent Response"]}),children:(0,f.jsxs)(p.A,{direction:"vertical",size:"middle",style:{width:"100%"},children:[(0,f.jsx)(a.A,{message:"Request Processed",description:(0,f.jsxs)("div",{children:[(0,f.jsxs)(_,{children:[(0,f.jsx)("strong",{children:"Request:"})," ",e.agentResponse.request]}),(0,f.jsxs)(_,{children:[(0,f.jsx)("strong",{children:"Mode:"})," ","demo"===e.agentResponse.mode?"Demo Mode":e.agentResponse.dry_run?"Dry Run":"Live Execution"]}),(0,f.jsxs)(_,{children:[(0,f.jsx)("strong",{children:"Confidence:"})," ",(100*e.agentResponse.confidence).toFixed(1),"%"]})]}),type:"info",showIcon:!0}),"demo"===e.agentResponse.mode&&(0,f.jsx)(l.A,{size:"small",title:"Response",children:(0,f.jsx)(b,{children:e.agentResponse.response})}),"live"===e.agentResponse.mode&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(l.A,{size:"small",title:"Action",children:(0,f.jsx)(b,{children:e.agentResponse.action})}),(0,f.jsx)(l.A,{size:"small",title:"Reasoning",children:(0,f.jsx)("div",{className:"reasoning-content",children:(0,f.jsx)(T.oz,{children:e.agentResponse.reasoning})})})]}),e.agentExecutionPlan&&oe()]})}):null,(0,f.jsx)("div",{style:{position:"fixed",bottom:55,left:X,right:0,background:"linear-gradient(to top, #f0f2f5 0%, #f0f2f5 70%, rgba(240,242,245,0) 100%)",paddingTop:32,paddingBottom:16,zIndex:998,transition:"left 0.2s"},children:(0,f.jsx)("div",{style:{maxWidth:1200,margin:"0 auto",padding:"0 24px"},children:(0,f.jsxs)("div",{style:{background:"#ffffff",border:"1px solid #d9d9d9",borderRadius:24,padding:"10px 14px",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.12)",transition:"all 0.3s ease"},children:[(0,f.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"flex-end"},children:[(0,f.jsx)("div",{style:{flex:1},children:(0,f.jsx)(A,{placeholder:"Ask a follow-up...",value:n,onChange:e=>c(e.target.value),onKeyDown:se,autoSize:{minRows:1,maxRows:6},style:{fontSize:15,border:"none",background:"transparent",resize:"none",padding:"4px 0"},bordered:!1})}),(0,f.jsx)(u.A,{title:R?n.trim()?e.loading.agent?"Processing your request...":"Send message":"Please enter a request":"Backend server is not available",children:(0,f.jsx)(r.Ay,{type:"primary",shape:"circle",icon:(0,f.jsx)(x.A,{}),onClick:ee,disabled:!n.trim()||!R||e.loading.agent,size:"large",style:{width:40,height:40,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0}})})]}),(0,f.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:8,paddingTop:8,borderTop:"1px solid #f0f0f0"},children:[(0,f.jsxs)(p.A,{size:"middle",children:[(0,f.jsx)(i.A,{checked:y,onChange:e=>k(e.target.checked),style:{fontSize:12},children:(0,f.jsx)("span",{style:{color:"#666"},children:"Dry Run"})}),(0,f.jsx)(i.A,{checked:I,onChange:e=>j(e.target.checked),style:{fontSize:12},children:(0,f.jsx)("span",{style:{color:"#666"},children:"Auto-scroll"})})]}),(0,f.jsx)("span",{style:{fontSize:11,color:"#999"},children:"\u2318 + \u21b5 to send"})]})]})})})]})]})}}}]);
//# sourceMappingURL=1707.c54b1718.chunk.js.map