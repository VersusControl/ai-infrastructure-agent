"use strict";(self.webpackChunkweb_ui_react=self.webpackChunkweb_ui_react||[]).push([[1775],{1894:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(9379);const n=new class{constructor(){this.baseURL="http://localhost:8080/api",this.baseURL=this.baseURL.replace(/\/$/,""),console.log("ApiService initialized with baseURL:",this.baseURL)}async call(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="".concat(this.baseURL).concat(e),n=(0,s.A)({headers:(0,s.A)({"Content-Type":"application/json"},t.headers)},t);try{const e=await fetch(r,n);if(!e.ok){let t="HTTP ".concat(e.status,": ").concat(e.statusText),r=null;try{const s=await e.text();if(s)try{const e=JSON.parse(s);e.error?t=e.error:e.message?t=e.message:e.detail&&(t=e.detail),r=e}catch(o){s.length<200&&(t=s)}}catch(i){console.warn("Could not read error response body:",i)}const s=new Error(t);throw s.status=e.status,s.statusText=e.statusText,s.details=r,s}const t=await e.text();if(!t)throw new Error("Empty response from server");try{return JSON.parse(t)}catch(o){throw console.error("JSON parse error:",o),console.error("Response text:",t),new Error("Invalid JSON response: ".concat(o.message))}}catch(a){if(console.error("API call failed for ".concat(e,":"),a),"TypeError"===a.name&&"Failed to fetch"===a.message){const e=new Error("Unable to connect to server. Please check your internet connection and try again.");throw e.originalError=a,e.isNetworkError=!0,e}if("AbortError"===a.name){const e=new Error("Request timed out. Please try again.");throw e.originalError=a,e.isTimeoutError=!0,e}throw a}}async processAgentRequest(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.call("/agent/process",{method:"POST",body:JSON.stringify({request:e,dry_run:t})})}async executeConfirmedPlan(e){return this.call("/agent/execute",{method:"POST",body:JSON.stringify({decisionId:e})})}async getInfrastructureState(){const e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"?discovered_only=true":"";return this.call("/state".concat(e))}async discoverInfrastructure(){return this.call("/discover",{method:"POST"})}async exportState(){const e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"?include_discovered=true":"",t=await fetch("".concat(this.baseURL,"/export").concat(e));if(!t.ok)throw new Error("Export failed: ".concat(t.statusText));return t.blob()}async getDependencyGraph(){return this.call("/graph")}async detectConflicts(){const e=new URLSearchParams({auto_resolve:(arguments.length>0&&void 0!==arguments[0]&&arguments[0]).toString()});return this.call("/conflicts?".concat(e))}async generateDeploymentPlan(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=new URLSearchParams;return e.length>0&&e.forEach(e=>{r.append("target_resources",e)}),r.set("include_levels",t.toString()),this.call("/plan?".concat(r))}downloadFile(e,t){const r=window.URL.createObjectURL(e),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r)}getCurrentTimestamp(){return(new Date).toISOString().split("T")[0]}getBaseURL(){return this.baseURL}getConfig(){return{baseURL:this.baseURL,wsURL:"ws://localhost:8080/ws",environment:"production"}}}},9466:(e,t,r)=>{r.d(t,{$:()=>Ce,wW:()=>O,a6:()=>we,ds:()=>Ae,zY:()=>x,Rt:()=>re,l3:()=>ce,RD:()=>l});var s=r(9379),n=r(3986),o=r(2261),i=r(579);const a=["message","type","showIcon","closable","style"],l=e=>{let{message:t,type:r="auto",showIcon:l=!0,closable:c=!1,style:d={}}=e,u=(0,n.A)(e,a);const p=(()=>{if("auto"!==r)return r;const e=t.toLowerCase();return e.includes("error")||e.includes("failed")||e.includes("fail")?"error":e.includes("warning")||e.includes("warn")?"warning":e.includes("success")||e.includes("completed")||e.includes("processed")?"success":"ready"===e?"info":"success"})(),x="string"===typeof t&&t.startsWith("Error: ")?t.substring(7):t;return(0,i.jsx)(o.A,(0,s.A)({message:x,type:p,showIcon:l,closable:c,style:(0,s.A)({borderRadius:6,fontSize:14,marginBottom:16},d)},u))};var c=r(5043),d=r(6464);const{Title:u,Paragraph:p}=d.A,x=e=>{let{title:t,description:r,level:n=2,extra:o=null,style:a={}}=e;return(0,i.jsxs)("div",{style:(0,s.A)({marginBottom:24},a),children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:8},children:[(0,i.jsx)(u,{level:n,style:{margin:0},children:t}),o&&(0,i.jsx)("div",{children:o})]}),r&&(0,i.jsx)(p,{type:"secondary",style:{margin:0,fontSize:"1rem"},children:r})]})};var g=r(5492),m=r(1219),h=r(5615),y=r(7319),f=r(5229),v=r(7514),A=r(7914),j=r(4811);const b=["step","index","logs","className"],w=e=>{let{step:t,index:r,logs:o=[],className:a=""}=e,l=(0,n.A)(e,b);const[d,u]=(0,c.useState)(!1),[p,x]=(0,c.useState)(!1),w=t.status||"pending";(0,c.useEffect)(()=>{("failed"===w||w.includes("recovery")||"running"===w&&o.length>0)&&u(!0)},[w,o.length]);const S=t.name||t.description||t.action||"Step ".concat(r+1),_=t.details||t.description||"Executing infrastructure operation...";return(0,i.jsxs)("div",(0,s.A)((0,s.A)({className:"execution-step ".concat(a),"data-step-status":w},l),{},{children:[(0,i.jsxs)("div",{className:"execution-step-header",children:[(0,i.jsx)("div",{className:(C=w,"execution-step-number ".concat(C)),children:(0,i.jsx)("div",{className:"step-number-content",children:(0,i.jsx)("span",{className:"step-number-text",children:r+1})})}),(0,i.jsxs)("div",{className:"execution-step-content",children:[(0,i.jsx)("div",{className:"execution-step-title",children:S}),(0,i.jsx)("div",{className:"execution-step-description",children:_}),(0,i.jsxs)("div",{className:"execution-step-meta",children:[(0,i.jsxs)("span",{className:"step-duration",children:["Duration: ",t.duration||"Estimating..."]}),(0,i.jsxs)("span",{className:"step-dependencies",children:["Status: ",w]}),t.dependencies&&(0,i.jsxs)("span",{className:"step-dependencies",children:["Dependencies: ",t.dependencies]})]}),(t.id||t.mcpTool||t.toolParameters||t.parameters)&&(0,i.jsxs)("div",{style:{marginTop:"12px"},children:[(0,i.jsxs)(g.Ay,{type:"text",size:"small",icon:(0,i.jsx)(v.A,{}),onClick:()=>x(!p),style:{padding:"4px 8px",height:"auto",fontSize:"12px",color:"#1890ff"},children:[p?"Hide":"Show"," Step Details"]}),p&&(0,i.jsxs)("div",{style:{marginTop:"8px",padding:"12px",background:"#f6f8fa",borderRadius:"6px",border:"1px solid #e1e4e8",fontSize:"13px",overflow:"auto",maxHeight:"300px"},children:[t.id&&(0,i.jsxs)("div",{style:{marginBottom:t.mcpTool||t.toolParameters||t.parameters?"12px":"0",paddingBottom:t.mcpTool||t.toolParameters||t.parameters?"12px":"0",borderBottom:t.mcpTool||t.toolParameters||t.parameters?"1px solid #e1e4e8":"none"},children:[(0,i.jsx)("div",{style:{fontWeight:"600",color:"#24292e",marginBottom:"4px"},children:"Step ID"}),(0,i.jsx)("div",{style:{fontFamily:'Monaco, Menlo, "Ubuntu Mono", monospace',color:"#0366d6",fontSize:"12px"},children:t.id})]}),t.mcpTool&&(0,i.jsxs)("div",{style:{marginBottom:t.toolParameters||t.parameters?"12px":"0",paddingBottom:t.toolParameters||t.parameters?"12px":"0",borderBottom:t.toolParameters||t.parameters?"1px solid #e1e4e8":"none"},children:[(0,i.jsx)("div",{style:{fontWeight:"600",color:"#24292e",marginBottom:"4px"},children:"MCP Tool"}),(0,i.jsx)("div",{style:{fontFamily:'Monaco, Menlo, "Ubuntu Mono", monospace',color:"#0366d6",fontSize:"12px"},children:t.mcpTool})]}),(t.toolParameters||t.parameters)&&(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontWeight:"600",color:"#24292e",marginBottom:"8px"},children:"Parameters"}),(0,i.jsx)("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:'Monaco, Menlo, "Ubuntu Mono", monospace',fontSize:"12px",color:"#24292e"},children:JSON.stringify(t.toolParameters||t.parameters,null,2)})]})]})]})]}),(0,i.jsx)("div",{className:"step-status-icon-container",children:(e=>{switch(e){case"completed":return(0,i.jsx)(m.A,{style:{color:"white",fontSize:"12px"}});case"failed":return(0,i.jsx)(h.A,{style:{color:"white",fontSize:"12px"}});case"running":case"recovery-generating":case"recovery-in-progress":return(0,i.jsx)(y.A,{spin:!0,style:{color:"white",fontSize:"12px"}});case"recovery-pending":return(0,i.jsx)(f.A,{style:{color:"#212529",fontSize:"12px"}});default:return(0,i.jsx)(f.A,{style:{color:"#6c757d",fontSize:"12px"}})}})(w)}),(o.length>0||["running","completed","failed"].includes(w))&&(0,i.jsx)(g.Ay,{type:"text",size:"small",icon:d?(0,i.jsx)(A.A,{}):(0,i.jsx)(j.A,{}),onClick:()=>u(!d),className:"expand-logs-button"})]}),d&&(0,i.jsx)("div",{className:"execution-step-logs",children:(0,i.jsx)("div",{className:"logs-content",children:o.length>0?o.map((e,t)=>{var r,s;return(0,i.jsxs)("div",{className:"step-log-entry level-".concat(e.type),children:[(0,i.jsx)("span",{className:"timestamp",children:(null===(r=e.timestamp)||void 0===r?void 0:r.toLocaleTimeString())||(new Date).toLocaleTimeString()}),(0,i.jsxs)("span",{className:"level",children:["[",(null===(s=e.type)||void 0===s?void 0:s.toUpperCase())||"INFO","]"]}),(0,i.jsx)("span",{className:"message",children:e.message})]},t)}):(0,i.jsx)("div",{className:"no-logs",children:"No logs available for this step"})})})]}));var C};var S=r(7692),_=r(6399),C=r(6051),k=r(5520),z=r(6087),T=r(5870),R=r(4763),N=r(1837);const{Text:P,Paragraph:E}=d.A,L=e=>{let{option:t,index:r,isSelected:s,onSelect:n}=e;const[o,a]=(0,c.useState)(!1),l=Math.round(100*(t.successProbability||0)),d=(t.riskLevel||"medium").toLowerCase(),u="multi_step_recovery"===t.action&&t.multiStepPlan&&t.multiStepPlan.length>0;return(0,i.jsxs)(k.A,{size:"small",className:"recovery-option ".concat(s?"selected":""),onClick:n,style:{cursor:"pointer",border:s?"2px solid #1890ff":"1px solid #d9d9d9",backgroundColor:s?"#f0f7ff":"#fff"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[(0,i.jsxs)(P,{strong:!0,children:[t.action,u&&(0,i.jsxs)(_.A,{size:"small",color:"blue",style:{marginLeft:"8px"},children:[t.totalSteps||t.multiStepPlan.length," steps"]})]}),(0,i.jsxs)(C.A,{size:"small",children:[(0,i.jsxs)(_.A,{color:"blue",children:[l,"% Success"]}),(0,i.jsxs)(_.A,{color:(e=>{switch(e){case"low":return"green";case"high":return"red";default:return"orange"}})(d),children:[t.riskLevel||"Medium"," Risk"]})]})]}),(0,i.jsx)(E,{style:{marginBottom:u||t.details?"8px":"0",color:"#666"},children:t.reasoning||"No reasoning provided"}),!u&&(t.newTool||t.modifiedParameters)&&(0,i.jsxs)("div",{style:{fontSize:"12px",color:"#888",marginBottom:"8px"},children:[t.newTool&&"New Tool: ".concat(t.newTool),t.newTool&&t.modifiedParameters&&" | ",t.modifiedParameters&&"Parameters: ".concat(JSON.stringify(t.modifiedParameters))]}),t.details&&!u&&(0,i.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:t.details}),u&&(0,i.jsxs)("div",{style:{marginTop:"8px"},children:[(0,i.jsxs)(g.Ay,{type:"text",size:"small",icon:o?(0,i.jsx)(A.A,{}):(0,i.jsx)(j.A,{}),onClick:e=>{e.stopPropagation(),a(!o)},style:{padding:"0",height:"auto",fontSize:"12px"},children:[o?"Hide":"Show"," Multi-Step Plan (",t.totalSteps||t.multiStepPlan.length," steps)"]}),o&&(0,i.jsx)("div",{style:{marginTop:"8px",paddingLeft:"16px",borderLeft:"2px solid #f0f0f0"},children:t.multiStepPlan.map((e,t)=>(0,i.jsx)("div",{style:{marginBottom:"8px",fontSize:"12px"},children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px"},children:[(0,i.jsx)("div",{style:{minWidth:"16px",height:"16px",borderRadius:"50%",backgroundColor:"#1890ff",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",marginTop:"2px"},children:e.stepOrder||t+1}),(0,i.jsxs)("div",{style:{flex:1},children:[(0,i.jsx)("div",{style:{fontWeight:"bold"},children:e.toolName}),(0,i.jsx)("div",{style:{color:"#666"},children:e.purpose}),e.parameters&&Object.keys(e.parameters).length>0&&(0,i.jsxs)("div",{style:{color:"#888",marginTop:"2px"},children:["Parameters: ",JSON.stringify(e.parameters,null,2)]})]})]})},t))})]})]})},B=e=>{let{stepId:t,recoveryData:r,onProceedWithRecovery:s,onAbortRecovery:n}=e;const[o,a]=(0,c.useState)(null);if(!r)return null;if(r.inProgress)return(0,i.jsxs)(k.A,{size:"small",className:"inline-recovery-card recovery-in-progress",style:{borderLeft:"4px solid #17a2b8",backgroundColor:"#f8f9fa"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,i.jsx)(y.A,{spin:!0,style:{color:"#17a2b8"}}),(0,i.jsx)(P,{strong:!0,children:"Executing Recovery..."}),"skip"===r.selectedOption?(0,i.jsx)(P,{type:"secondary",children:"Skipping step"}):(0,i.jsxs)(P,{type:"secondary",children:["Option ",parseInt(r.selectedOption)+1]})]}),r.progressMessage&&(0,i.jsx)("div",{style:{marginTop:"8px"},children:(0,i.jsx)(P,{type:"secondary",children:r.progressMessage})})]});if(!r.visible)return null;const{failureContext:l,recoveryOptions:d}=r,u=e=>{a(e)};return(0,i.jsxs)(k.A,{size:"small",className:"inline-recovery-card",style:{borderLeft:"4px solid #ffc107",backgroundColor:"#fffef0",marginTop:"8px"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[(0,i.jsx)(T.A,{style:{color:"#ffc107",fontSize:"16px"}}),(0,i.jsx)(P,{strong:!0,style:{color:"#856404"},children:"Step Failed - Recovery Options Available"})]}),(0,i.jsxs)("div",{style:{marginBottom:"12px",padding:"8px",backgroundColor:"#f8d7da",borderRadius:"4px"},children:[(0,i.jsx)(P,{strong:!0,children:"Error: "}),(0,i.jsx)(P,{children:(null===l||void 0===l?void 0:l.errorMessage)||"Unknown error"}),(0,i.jsx)("br",{}),(0,i.jsx)(P,{strong:!0,children:"Step: "}),(0,i.jsx)(P,{children:(null===l||void 0===l?void 0:l.stepName)||"Unknown"}),(null===l||void 0===l?void 0:l.toolName)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{children:" | "}),(0,i.jsx)(P,{strong:!0,children:"Tool: "}),(0,i.jsx)(P,{children:l.toolName})]})]}),(null===l||void 0===l?void 0:l.aiAnalysis)&&(0,i.jsxs)("div",{style:{marginBottom:"12px",padding:"8px",backgroundColor:"#d1ecf1",borderRadius:"4px"},children:[(0,i.jsxs)("div",{style:{marginBottom:"4px"},children:[(0,i.jsx)(P,{strong:!0,children:"Root Cause: "}),(0,i.jsx)(P,{children:l.aiAnalysis.rootCause||"Not available"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(P,{strong:!0,children:"Recommendation: "}),(0,i.jsx)(P,{children:l.aiAnalysis.recommendation||"Not available"})]})]}),(0,i.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,i.jsx)(P,{strong:!0,style:{marginBottom:"8px",display:"block"},children:"Choose Recovery Action:"}),(0,i.jsxs)(C.A,{direction:"vertical",size:"small",style:{width:"100%"},children:[d&&d.map((e,t)=>(0,i.jsx)(L,{option:e,index:t,isSelected:o===t,onSelect:()=>u(t)},t)),(0,i.jsx)(L,{option:{action:"Skip This Step",reasoning:"Skip this step and continue with the next step in the plan.",riskLevel:"medium",successProbability:.7,details:"Note: May affect steps that depend on this step's output."},index:"skip",isSelected:"skip"===o,onSelect:()=>u("skip")})]})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[(0,i.jsx)(g.Ay,{type:"default",danger:!0,icon:(0,i.jsx)(R.A,{}),onClick:()=>{n&&n(t)},children:"Abort Execution"}),(0,i.jsx)(g.Ay,{type:"primary",icon:(0,i.jsx)(N.A,{}),disabled:null===o,onClick:()=>{null!==o&&s&&s(t,o)},children:"Proceed with Selected Option"})]})]})},D=["steps","logs","recoveryOptions","isExecuting","executionProgress","executionElapsed","executionCompleted","onConfirm","onCancel","onProceedWithRecovery","onAbortRecovery","showConfirmButton","showCancelButton","confirmButtonText","children","title","icon","className"],{Text:I}=d.A,O=e=>{let{steps:t=[],logs:r=[],recoveryOptions:o={},isExecuting:a=!1,executionProgress:l=0,executionElapsed:d="00:00",executionCompleted:u=!1,onConfirm:p=null,onCancel:x=null,onProceedWithRecovery:y=null,onAbortRecovery:f=null,showConfirmButton:v=!0,showCancelButton:A=!0,confirmButtonText:j="Confirm & Execute",children:b=null,title:T="Execution Plan",icon:R=(0,i.jsx)(z.A,{}),className:N=""}=e,P=(0,n.A)(e,D);const E=(0,s.A)({marginTop:16},u&&{borderColor:"#28a745",boxShadow:"0 4px 12px rgba(40, 167, 69, 0.15)"});return(0,i.jsx)("div",{className:"execution-plan-container ".concat(N," ").concat(u?"execution-success":""),children:(0,i.jsx)(k.A,(0,s.A)((0,s.A)({title:(0,i.jsxs)(i.Fragment,{children:[R," ",T]}),style:E},P),{},{children:(0,i.jsxs)(C.A,{direction:"vertical",size:"large",style:{width:"100%"},children:[(()=>{if(!a&&!u)return null;const e=u?{background:"#d4edda",border:"1px solid #28a745",boxShadow:"0 0 8px rgba(40, 167, 69, 0.3)"}:{background:"#f8f9fa",border:"1px solid #dee2e6"};return(0,i.jsxs)("div",{style:(0,s.A)({padding:"16px",borderRadius:"8px"},e),children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[(0,i.jsx)(I,{strong:!0,className:u?"status-success":"status-running",children:u?"Execution Completed Successfully":"Execution in Progress"}),(0,i.jsx)(I,{type:"secondary",style:{fontFamily:"monospace"},children:d})]}),(0,i.jsx)(S.A,{percent:l,status:u?"success":"active",strokeColor:u?"#28a745":"#007bff",trailColor:"#e9ecef"})]})})(),(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:t.map((e,t)=>{return(0,i.jsxs)(c.Fragment,{children:[(0,i.jsx)(w,{step:e,index:t,logs:(s=e.id,n=t,r&&0!==r.length?r.filter(e=>{if(e.stepId){if(e.stepId===s)return!0;if(e.stepId==="step-".concat(n))return!0;if(e.stepId===n.toString())return!0;if(e.stepId==="step_".concat(n))return!0}return 0===n&&!e.stepId}):[])}),o[e.id]&&(0,i.jsx)(B,{stepId:e.id,recoveryData:o[e.id],onProceedWithRecovery:y,onAbortRecovery:f})]},"".concat(e.id||t,"-").concat(e.status||"pending"));var s,n})}),a||u?a?(0,i.jsx)(_.A,{color:"processing",children:"Executing..."}):null:(0,i.jsxs)(C.A,{children:[v&&p&&(0,i.jsx)(g.Ay,{type:"primary",icon:(0,i.jsx)(m.A,{}),onClick:p,size:"large",children:j}),A&&x&&(0,i.jsx)(g.Ay,{icon:(0,i.jsx)(h.A,{}),onClick:x,size:"large",children:"Cancel"})]}),b&&c.Children.map(b,e=>{var t;return c.isValidElement(e)&&"ExecutionLogs"===(null===(t=e.type)||void 0===t?void 0:t.name)?null:e})]})}))})},{Text:M}=d.A;var W=r(7326),F=r(9587),U=r(7175);const{Text:V,Title:H}=d.A,{Panel:J}=W.A,q=e=>{var t;let{resource:r,searchTerm:s,iconUrl:n}=e;const[o,a]=(0,c.useState)(!1),l=(null===(t=r.properties)||void 0===t?void 0:t.properties)||r.properties||{};return(0,i.jsxs)(k.A,{className:"resource-card",hoverable:!0,bodyStyle:{padding:"20px"},children:[(0,i.jsx)("div",{className:"resource-header",children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[(0,i.jsx)("div",{className:"resource-icon",children:(0,i.jsx)("img",{src:n,alt:"".concat(r.type," icon"),style:{width:"32px",height:"32px"},onError:e=>{e.target.src="/aws-service-icons/management-governance/32/Arch_AWS-CloudFormation_32.svg"}})}),(0,i.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,i.jsx)(H,{level:5,style:{margin:0,fontSize:"16px",fontWeight:600,color:"#1a1a1a",wordBreak:"break-all"},children:((e,t)=>{if(!t)return e;const r=new RegExp("(".concat(t,")"),"gi");return e.split(r).map((e,t)=>r.test(e)?(0,i.jsx)("span",{className:"search-highlight",children:e},t):e)})(r.id,s)}),(0,i.jsx)(V,{type:"secondary",style:{fontSize:"12px",textTransform:"uppercase",fontWeight:500,letterSpacing:"0.5px"},children:r.type})]}),(0,i.jsx)(g.Ay,{type:"text",size:"small",icon:o?(0,i.jsx)(F.A,{}):(0,i.jsx)(U.A,{}),onClick:()=>a(!o),style:{color:"#666",opacity:.7}})]})}),(0,i.jsx)(W.A,{ghost:!0,activeKey:o?["properties"]:[],onChange:()=>a(!o),style:{border:"none"},children:(0,i.jsx)(J,{header:null,showArrow:!1,style:{padding:0,border:"none"},children:(0,i.jsx)("div",{className:"properties-container",children:(0,i.jsx)("pre",{style:{margin:0,padding:"16px",fontSize:"12px",lineHeight:"1.5",fontFamily:"SF Mono, Monaco, Consolas, monospace",color:"#2d3748",backgroundColor:"transparent",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:JSON.stringify(l,null,2)})})},"properties")})]})};q.defaultProps={searchTerm:""};const Y=q,{Title:G,Text:Z}=d.A;var X=r(9472),$=r(7419),K=r(1645);const{Text:Q}=d.A,ee=e=>{const t={ec2_instance:"compute/32/Arch_Amazon-EC2_32.svg",instance:"compute/32/Arch_Amazon-EC2_32.svg",lambda:"compute/32/Arch_AWS-Lambda_32.svg",auto_scaling_group:"compute/32/Arch_Amazon-EC2-Auto-Scaling_32.svg",asg:"compute/32/Arch_Amazon-EC2-Auto-Scaling_32.svg",vpc:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",subnet:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",security_group:"security-identity-compliance/32/Arch_AWS-WAF_32.svg",securitygroup:"security-identity-compliance/32/Arch_AWS-WAF_32.svg",load_balancer:"networking-content-delivery/32/Arch_Elastic-Load-Balancing_32.svg",loadbalancer:"networking-content-delivery/32/Arch_Elastic-Load-Balancing_32.svg",alb:"networking-content-delivery/32/Arch_Elastic-Load-Balancing_32.svg",route53:"networking-content-delivery/32/Arch_Amazon-Route-53_32.svg",cloudfront:"networking-content-delivery/32/Arch_Amazon-CloudFront_32.svg",internet_gateway:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",nat_gateway:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",route_table:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",rds:"database/32/Arch_Amazon-RDS_32.svg",database:"database/32/Arch_Amazon-RDS_32.svg",dynamodb:"database/32/Arch_Amazon-DynamoDB_32.svg",redshift:"database/32/Arch_Amazon-Redshift_32.svg",s3:"storage/32/Arch_Amazon-Simple-Storage-Service_32.svg",ebs:"storage/32/Arch_Amazon-Elastic-Block-Store_32.svg",efs:"storage/32/Arch_Amazon-Elastic-File-System_32.svg",default:"management-governance/32/Arch_AWS-CloudFormation_32.svg"},r=(null===e||void 0===e?void 0:e.toLowerCase())||"default";return"/aws-service-icons/".concat(t[r]||t.default)},te=e=>{let{infrastructureData:t,searchTerm:r}=e;if(!t)return(0,i.jsx)("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e8e8e8",padding:"48px"},children:(0,i.jsx)(X.A,{description:(0,i.jsx)(Q,{type:"secondary",style:{fontSize:"16px"},children:"No infrastructure data available"}),style:{padding:"48px 0"}})});let s={};const n=t.resources&&t.resources.length>0,o=t.managed_state?Object.keys(t.managed_state.resources||{}).length:0;t.managed_state&&o>0?s=t.managed_state.resources||{}:n&&(s={},t.resources.forEach((e,t)=>{var r;s[e.id||"resource-".concat(t)]={id:e.id,name:e.name||e.id,type:e.type,status:e.status,properties:{aws_details:e.properties},createdAt:e.createdAt,dependencies:null===(r=e.properties)||void 0===r?void 0:r.dependencies}}));const a=Object.values(s).filter(e=>"step_reference"!==e.type).filter(e=>!r||e.id.toLowerCase().includes(r.toLowerCase())).reduce((e,t)=>{const r=t.type||"unknown";return e[r]||(e[r]=[]),e[r].push(t),e},{});return 0===Object.keys(a).length?(0,i.jsx)("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e8e8e8",padding:"48px"},children:(0,i.jsx)(X.A,{description:(0,i.jsx)(Q,{type:"secondary",style:{fontSize:"16px"},children:r?"No resources match your search":"No resources found"}),style:{padding:"48px 0"}})}):(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:Object.entries(a).map(e=>{let[t,s]=e;return(0,i.jsx)(k.A,{className:"category-card",bodyStyle:{padding:"24px"},title:(0,i.jsx)("div",{className:"category-header",children:(0,i.jsxs)(Q,{strong:!0,style:{textTransform:"capitalize",fontSize:"18px",color:"#1a1a1a"},children:[t.replace("_"," ")," (",s.length,")"]})}),children:(0,i.jsx)($.A,{gutter:[16,16],children:s.map(e=>(0,i.jsx)(K.A,{xs:24,sm:12,lg:8,xl:6,children:(0,i.jsx)(Y,{resource:e,searchTerm:r,iconUrl:ee(e.type)})},e.id))})},t)})})};te.defaultProps={searchTerm:""};const re=te;var se=r(777),ne=r(1522),oe=r(2411);const{Text:ie,Title:ae}=d.A,le=e=>{let{onRefresh:t,refreshing:r,searchTerm:s,onSearchChange:n,totalResources:o,totalCategories:a}=e;return(0,i.jsxs)("div",{style:{marginBottom:"32px",backgroundColor:"white",padding:"24px",borderRadius:"16px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",border:"1px solid #e8e8e8"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[(0,i.jsx)(ae,{level:2,style:{margin:0,color:"#1a1a1a",fontWeight:700},children:"Infrastructure Resources"}),(0,i.jsx)(g.Ay,{type:"primary",icon:(0,i.jsx)(ne.A,{spin:r}),onClick:t,loading:r,style:{borderRadius:"8px",height:"40px",backgroundColor:"#1890ff",borderColor:"#1890ff"},children:"Refresh"})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[(0,i.jsx)(se.A,{placeholder:"Search resources by ID...",prefix:(0,i.jsx)(oe.A,{}),value:s,onChange:n,style:{maxWidth:"300px",borderRadius:"8px"},allowClear:!0}),(0,i.jsxs)(ie,{type:"secondary",children:[o," resource",1!==o?"s":""," in ",a," categories"]})]})]})};le.defaultProps={refreshing:!1,searchTerm:"",onSearchChange:()=>{},totalResources:0,totalCategories:0};const ce=le;var de=r(2846),ue=r(5672),pe=r(1243),xe=r(4242),ge=r(1182),me=r(121),he=r(9795),ye=r(6626),fe=r(7240);const{Text:ve}=d.A,Ae=e=>{let{mermaidSyntax:t,timestamp:r,onFullscreen:s}=e;const n=(0,c.useRef)(null),o=(0,c.useRef)(!1),[a,l]=(0,c.useState)(!1),[d,u]=(0,c.useState)(1),[p,x]=(0,c.useState)({x:0,y:0}),m=(0,c.useRef)(null),[h,y]=(0,c.useState)(null),[f,v]=(0,c.useState)(!1),[A,j]=(0,c.useState)({x:0,y:0}),b=(0,c.useRef)(null);(0,c.useEffect)(()=>{if(!t||!n.current||o.current)return;let e=!0;o.current=!0;const r=async t=>{if(e)try{if(await new Promise(e=>setTimeout(e,150)),!e)return;t.querySelectorAll(".node").forEach(e=>{const t=((e,t)=>{const r=e.toLowerCase();if(t){const e=t.toLowerCase();if(e.includes("ec2")||e.includes("instance"))return"instance";if(e.includes("vpc"))return"vpc";if(e.includes("subnet"))return"subnet";if(e.includes("sg")||e.includes("security"))return"security_group";if(e.includes("lb")||e.includes("loadbalancer")||e.includes("load_balancer"))return"load_balancer";if(e.includes("asg")||e.includes("auto_scaling"))return"auto_scaling_group";if(e.includes("natgw")||e.includes("nat_gateway"))return"nat_gateway";if(e.includes("tg")||e.includes("targetgroup"))return"load_balancer";if(e.includes("rds")||e.includes("database"))return"rds";if(e.includes("lt")||e.includes("launch"))return"instance";if(e.includes("lambda"))return"lambda";if(e.includes("s3"))return"s3";if(e.includes("dynamodb"))return"dynamodb"}return r.includes("vpc-")?"vpc":r.includes("subnet-")?"subnet":r.includes("sg-")?"security_group":r.includes("i-")||r.includes("lt-")?"instance":r.includes("targetgroup")||r.includes("elasticloadbalancing")?"load_balancer":null})(e.id||"",e.getAttribute("class")||"");if(t){const r=(e=>{const t={ec2_instance:"compute/32/Arch_Amazon-EC2_32.svg",instance:"compute/32/Arch_Amazon-EC2_32.svg",lambda:"compute/32/Arch_AWS-Lambda_32.svg",auto_scaling_group:"compute/32/Arch_Amazon-EC2-Auto-Scaling_32.svg",asg:"compute/32/Arch_Amazon-EC2-Auto-Scaling_32.svg",vpc:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",subnet:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",security_group:"security-identity-compliance/32/Arch_AWS-WAF_32.svg",securitygroup:"security-identity-compliance/32/Arch_AWS-WAF_32.svg",load_balancer:"networking-content-delivery/32/Arch_Elastic-Load-Balancing_32.svg",loadbalancer:"networking-content-delivery/32/Arch_Elastic-Load-Balancing_32.svg",alb:"networking-content-delivery/32/Arch_Elastic-Load-Balancing_32.svg",route53:"networking-content-delivery/32/Arch_Amazon-Route-53_32.svg",cloudfront:"networking-content-delivery/32/Arch_Amazon-CloudFront_32.svg",internet_gateway:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",nat_gateway:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",route_table:"networking-content-delivery/32/Arch_Amazon-Virtual-Private-Cloud_32.svg",rds:"database/32/Arch_Amazon-RDS_32.svg",database:"database/32/Arch_Amazon-RDS_32.svg",dynamodb:"database/32/Arch_Amazon-DynamoDB_32.svg",redshift:"database/32/Arch_Amazon-Redshift_32.svg",s3:"storage/32/Arch_Amazon-Simple-Storage-Service_32.svg",ebs:"storage/32/Arch_Amazon-Elastic-Block-Store_32.svg",efs:"storage/32/Arch_Amazon-Elastic-File-System_32.svg",default:"management-governance/32/Arch_AWS-CloudFormation_32.svg"},r=(null===e||void 0===e?void 0:e.toLowerCase())||"default";return"/aws-service-icons/".concat(t[r]||t.default)})(t),s=e.querySelector("rect, polygon, circle, ellipse");if(!s)return;const n=s.getBBox(),o=document.createElementNS("http://www.w3.org/2000/svg","image");o.setAttributeNS("http://www.w3.org/1999/xlink","href",r),o.setAttribute("width","32"),o.setAttribute("height","32"),o.setAttribute("x",n.x+n.width/2-16),o.setAttribute("y",n.y+12),o.style.pointerEvents="none";const i=e.querySelector(".label"),a=e.querySelectorAll(".label text, text");if(i&&i.parentNode?i.parentNode.insertBefore(o,i):a.length>0&&a[0].parentNode?a[0].parentNode.insertBefore(o,a[0]):e.appendChild(o),a.forEach(e=>{const t=e.getAttribute("transform")||"",r=parseFloat(e.getAttribute("y")||0);if(t){const r="".concat(t," translate(0, 35)");e.setAttribute("transform",r)}else e.setAttribute("y",r+35)}),i){const e=i.getAttribute("transform")||"";if(e){const t="".concat(e," translate(0, 35)");i.setAttribute("transform",t)}else{const e=parseFloat(i.getAttribute("y")||0);i.setAttribute("y",e+35)}}}})}catch(r){console.warn("Failed to add icons to nodes:",r)}};return(async()=>{try{const s="mermaid-".concat(Date.now());if(!e||!n.current)return;const o=n.current;o.removeAttribute("data-processed"),o.innerHTML="";const i=document.createElement("div");if(i.className="mermaid",i.id=s,i.textContent=t,o.appendChild(i),await new Promise(e=>setTimeout(e,100)),!e)return;if(await fe.A.run({nodes:[i],suppressErrors:!1}),!e)return;await r(o);const a=o.querySelector("svg");a&&(y(a.outerHTML),m.current&&(m.current.innerHTML=a.outerHTML))}catch(s){console.error("Mermaid rendering error:",s);const r='\n          <div style="color: #ff4d4f; text-align: left; padding: 20px; background: #fff2f0; border: 1px solid #ffccc7; border-radius: 4px;">\n            <div style="font-weight: bold; margin-bottom: 8px;">\u26a0\ufe0f Error rendering diagram</div>\n            <div style="margin-bottom: 12px;">'.concat(s.message,'</div>\n            <details style="margin-top: 12px;">\n              <summary style="cursor: pointer; color: #1890ff;">Show Mermaid Syntax</summary>\n              <pre style="margin-top: 8px; padding: 12px; background: #f5f5f5; border-radius: 4px; overflow: auto;">').concat(t,"</pre>\n            </details>\n          </div>\n        ");e&&m.current&&(m.current.innerHTML=r),y(r)}finally{e&&(o.current=!1)}})(),()=>{e=!1,o.current=!1}},[t]);const w=()=>{u(e=>Math.min(e+.25,5))},S=()=>{u(e=>Math.max(e-.25,.25))},z=()=>{u(1),x({x:0,y:0})},T=(0,c.useCallback)(e=>{e.preventDefault();const t=e.deltaY>0?-.1:.1;u(e=>Math.min(Math.max(e+t,.25),5))},[]),R=(0,c.useCallback)(e=>{0===e.button&&(v(!0),j({x:e.clientX-p.x,y:e.clientY-p.y}),e.preventDefault())},[p]),N=(0,c.useCallback)(e=>{f&&x({x:e.clientX-A.x,y:e.clientY-A.y})},[f,A]),P=(0,c.useCallback)(()=>{v(!1)},[]);(0,c.useEffect)(()=>{if(f)return document.addEventListener("mousemove",N),document.addEventListener("mouseup",P),()=>{document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",P)}},[f,N,P]);const E=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,i.jsxs)("div",{style:{position:"relative"},children:[(0,i.jsxs)("div",{style:{position:"absolute",top:"10px",right:"10px",zIndex:10,display:"flex",gap:"8px",background:"rgba(255, 255, 255, 0.95)",padding:"8px",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},children:[(0,i.jsx)(de.A,{title:"Zoom In (or scroll up)",children:(0,i.jsx)(g.Ay,{icon:(0,i.jsx)(pe.A,{}),size:"small",onClick:w})}),(0,i.jsx)(de.A,{title:"Reset View (Zoom & Pan)",children:(0,i.jsxs)(g.Ay,{icon:(0,i.jsx)(xe.A,{}),size:"small",onClick:z,children:[Math.round(100*d),"%"]})}),(0,i.jsx)(de.A,{title:"Zoom Out (or scroll down)",children:(0,i.jsx)(g.Ay,{icon:(0,i.jsx)(ge.A,{}),size:"small",onClick:S})}),(0,i.jsx)(de.A,{title:"Drag to Pan",children:(0,i.jsx)(_.A,{icon:(0,i.jsx)(me.A,{}),color:"blue",style:{margin:0},children:"Pan Mode"})})]}),(0,i.jsx)("div",{ref:b,onWheel:T,onMouseDown:R,style:{textAlign:"center",backgroundColor:"#fafafa",padding:"20px",borderRadius:"6px",overflow:"hidden",maxHeight:e?"calc(100vh - 200px)":"600px",minHeight:e?"500px":"200px",cursor:f?"grabbing":"grab",position:"relative"},children:(0,i.jsx)("div",{ref:e?null:m,style:{display:"inline-block",minWidth:"100%",transform:"translate(".concat(p.x,"px, ").concat(p.y,"px) scale(").concat(d,")"),transformOrigin:"center center",transition:f?"none":"transform 0.1s ease-out",willChange:"transform"},dangerouslySetInnerHTML:e&&h?{__html:h}:void 0})}),(0,i.jsx)("div",{style:{marginTop:"8px",textAlign:"center",color:"#999",fontSize:"12px"},children:"\ud83d\udca1 Drag to pan \u2022 Scroll to zoom \u2022 Click controls for precise zoom"})]})};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:n,style:{position:"absolute",left:"-9999px",top:0}}),(0,i.jsx)(k.A,{title:(0,i.jsxs)(C.A,{children:[(0,i.jsx)(he.A,{}),(0,i.jsx)(ve,{strong:!0,children:"Dependency Visualization"}),(0,i.jsx)(_.A,{color:"blue",children:"Mermaid Diagram"})]}),extra:(0,i.jsxs)(C.A,{children:[r&&(0,i.jsxs)(ve,{type:"secondary",style:{fontSize:"12px"},children:["Generated: ",new Date(r).toLocaleString()]}),(0,i.jsx)(de.A,{title:"View fullscreen",children:(0,i.jsx)(g.Ay,{icon:(0,i.jsx)(ye.A,{}),size:"small",onClick:()=>{s?s():l(!0)}})})]}),children:E(!1)}),(0,i.jsx)(ue.A,{title:(0,i.jsxs)(C.A,{children:[(0,i.jsx)(he.A,{}),(0,i.jsx)(ve,{strong:!0,children:"Dependency Visualization (Fullscreen)"}),(0,i.jsx)(_.A,{color:"blue",children:"Mermaid Diagram"})]}),open:a,onCancel:()=>{l(!1),u(1),x({x:0,y:0})},width:"96vw",style:{top:20,maxWidth:"96vw",paddingBottom:0},styles:{body:{height:"calc(100vh - 120px)",overflow:"auto",padding:"16px"}},footer:null,closeIcon:(0,i.jsx)(F.A,{}),destroyOnClose:!1,centered:!1,children:E(!0)})]})};var je=r(6612);const{Text:be}=d.A,we=e=>{let{metadata:t}=e;if(!t)return null;const{nodeCount:r,edgeCount:s,resourceTypeCounts:n,bottlenecks:o}=t;return(0,i.jsxs)(k.A,{title:"Graph Statistics",style:{marginTop:16},children:[(0,i.jsxs)($.A,{gutter:[16,16],children:[(0,i.jsx)(K.A,{xs:12,sm:8,md:6,children:(0,i.jsx)(je.A,{title:"Total Resources",value:r,valueStyle:{color:"#1890ff"},prefix:(0,i.jsx)(he.A,{})})}),(0,i.jsx)(K.A,{xs:12,sm:8,md:6,children:(0,i.jsx)(je.A,{title:"Dependencies",value:s,valueStyle:{color:"#52c41a"}})}),(0,i.jsx)(K.A,{xs:12,sm:8,md:6,children:(0,i.jsx)(je.A,{title:"Resource Types",value:Object.keys(n||{}).length,valueStyle:{color:"#faad14"}})}),(0,i.jsx)(K.A,{xs:12,sm:8,md:6,children:(0,i.jsx)(je.A,{title:"Bottlenecks",value:(null===o||void 0===o?void 0:o.length)||0,valueStyle:{color:(null===o||void 0===o?void 0:o.length)>0?"#ff4d4f":"#52c41a"}})})]}),n&&Object.keys(n).length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{marginTop:24,marginBottom:12},children:(0,i.jsx)(be,{strong:!0,children:"Resource Type Distribution"})}),(0,i.jsx)(C.A,{wrap:!0,children:Object.entries(n).map(e=>{let[t,r]=e;return(0,i.jsxs)(_.A,{color:"blue",children:[t,": ",r]},t)})})]})]})};var Se=r(5215);const{Text:_e}=d.A,Ce=e=>{let{bottlenecks:t}=e;if(!t||0===t.length)return null;const r=e=>{switch(e){case"critical":return"#ff4d4f";case"high":return"#faad14";case"medium":return"#1890ff";case"low":return"#52c41a";default:return"#d9d9d9"}};return(0,i.jsx)(k.A,{title:(0,i.jsxs)(C.A,{children:[(0,i.jsx)(Se.A,{style:{color:"#faad14"}}),(0,i.jsx)(_e,{strong:!0,children:"Performance Bottlenecks Detected"})]}),style:{marginTop:16},children:(0,i.jsx)(C.A,{direction:"vertical",size:"middle",style:{width:"100%"},children:t.map((e,t)=>{return(0,i.jsx)(k.A,{size:"small",style:{borderLeft:"4px solid ".concat(r(e.impact)),backgroundColor:"#fafafa"},children:(0,i.jsxs)(C.A,{direction:"vertical",size:"small",style:{width:"100%"},children:[(0,i.jsxs)(C.A,{children:[(s=e.impact,(0,i.jsx)(Se.A,{style:{color:r(s)}})),(0,i.jsx)(_e,{strong:!0,style:{fontSize:"14px"},children:e.resourceId}),(0,i.jsx)(_.A,{color:r(e.impact),children:e.impact.toUpperCase()})]}),(0,i.jsx)("div",{style:{paddingLeft:"24px"},children:(0,i.jsxs)(_e,{type:"secondary",style:{fontSize:"12px"},children:["Type: ",e.resourceType," \u2022 ",e.dependentCount," dependent",1!==e.dependentCount?"s":""]})})]})},t);var s})})})}}}]);
//# sourceMappingURL=1775.d4b3c354.chunk.js.map