/*! For license information please see 1595.2e8c74e3.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkweb_ui_react=self.webpackChunkweb_ui_react||[]).push([[1595],{1595:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Z});var a=n(5043),r=n(6464),o=n(7326),s=n(2019),l=n(5520),c=n(6051),i=n(8139),d=n.n(i),h=n(5296),u=n(8887),m=n(2516),p=n(4414),g=n(8855),y=n(8446);const f=(0,g.OF)("Timeline",e=>(e=>{const{componentCls:t,calc:n}=e;return{[t]:Object.assign(Object.assign({},(0,p.dF)(e)),{margin:0,padding:0,listStyle:"none",["".concat(t,"-item")]:{position:"relative",margin:0,paddingBottom:e.itemPaddingBottom,fontSize:e.fontSize,listStyle:"none","&-tail":{position:"absolute",insetBlockStart:e.itemHeadSize,insetInlineStart:n(n(e.itemHeadSize).sub(e.tailWidth)).div(2).equal(),height:"calc(100% - ".concat((0,m.zA)(e.itemHeadSize),")"),borderInlineStart:"".concat((0,m.zA)(e.tailWidth)," ").concat(e.lineType," ").concat(e.tailColor)},"&-pending":{["".concat(t,"-item-head")]:{fontSize:e.fontSizeSM,backgroundColor:"transparent"},["".concat(t,"-item-tail")]:{display:"none"}},"&-head":{position:"absolute",width:e.itemHeadSize,height:e.itemHeadSize,backgroundColor:e.dotBg,border:"".concat((0,m.zA)(e.dotBorderWidth)," ").concat(e.lineType," transparent"),borderRadius:"50%","&-blue":{color:e.colorPrimary,borderColor:e.colorPrimary},"&-red":{color:e.colorError,borderColor:e.colorError},"&-green":{color:e.colorSuccess,borderColor:e.colorSuccess},"&-gray":{color:e.colorTextDisabled,borderColor:e.colorTextDisabled}},"&-head-custom":{position:"absolute",insetBlockStart:n(e.itemHeadSize).div(2).equal(),insetInlineStart:n(e.itemHeadSize).div(2).equal(),width:"auto",height:"auto",marginBlockStart:0,paddingBlock:e.customHeadPaddingVertical,lineHeight:1,textAlign:"center",border:0,borderRadius:0,transform:"translate(-50%, -50%)"},"&-content":{position:"relative",insetBlockStart:n(n(e.fontSize).mul(e.lineHeight).sub(e.fontSize)).mul(-1).add(e.lineWidth).equal(),marginInlineStart:n(e.margin).add(e.itemHeadSize).equal(),marginInlineEnd:0,marginBlockStart:0,marginBlockEnd:0,wordBreak:"break-word"},"&-last":{["> ".concat(t,"-item-tail")]:{display:"none"},["> ".concat(t,"-item-content")]:{minHeight:n(e.controlHeightLG).mul(1.2).equal()}}},["&".concat(t,"-alternate,\n        &").concat(t,"-right,\n        &").concat(t,"-label")]:{["".concat(t,"-item")]:{"&-tail, &-head, &-head-custom":{insetInlineStart:"50%"},"&-head":{marginInlineStart:n(e.marginXXS).mul(-1).equal(),"&-custom":{marginInlineStart:n(e.tailWidth).div(2).equal()}},"&-left":{["".concat(t,"-item-content")]:{insetInlineStart:"calc(50% - ".concat((0,m.zA)(e.marginXXS),")"),width:"calc(50% - ".concat((0,m.zA)(e.marginSM),")"),textAlign:"start"}},"&-right":{["".concat(t,"-item-content")]:{width:"calc(50% - ".concat((0,m.zA)(e.marginSM),")"),margin:0,textAlign:"end"}}}},["&".concat(t,"-right")]:{["".concat(t,"-item-right")]:{["".concat(t,"-item-tail,\n            ").concat(t,"-item-head,\n            ").concat(t,"-item-head-custom")]:{insetInlineStart:"calc(100% - ".concat((0,m.zA)(n(n(e.itemHeadSize).add(e.tailWidth)).div(2).equal()),")")},["".concat(t,"-item-content")]:{width:"calc(100% - ".concat((0,m.zA)(n(e.itemHeadSize).add(e.marginXS).equal()),")")}}},["&".concat(t,"-pending\n        ").concat(t,"-item-last\n        ").concat(t,"-item-tail")]:{display:"block",height:"calc(100% - ".concat((0,m.zA)(e.margin),")"),borderInlineStart:"".concat((0,m.zA)(e.tailWidth)," dotted ").concat(e.tailColor)},["&".concat(t,"-reverse\n        ").concat(t,"-item-last\n        ").concat(t,"-item-tail")]:{display:"none"},["&".concat(t,"-reverse ").concat(t,"-item-pending")]:{["".concat(t,"-item-tail")]:{insetBlockStart:e.margin,display:"block",height:"calc(100% - ".concat((0,m.zA)(e.margin),")"),borderInlineStart:"".concat((0,m.zA)(e.tailWidth)," dotted ").concat(e.tailColor)},["".concat(t,"-item-content")]:{minHeight:n(e.controlHeightLG).mul(1.2).equal()}},["&".concat(t,"-label")]:{["".concat(t,"-item-label")]:{position:"absolute",insetBlockStart:n(n(e.fontSize).mul(e.lineHeight).sub(e.fontSize)).mul(-1).add(e.tailWidth).equal(),width:"calc(50% - ".concat((0,m.zA)(e.marginSM),")"),textAlign:"end"},["".concat(t,"-item-right")]:{["".concat(t,"-item-label")]:{insetInlineStart:"calc(50% + ".concat((0,m.zA)(e.marginSM),")"),width:"calc(50% - ".concat((0,m.zA)(e.marginSM),")"),textAlign:"start"}}},"&-rtl":{direction:"rtl",["".concat(t,"-item-head-custom")]:{transform:"translate(50%, -50%)"}}})}})((0,y.oX)(e,{itemHeadSize:10,customHeadPaddingVertical:e.paddingXXS,paddingInlineEnd:2})),e=>({tailColor:e.colorSplit,tailWidth:e.lineWidthBold,dotBorderWidth:e.wireframe?e.lineWidthBold:3*e.lineWidth,dotBg:e.colorBgContainer,itemPaddingBottom:1.25*e.padding}));var v=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const b=e=>{var{prefixCls:t,className:n,color:r="blue",dot:o,pending:s=!1,position:l,label:c,children:i}=e,u=v(e,["prefixCls","className","color","dot","pending","position","label","children"]);const{getPrefixCls:m}=a.useContext(h.QO),p=m("timeline",t),g=d()("".concat(p,"-item"),{["".concat(p,"-item-pending")]:s},n),y=/blue|red|green|gray/.test(r||"")?void 0:r,f=d()("".concat(p,"-item-head"),{["".concat(p,"-item-head-custom")]:!!o,["".concat(p,"-item-head-").concat(r)]:!y});return a.createElement("li",Object.assign({},u,{className:g}),c&&a.createElement("div",{className:"".concat(p,"-item-label")},c),a.createElement("div",{className:"".concat(p,"-item-tail")}),a.createElement("div",{className:f,style:{borderColor:y,color:y}},o),a.createElement("div",{className:"".concat(p,"-item-content")},i))};var x=n(436),w=n(362),j=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const S=e=>{var{prefixCls:t,className:n,pending:r=!1,children:o,items:s,rootClassName:l,reverse:c=!1,direction:i,hashId:h,pendingDot:u,mode:m=""}=e,p=j(e,["prefixCls","className","pending","children","items","rootClassName","reverse","direction","hashId","pendingDot","mode"]);const g=(e,n)=>"alternate"===m?"".concat(t,"right"===e?"-item-right":"left"===e||n%2===0?"-item-left":"-item-right"):"left"===m?"".concat(t,"-item-left"):"right"===m||"right"===e?"".concat(t,"-item-right"):"",y=(0,x.A)(s||[]),f="boolean"===typeof r?null:r;r&&y.push({pending:!!r,dot:u||a.createElement(w.A,null),children:f}),c&&y.reverse();const v=y.length,S="".concat(t,"-item-last"),A=y.filter(e=>!!e).map((e,t)=>{var n;const o=t===v-2?S:"",s=t===v-1?S:"",{className:l}=e,i=j(e,["className"]);return a.createElement(b,Object.assign({},i,{className:d()([l,!c&&r?o:s,g(null!==(n=null===e||void 0===e?void 0:e.position)&&void 0!==n?n:"",t)]),key:(null===e||void 0===e?void 0:e.key)||t}))}),k=y.some(e=>!!(null===e||void 0===e?void 0:e.label)),E=d()(t,{["".concat(t,"-pending")]:!!r,["".concat(t,"-reverse")]:!!c,["".concat(t,"-").concat(m)]:!!m&&!k,["".concat(t,"-label")]:k,["".concat(t,"-rtl")]:"rtl"===i},n,l,h);return a.createElement("ol",Object.assign({},p,{className:E}),A)};var A=n(2149);const k=function(e,t){return e&&Array.isArray(e)?e:(0,A.A)(t).map(e=>{var t,n;return Object.assign({children:null!==(n=null===(t=null===e||void 0===e?void 0:e.props)||void 0===t?void 0:t.children)&&void 0!==n?n:""},e.props)})};var E=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const T=e=>{const{getPrefixCls:t,direction:n,timeline:r}=a.useContext(h.QO),{prefixCls:o,children:s,items:l,className:c,style:i}=e,m=E(e,["prefixCls","children","items","className","style"]),p=t("timeline",o);const g=(0,u.A)(p),[y,v,b]=f(p,g),x=k(l,s);return y(a.createElement(S,Object.assign({},m,{className:d()(null===r||void 0===r?void 0:r.className,c,b,g),style:Object.assign(Object.assign({},null===r||void 0===r?void 0:r.style),i),prefixCls:p,direction:n,items:x,hashId:v})))};T.Item=b;const O=T;var z=n(6399),C=n(6977),P=n(2261),D=n(5492),_=n(2846),I=n(2624),N=n(1686),H=n(9472),L=n(5229),B=n(1633),R=n(1837),W=n(1522),M=n(6881),G=n(9415),U=n(7250),q=n(579);const{Title:F,Text:V,Paragraph:J}=r.A,{Panel:X}=o.A,Z=()=>{const{dispatch:e}=(0,G.nm)(),[t,n]=(0,a.useState)(null),[r,i]=(0,a.useState)(!0),[d,h]=(0,a.useState)(!1),u=async()=>{h(!0),e({type:G.TH.SET_LOADING,payload:{key:"plan",value:!0}});try{const t=await U.A.generateDeploymentPlan([],r);n(t),e({type:G.TH.SET_DEPLOYMENT_PLAN,payload:t});const a=t.deployment_order?t.deployment_order.length:0;e({type:G.TH.SET_STATUS_MESSAGE,payload:"Deployment plan generated - ".concat(a," steps")}),s.Ay.success("Generated deployment plan with ".concat(a," steps"))}catch(t){s.Ay.error("Failed to generate plan: ".concat(t.message)),console.error("Failed to generate deployment plan:",t)}finally{h(!1),e({type:G.TH.SET_LOADING,payload:{key:"plan",value:!1}})}},m=e=>{const t=(null===e||void 0===e?void 0:e.toLowerCase())||"";return t.includes("vpc")?"\ud83c\udf10":t.includes("subnet")?"\ud83d\udd17":t.includes("ec2")||t.includes("instance")?"\ud83d\udcbb":t.includes("rds")||t.includes("database")?"\ud83d\uddc4\ufe0f":t.includes("security")||t.includes("sg")?"\ud83d\udd12":t.includes("load")||t.includes("alb")||t.includes("elb")?"\u2696\ufe0f":t.includes("auto")||t.includes("asg")?"\ud83d\udcc8":"\ud83d\udd27"};return(0,q.jsxs)("div",{style:{maxWidth:1200,margin:"0 auto"},children:[(0,q.jsxs)("div",{style:{marginBottom:24},children:[(0,q.jsx)(F,{level:2,children:"Deployment Planning"}),(0,q.jsx)(J,{type:"secondary",children:"Generate optimized deployment strategies with dependency ordering"})]}),(0,q.jsx)(l.A,{children:(0,q.jsxs)(c.A,{size:"large",style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},children:[(0,q.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,q.jsx)(V,{strong:!0,children:"Include deployment levels:"}),(0,q.jsx)(_.A,{title:"Group resources into levels that can be deployed in parallel",children:(0,q.jsx)(I.A,{checked:r,onChange:i,size:"small"})})]}),(0,q.jsx)(D.Ay,{type:"primary",icon:(0,q.jsx)(M.A,{}),onClick:u,loading:d,size:"large",children:"Generate Plan"})]})}),d?(0,q.jsxs)("div",{style:{textAlign:"center",padding:"50px 0"},children:[(0,q.jsx)(N.A,{size:"large"}),(0,q.jsx)("div",{style:{marginTop:16},children:(0,q.jsx)(V,{children:"Generating deployment strategy..."})})]}):t?(0,q.jsxs)(q.Fragment,{children:[(()=>{if(!t)return null;const e=t.deployment_order?t.deployment_order.length:0,n=t.deployment_levels?t.deployment_levels.length:0,a=t.estimated_time||"Unknown",r=t.parallelizable_resources||0;return(0,q.jsx)(l.A,{style:{marginBottom:16},children:(0,q.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:16,textAlign:"center"},children:[(0,q.jsxs)("div",{children:[(0,q.jsx)(F,{level:3,style:{margin:0,color:"#1890ff"},children:e}),(0,q.jsx)(V,{type:"secondary",children:"Total Resources"})]}),n>0&&(0,q.jsxs)("div",{children:[(0,q.jsx)(F,{level:3,style:{margin:0,color:"#52c41a"},children:n}),(0,q.jsx)(V,{type:"secondary",children:"Deployment Levels"})]}),r>0&&(0,q.jsxs)("div",{children:[(0,q.jsx)(F,{level:3,style:{margin:0,color:"#faad14"},children:r}),(0,q.jsx)(V,{type:"secondary",children:"Parallelizable"})]}),(0,q.jsxs)("div",{children:[(0,q.jsx)(F,{level:3,style:{margin:0,color:"#722ed1"},children:a}),(0,q.jsx)(V,{type:"secondary",children:"Est. Time"})]})]})})})(),null!==t&&void 0!==t&&t.deployment_order&&0!==t.deployment_order.length?(0,q.jsx)(l.A,{title:(0,q.jsxs)(c.A,{children:[(0,q.jsx)(L.A,{}),(0,q.jsx)(V,{strong:!0,children:"Deployment Order"})]}),style:{marginBottom:16},children:(0,q.jsx)(O,{mode:"left",items:t.deployment_order.map((e,t)=>({label:"Step ".concat(t+1),children:(0,q.jsxs)(c.A,{children:[(0,q.jsx)("span",{style:{fontSize:16},children:m(e)}),(0,q.jsx)(V,{strong:!0,children:e}),(0,q.jsx)(z.A,{color:"blue",children:"Deploy"})]}),color:"blue"}))})}):null,r&&(null!==t&&void 0!==t&&t.deployment_levels&&0!==t.deployment_levels.length?(0,q.jsxs)(l.A,{title:(0,q.jsxs)(c.A,{children:[(0,q.jsx)(B.A,{}),(0,q.jsx)(V,{strong:!0,children:"Deployment Levels"})]}),style:{marginBottom:16},children:[(0,q.jsx)(J,{type:"secondary",style:{marginBottom:16},children:"Resources grouped by deployment levels can be deployed in parallel within each level."}),(0,q.jsx)(o.A,{ghost:!0,children:t.deployment_levels.map((e,t)=>(0,q.jsx)(X,{header:(0,q.jsxs)(c.A,{children:[(0,q.jsxs)(z.A,{color:"geekblue",children:["Level ",t+1]}),(0,q.jsxs)(V,{strong:!0,children:[e.length," resources"]}),(0,q.jsx)(V,{type:"secondary",children:"(Can be deployed in parallel)"})]}),children:(0,q.jsx)(C.A,{size:"small",dataSource:e,renderItem:e=>(0,q.jsx)(C.A.Item,{children:(0,q.jsxs)(c.A,{children:[(0,q.jsx)("span",{style:{fontSize:14},children:m(e)}),(0,q.jsx)(V,{children:e})]})})})},t))})]}):null),null!==t&&void 0!==t&&t.dependency_info?(0,q.jsx)(l.A,{title:"Dependency Analysis",size:"small",style:{marginBottom:16},children:(0,q.jsxs)(c.A,{direction:"vertical",size:"small",style:{width:"100%"},children:[t.dependency_info.critical_path&&(0,q.jsxs)("div",{children:[(0,q.jsx)(V,{strong:!0,children:"Critical Path:"}),(0,q.jsx)("div",{style:{marginTop:4},children:t.dependency_info.critical_path.map((e,t)=>(0,q.jsx)(z.A,{style:{margin:2},children:e},t))})]}),t.dependency_info.bottlenecks&&t.dependency_info.bottlenecks.length>0&&(0,q.jsx)(P.A,{message:"Dependency Bottlenecks",description:(0,q.jsx)("ul",{style:{marginBottom:0},children:t.dependency_info.bottlenecks.map((e,t)=>(0,q.jsx)("li",{children:e},t))}),type:"warning",showIcon:!0,size:"small"})]})}):null,t?(0,q.jsx)(l.A,{children:(0,q.jsxs)(c.A,{size:"middle",children:[(0,q.jsx)(D.Ay,{type:"primary",icon:(0,q.jsx)(R.A,{}),size:"large",onClick:()=>{s.Ay.info("Plan execution integration coming soon")},children:"Execute Plan"}),(0,q.jsx)(D.Ay,{icon:(0,q.jsx)(W.A,{}),onClick:u,loading:d,children:"Regenerate"}),(0,q.jsx)(_.A,{title:"Export plan as JSON",children:(0,q.jsx)(D.Ay,{onClick:()=>{const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"});U.A.downloadFile(e,"deployment-plan-".concat(U.A.getCurrentTimestamp(),".json")),s.Ay.success("Plan exported successfully")},children:"Export Plan"})})]})}):null,(0,q.jsx)(l.A,{size:"small",style:{marginTop:16},children:(0,q.jsxs)(V,{type:"secondary",children:["Plan generated at: ",(new Date).toLocaleString()]})})]}):(0,q.jsx)(l.A,{style:{marginTop:16},children:(0,q.jsx)(H.A,{description:"No deployment plan generated yet",image:H.A.PRESENTED_IMAGE_SIMPLE,children:(0,q.jsx)(D.Ay,{type:"primary",onClick:u,children:"Generate Deployment Plan"})})})]})}},1633:(e,t,n)=>{n.d(t,{A:()=>c});var a=n(5043),r=n(9221),o=n(6571);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s.apply(this,arguments)}const l=(e,t)=>a.createElement(o.A,s({},e,{ref:t,icon:r.A}));const c=a.forwardRef(l)},3681:(e,t,n)=>{n.d(t,{aO:()=>a,js:()=>r});const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return new Promise(a=>{const r=new XMLHttpRequest,o=t.method||"GET",s=setTimeout(()=>{r.abort(),console.warn("\u26a0\ufe0f Request timeout: ".concat(e)),a({ok:!1,status:0,statusText:"Timeout",data:null,error:"Request timeout"})},n);r.onload=()=>{clearTimeout(s);let e=null,t=null;try{r.responseText&&(e=JSON.parse(r.responseText))}catch(n){console.warn("Failed to parse response:",n),t="Failed to parse response"}a({ok:r.status>=200&&r.status<300,status:r.status,statusText:r.statusText,data:e,error:t||(r.status>=200&&r.status<300?null:r.statusText)})},r.onerror=()=>{clearTimeout(s),console.warn("\u26a0\ufe0f Request failed: ".concat(e)),a({ok:!1,status:0,statusText:"Network Error",data:null,error:"Network error"})},r.onabort=()=>{clearTimeout(s),a({ok:!1,status:0,statusText:"Aborted",data:null,error:"Request aborted"})};try{r.open(o,e,!0),t.headers&&Object.entries(t.headers).forEach(e=>{let[t,n]=e;r.setRequestHeader(t,n)}),t.body?r.send(t.body):r.send()}catch(l){clearTimeout(s),console.warn("\u274c Request error: ".concat(e),l.message),a({ok:!1,status:0,statusText:"Error",data:null,error:l.message})}})},r=()=>{const e=e=>{if(e.message&&e.message.includes("Failed to fetch")){var t;const n=(null===(t=e.error)||void 0===t?void 0:t.stack)||"";if(n.includes("/state")||n.includes("checkBackendHealth")||n.includes("safeFetch")||!n)return console.warn("\ud83d\udd07 Suppressed fetch error"),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1}},t=e=>{var t,n;const a=(null===(t=e.reason)||void 0===t?void 0:t.message)||(null===(n=e.reason)||void 0===n?void 0:n.toString())||"";if(a.includes("Failed to fetch")||a.includes("fetch")){var r;const t=(null===(r=e.reason)||void 0===r?void 0:r.stack)||"";if(t.includes("/state")||t.includes("checkBackendHealth")||t.includes("safeFetch")||a.includes("/state")||!t)return console.warn("\ud83d\udd07 Suppressed promise rejection"),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1}};return window.addEventListener("error",e,!0),window.addEventListener("unhandledrejection",t,!0),()=>{window.removeEventListener("error",e,!0),window.removeEventListener("unhandledrejection",t,!0)}}},7250:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(9379);const r=new class{constructor(){this.mockEnabled=!1,console.log("MockDataService initialized. Mock enabled:",this.mockEnabled)}async delay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;return new Promise(t=>setTimeout(t,e))}async loadMockData(e){try{const t=await fetch("/mocks/".concat(e));if(!t.ok)throw new Error("Failed to load mock data: ".concat(e));return await t.json()}catch(t){throw console.error("Error loading mock data:",t),t}}async getDependencyGraph(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;await this.delay(800);try{let t;t="live"===e?"mock-discovery-live.json":"mock-generate-graph.json";const n=await this.loadMockData(t);return this.transformGraphData(n)}catch(t){throw console.error("Mock getDependencyGraph error:",t),new Error("Failed to load mock dependency graph: ".concat(t.message))}}transformGraphData(e){if(e.mermaid&&e.graph)return{mermaid:e.mermaid,graph:e.graph,timestamp:e.timestamp||(new Date).toISOString(),metadata:e.metadata||this.generateDefaultMetadata(e),source:e.source||"unknown",format:e.format||"mermaid"};if(e.mermaid)return{mermaid:e.mermaid,graph:null,timestamp:e.timestamp||(new Date).toISOString(),metadata:e.metadata||this.generateDefaultMetadata(e)};if(e.graph&&e.graph.edges){return{mermaid:this.convertGraphToMermaid(e.graph),graph:e.graph,timestamp:(new Date).toISOString(),metadata:this.generateMetadataFromGraph(e.graph)}}throw new Error("Invalid mock data format")}convertGraphToMermaid(e){const t=["graph TD"],n=new Set,a={};return e.edges.forEach(e=>{n.add(e.source),n.add(e.target);const t=e.source.replace(/[^a-zA-Z0-9_]/g,"_"),r=e.target.replace(/[^a-zA-Z0-9_]/g,"_");e.source.startsWith("vpc-")?a[t]="vpc":e.source.startsWith("subnet-")?a[t]="subnet":e.source.startsWith("sg-")?a[t]="sg":e.source.startsWith("i-")?a[t]="ec2":e.source.startsWith("lt-")?a[t]="lt":e.source.startsWith("nat-")?a[t]="natgw":e.source.includes("targetgroup")?a[t]="tg":e.source.includes("loadbalancer")||e.source.includes("app/")||e.source.includes("net/")?a[t]="lb":(e.source.includes("database")||e.source.includes("cluster"))&&(a[t]="rds"),e.target.startsWith("vpc-")?a[r]="vpc":e.target.startsWith("subnet-")?a[r]="subnet":e.target.startsWith("sg-")?a[r]="sg":e.target.startsWith("i-")?a[r]="ec2":e.target.startsWith("lt-")?a[r]="lt":e.target.startsWith("nat-")?a[r]="natgw":e.target.includes("targetgroup")?a[r]="tg":e.target.includes("loadbalancer")||e.target.includes("app/")||e.target.includes("net/")?a[r]="lb":(e.target.includes("database")||e.target.includes("cluster"))&&(a[r]="rds")}),t.push(""),n.forEach(e=>{const n=a[e]||"default",r=e.replace(/[^a-zA-Z0-9_]/g,"_");t.push("    ".concat(r,'["').concat(e,'"]:::').concat(n))}),t.push(""),e.edges.forEach(e=>{const n=e.source.replace(/[^a-zA-Z0-9_]/g,"_"),a=e.target.replace(/[^a-zA-Z0-9_]/g,"_");t.push("    ".concat(n," --\x3e ").concat(a))}),t.push(""),t.push("    classDef vpc fill:#e1f5fe"),t.push("    classDef subnet fill:#b3e5fc"),t.push("    classDef ec2 fill:#fff3e0"),t.push("    classDef sg fill:#f3e5f5"),t.push("    classDef lb fill:#e8f5e8"),t.push("    classDef asg fill:#fce4ec"),t.push("    classDef natgw fill:#e0f2f1"),t.push("    classDef tg fill:#f1f8e9"),t.push("    classDef rds fill:#fff9c4"),t.push("    classDef lt fill:#fce4ec"),t.push("    classDef default fill:#f5f5f5"),t.join("\n")}generateMetadataFromGraph(e){const t={},n=new Set;return e.edges.forEach(e=>{n.add(e.source),n.add(e.target);const a=this.detectNodeType(e.source),r=this.detectNodeType(e.target);t[a]=(t[a]||0)+1,t[r]=(t[r]||0)+1}),{nodeCount:n.size,edgeCount:e.edges.length,resourceTypeCounts:t,bottlenecks:this.generateMockBottlenecks(n)}}detectNodeType(e){return e.startsWith("vpc-")?"VPC":e.startsWith("subnet-")?"Subnet":e.startsWith("sg-")?"Security Group":e.startsWith("i-")?"EC2 Instance":e.startsWith("lt-")?"Launch Template":e.includes("targetgroup")?"Target Group":e.includes("loadbalancer")?"Load Balancer":"Other"}generateMockBottlenecks(e){const t=[];let n=0;return e.forEach(e=>{n>=3||e.startsWith("vpc-")&&(t.push({resource:e,dependents:Math.floor(20*Math.random())+10,impact:"high",reason:"Multiple resources depend on this VPC"}),n++)}),t}generateDefaultMetadata(e){return{nodeCount:0,edgeCount:0,resourceTypeCounts:{},bottlenecks:[]}}};var o=n(3681);const s=new class{constructor(){this.baseURL="http://localhost:8080/api",this.baseURL=this.baseURL.replace(/\/$/,""),this.mockEnabled=!1,console.log("ApiService initialized with baseURL:",this.baseURL),console.log("Mock mode enabled:",this.mockEnabled)}async call(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="".concat(this.baseURL).concat(e),r=(0,a.A)({headers:(0,a.A)({"Content-Type":"application/json"},t.headers)},t);try{const e=await fetch(n,r);if(!e.ok){let t="HTTP ".concat(e.status,": ").concat(e.statusText),n=null;try{const a=await e.text();if(a)try{const e=JSON.parse(a);e.error?t=e.error:e.message?t=e.message:e.detail&&(t=e.detail),n=e}catch(o){a.length<200&&(t=a)}}catch(s){console.warn("Could not read error response body:",s)}const a=new Error(t);throw a.status=e.status,a.statusText=e.statusText,a.details=n,a}const t=await e.text();if(!t)throw new Error("Empty response from server");try{return JSON.parse(t)}catch(o){throw console.error("JSON parse error:",o),console.error("Response text:",t),new Error("Invalid JSON response: ".concat(o.message))}}catch(l){if(console.error("API call failed for ".concat(e,":"),l),"TypeError"===l.name&&"Failed to fetch"===l.message){const e=new Error("Unable to connect to server. Please check your internet connection and try again.");throw e.originalError=l,e.isNetworkError=!0,e}if("AbortError"===l.name){const e=new Error("Request timed out. Please try again.");throw e.originalError=l,e.isTimeoutError=!0,e}throw l}}async safeCall(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("GET"===(t.method||"GET")){const n="".concat(this.baseURL).concat(e),r=await(0,o.aO)(n,{method:"GET",headers:(0,a.A)({"Content-Type":"application/json"},t.headers)});if(!r.ok){const e=new Error(r.error||"HTTP ".concat(r.status,": ").concat(r.statusText));throw e.status=r.status,e.statusText=r.statusText,e.isNetworkError=0===r.status,e}return r.data}return this.call(e,t)}async processAgentRequest(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.call("/agent/process",{method:"POST",body:JSON.stringify({request:e,dry_run:t})})}async executeConfirmedPlan(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.call("/agent/execute-with-plan-recovery",{method:"POST",body:JSON.stringify({decisionId:e,dry_run:t})})}async getInfrastructureState(){const e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"?discovered_only=true":"";return this.safeCall("/state".concat(e))}async discoverInfrastructure(){return this.call("/discover",{method:"POST"})}async exportState(){const e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"?include_discovered=true":"",t=await fetch("".concat(this.baseURL,"/export").concat(e));if(!t.ok)throw new Error("Export failed: ".concat(t.statusText));return t.blob()}async getDependencyGraph(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.mockEnabled)return console.log("Using mock data for getDependencyGraph, source:",e),r.getDependencyGraph(e);const t=e?"?source=".concat(e):"";return this.call("/graph".concat(t))}async detectConflicts(){const e=new URLSearchParams({auto_resolve:(arguments.length>0&&void 0!==arguments[0]&&arguments[0]).toString()});return this.call("/conflicts?".concat(e))}async generateDeploymentPlan(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=new URLSearchParams;return e.length>0&&e.forEach(e=>{n.append("target_resources",e)}),n.set("include_levels",t.toString()),this.call("/plan?".concat(n))}downloadFile(e,t){const n=window.URL.createObjectURL(e),a=document.createElement("a");a.href=n,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(n)}getCurrentTimestamp(){return(new Date).toISOString().split("T")[0]}getBaseURL(){return this.baseURL}getConfig(){return{baseURL:this.baseURL,wsURL:"ws://localhost:8080/ws",environment:"production"}}}},9221:(e,t)=>{t.A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"}}}]);
//# sourceMappingURL=1595.2e8c74e3.chunk.js.map