/*! For license information please see 2374.75cb7c60.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkweb_ui_react=self.webpackChunkweb_ui_react||[]).push([[2374],{1629:(e,t)=>{t.A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M876.6 239.5c-.5-.9-1.2-1.8-2-2.5-5-5-13.1-5-18.1 0L684.2 409.3l-67.9-67.9L788.7 169c.8-.8 1.4-1.6 2-2.5 3.6-6.1 1.6-13.9-4.5-17.5-98.2-58-226.8-44.7-311.3 39.7-67 67-89.2 162-66.5 247.4l-293 293c-3 3-2.8 7.9.3 11l169.7 169.7c3.1 3.1 8.1 3.3 11 .3l292.9-292.9c85.5 22.8 180.5.7 247.6-66.4 84.4-84.5 97.7-213.1 39.7-311.3zM786 499.8c-58.1 58.1-145.3 69.3-214.6 33.6l-8.8 8.8-.1-.1-274 274.1-79.2-79.2 230.1-230.1s0 .1.1.1l52.8-52.8c-35.7-69.3-24.5-156.5 33.6-214.6a184.2 184.2 0 01144-53.5L537 318.9a32.05 32.05 0 000 45.3l124.5 124.5a32.05 32.05 0 0045.3 0l132.8-132.8c3.7 51.8-14.4 104.8-53.6 143.9z"}}]},name:"tool",theme:"outlined"}},2374:(e,t,r)=>{r.r(t),r.d(t,{default:()=>R});var s=r(5043),a=r(6464),n=r(2019),o=r(5520),c=r(6051),l=r(6399),i=r(6977),d=r(2261),h=r(9472),u=r(2846),g=r(2624),p=r(5492),f=r(1686),m=r(5207),y=r(5215),v=r(5870),x=r(1629),w=r(6571);function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},j.apply(this,arguments)}const A=(e,t)=>s.createElement(w.A,j({},e,{ref:t,icon:x.A}));const b=s.forwardRef(A);var S=r(1739),C=r(2411),T=r(9415),k=r(7250),E=r(579);const{Title:L,Text:D,Paragraph:_}=a.A,R=()=>{const{dispatch:e}=(0,T.nm)(),[t,r]=(0,s.useState)(null),[a,x]=(0,s.useState)(!1),[w,j]=(0,s.useState)(!1),A=async()=>{j(!0),e({type:T.TH.SET_LOADING,payload:{key:"conflicts",value:!0}});try{const t=await k.A.detectConflicts(a);r(t),e({type:T.TH.SET_CONFLICTS,payload:t});const s=t.conflicts?t.conflicts.length:0;e({type:T.TH.SET_STATUS_MESSAGE,payload:"Conflict detection completed - ".concat(s," conflicts found")}),0===s?n.Ay.success("No conflicts detected!"):n.Ay.warning("Found ".concat(s," conflicts"))}catch(t){n.Ay.error("Failed to detect conflicts: ".concat(t.message)),console.error("Failed to detect conflicts:",t)}finally{j(!1),e({type:T.TH.SET_LOADING,payload:{key:"conflicts",value:!1}})}},R=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"security":return(0,E.jsx)(m.A,{style:{color:"#ff4d4f"}});case"configuration":return(0,E.jsx)(y.A,{style:{color:"#faad14"}});case"dependency":return(0,E.jsx)(v.A,{style:{color:"#1890ff"}});case"resource":return(0,E.jsx)(b,{style:{color:"#722ed1"}});default:return(0,E.jsx)(v.A,{style:{color:"#666"}})}};return(0,E.jsxs)("div",{style:{maxWidth:1200,margin:"0 auto"},children:[(0,E.jsxs)("div",{style:{marginBottom:24},children:[(0,E.jsx)(L,{level:2,children:"Resource Conflicts"}),(0,E.jsx)(_,{type:"secondary",children:"Detect and resolve conflicts in your infrastructure configuration"})]}),(0,E.jsx)(o.A,{children:(0,E.jsxs)(c.A,{size:"large",style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},children:[(0,E.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,E.jsx)(D,{strong:!0,children:"Auto-resolve conflicts where possible:"}),(0,E.jsx)(u.A,{title:"Automatically resolve conflicts that have clear solutions",children:(0,E.jsx)(g.A,{checked:a,onChange:x,size:"small"})})]}),(0,E.jsx)(p.Ay,{type:"primary",icon:(0,E.jsx)(C.A,{}),onClick:A,loading:w,size:"large",children:"Detect Conflicts"})]})}),w?(0,E.jsxs)("div",{style:{textAlign:"center",padding:"50px 0"},children:[(0,E.jsx)(f.A,{size:"large"}),(0,E.jsx)("div",{style:{marginTop:16},children:(0,E.jsx)(D,{children:"Analyzing infrastructure for conflicts..."})})]}):t?(0,E.jsxs)(E.Fragment,{children:[(()=>{if(!t||!t.conflicts)return null;const e=t.conflicts,r=e.length,s=e.filter(e=>e.auto_resolved).length,a=e.filter(e=>{var t,r;return"high"===(null===(t=e.severity)||void 0===t?void 0:t.toLowerCase())||"critical"===(null===(r=e.severity)||void 0===r?void 0:r.toLowerCase())}).length,n=e.filter(e=>{var t;return"medium"===(null===(t=e.severity)||void 0===t?void 0:t.toLowerCase())}).length,c=e.filter(e=>{var t;return"low"===(null===(t=e.severity)||void 0===t?void 0:t.toLowerCase())}).length;return(0,E.jsx)(o.A,{style:{marginBottom:16},children:(0,E.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:16,textAlign:"center"},children:[(0,E.jsxs)("div",{children:[(0,E.jsx)(L,{level:3,style:{margin:0,color:r>0?"#ff4d4f":"#52c41a"},children:r}),(0,E.jsx)(D,{type:"secondary",children:"Total Conflicts"})]}),s>0&&(0,E.jsxs)("div",{children:[(0,E.jsx)(L,{level:3,style:{margin:0,color:"#52c41a"},children:s}),(0,E.jsx)(D,{type:"secondary",children:"Auto-Resolved"})]}),a>0&&(0,E.jsxs)("div",{children:[(0,E.jsx)(L,{level:3,style:{margin:0,color:"#ff4d4f"},children:a}),(0,E.jsx)(D,{type:"secondary",children:"High Severity"})]}),n>0&&(0,E.jsxs)("div",{children:[(0,E.jsx)(L,{level:3,style:{margin:0,color:"#faad14"},children:n}),(0,E.jsx)(D,{type:"secondary",children:"Medium Severity"})]}),c>0&&(0,E.jsxs)("div",{children:[(0,E.jsx)(L,{level:3,style:{margin:0,color:"#52c41a"},children:c}),(0,E.jsx)(D,{type:"secondary",children:"Low Severity"})]})]})})})(),(()=>{if(!t)return null;if(!t.conflicts||0===t.conflicts.length)return(0,E.jsx)(o.A,{children:(0,E.jsx)(h.A,{description:"No conflicts detected",image:(0,E.jsx)(S.A,{style:{fontSize:64,color:"#52c41a"}}),children:(0,E.jsx)(D,{type:"secondary",children:"Your infrastructure appears to be conflict-free!"})})});const e=[...t.conflicts].sort((e,t)=>{var r,s;const a={critical:4,high:3,medium:2,low:1},n=a[null===(r=e.severity)||void 0===r?void 0:r.toLowerCase()]||0;return(a[null===(s=t.severity)||void 0===s?void 0:s.toLowerCase()]||0)-n});return(0,E.jsx)("div",{children:e.map((e,t)=>((e,t)=>{const r=(e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"high":case"critical":return{color:"red",text:"High"};case"medium":return{color:"orange",text:"Medium"};case"low":return{color:"yellow",text:"Low"};default:return{color:"default",text:"Unknown"}}})(e.severity);return(0,E.jsx)(o.A,{size:"small",style:{marginBottom:16},title:(0,E.jsxs)(c.A,{children:[R(e.type),(0,E.jsx)(D,{strong:!0,children:e.resource_id||e.resourceID}),(0,E.jsx)(l.A,{color:r.color,children:r.text}),e.auto_resolved&&(0,E.jsx)(l.A,{color:"success",icon:(0,E.jsx)(S.A,{}),children:"Auto-Resolved"})]}),extra:(0,E.jsx)(D,{type:"secondary",style:{fontSize:12},children:e.type||"Unknown Type"}),children:(0,E.jsxs)(c.A,{direction:"vertical",size:"middle",style:{width:"100%"},children:[(0,E.jsxs)("div",{children:[(0,E.jsx)(D,{strong:!0,children:"Conflict Details:"}),(0,E.jsx)(_,{style:{marginBottom:0,marginTop:4},children:e.details||e.description||"No details available"})]}),e.affected_resources&&e.affected_resources.length>0&&(0,E.jsxs)("div",{children:[(0,E.jsx)(D,{strong:!0,children:"Affected Resources:"}),(0,E.jsx)("div",{style:{marginTop:4},children:e.affected_resources.map((e,t)=>(0,E.jsx)(l.A,{style:{margin:2},children:e},t))})]}),e.resolution_steps&&e.resolution_steps.length>0&&(0,E.jsxs)("div",{children:[(0,E.jsx)(D,{strong:!0,children:"Resolution Steps:"}),(0,E.jsx)(i.A,{size:"small",dataSource:e.resolution_steps,renderItem:(e,t)=>(0,E.jsx)(i.A.Item,{style:{padding:"4px 0"},children:(0,E.jsxs)(D,{children:[t+1,". ",e]})})})]}),e.recommendations&&(0,E.jsxs)("div",{children:[(0,E.jsx)(D,{strong:!0,children:"Recommendations:"}),(0,E.jsx)(_,{style:{marginBottom:0,marginTop:4},children:e.recommendations})]}),e.impact&&(0,E.jsx)(d.A,{message:"Impact Assessment",description:e.impact,type:"info",showIcon:!0,size:"small"})]})},t)})(e,t))})})(),t.scan_time&&(0,E.jsx)(o.A,{size:"small",children:(0,E.jsxs)(D,{type:"secondary",children:["Scan completed in ",t.scan_time,"ms \u2022 Last updated: ",(new Date).toLocaleString()]})})]}):(0,E.jsx)(o.A,{style:{marginTop:16},children:(0,E.jsx)(h.A,{description:"No conflict analysis performed yet",image:h.A.PRESENTED_IMAGE_SIMPLE,children:(0,E.jsx)(p.Ay,{type:"primary",onClick:A,children:"Start Conflict Detection"})})})]})}},2411:(e,t,r)=>{r.d(t,{A:()=>l});var s=r(5043),a=r(4423),n=r(6571);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},o.apply(this,arguments)}const c=(e,t)=>s.createElement(n.A,o({},e,{ref:t,icon:a.A}));const l=s.forwardRef(c)},4423:(e,t)=>{t.A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"}},7250:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(9379);const a=new class{constructor(){this.mockEnabled=!1,console.log("MockDataService initialized. Mock enabled:",this.mockEnabled)}async delay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;return new Promise(t=>setTimeout(t,e))}async loadMockData(e){try{const t=await fetch("/mocks/".concat(e));if(!t.ok)throw new Error("Failed to load mock data: ".concat(e));return await t.json()}catch(t){throw console.error("Error loading mock data:",t),t}}async getDependencyGraph(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;await this.delay(800);try{let t;t="live"===e?"mock-discovery-live.json":"mock-generate-graph.json";const r=await this.loadMockData(t);return this.transformGraphData(r)}catch(t){throw console.error("Mock getDependencyGraph error:",t),new Error("Failed to load mock dependency graph: ".concat(t.message))}}transformGraphData(e){if(e.mermaid&&e.graph)return{mermaid:e.mermaid,graph:e.graph,timestamp:e.timestamp||(new Date).toISOString(),metadata:e.metadata||this.generateDefaultMetadata(e),source:e.source||"unknown",format:e.format||"mermaid"};if(e.mermaid)return{mermaid:e.mermaid,graph:null,timestamp:e.timestamp||(new Date).toISOString(),metadata:e.metadata||this.generateDefaultMetadata(e)};if(e.graph&&e.graph.edges){return{mermaid:this.convertGraphToMermaid(e.graph),graph:e.graph,timestamp:(new Date).toISOString(),metadata:this.generateMetadataFromGraph(e.graph)}}throw new Error("Invalid mock data format")}convertGraphToMermaid(e){const t=["graph TD"],r=new Set,s={};return e.edges.forEach(e=>{r.add(e.source),r.add(e.target);const t=e.source.replace(/[^a-zA-Z0-9_]/g,"_"),a=e.target.replace(/[^a-zA-Z0-9_]/g,"_");e.source.startsWith("vpc-")?s[t]="vpc":e.source.startsWith("subnet-")?s[t]="subnet":e.source.startsWith("sg-")?s[t]="sg":e.source.startsWith("i-")?s[t]="ec2":e.source.startsWith("lt-")?s[t]="lt":e.source.startsWith("nat-")?s[t]="natgw":e.source.includes("targetgroup")?s[t]="tg":e.source.includes("loadbalancer")||e.source.includes("app/")||e.source.includes("net/")?s[t]="lb":(e.source.includes("database")||e.source.includes("cluster"))&&(s[t]="rds"),e.target.startsWith("vpc-")?s[a]="vpc":e.target.startsWith("subnet-")?s[a]="subnet":e.target.startsWith("sg-")?s[a]="sg":e.target.startsWith("i-")?s[a]="ec2":e.target.startsWith("lt-")?s[a]="lt":e.target.startsWith("nat-")?s[a]="natgw":e.target.includes("targetgroup")?s[a]="tg":e.target.includes("loadbalancer")||e.target.includes("app/")||e.target.includes("net/")?s[a]="lb":(e.target.includes("database")||e.target.includes("cluster"))&&(s[a]="rds")}),t.push(""),r.forEach(e=>{const r=s[e]||"default",a=e.replace(/[^a-zA-Z0-9_]/g,"_");t.push("    ".concat(a,'["').concat(e,'"]:::').concat(r))}),t.push(""),e.edges.forEach(e=>{const r=e.source.replace(/[^a-zA-Z0-9_]/g,"_"),s=e.target.replace(/[^a-zA-Z0-9_]/g,"_");t.push("    ".concat(r," --\x3e ").concat(s))}),t.push(""),t.push("    classDef vpc fill:#e1f5fe"),t.push("    classDef subnet fill:#b3e5fc"),t.push("    classDef ec2 fill:#fff3e0"),t.push("    classDef sg fill:#f3e5f5"),t.push("    classDef lb fill:#e8f5e8"),t.push("    classDef asg fill:#fce4ec"),t.push("    classDef natgw fill:#e0f2f1"),t.push("    classDef tg fill:#f1f8e9"),t.push("    classDef rds fill:#fff9c4"),t.push("    classDef lt fill:#fce4ec"),t.push("    classDef default fill:#f5f5f5"),t.join("\n")}generateMetadataFromGraph(e){const t={},r=new Set;return e.edges.forEach(e=>{r.add(e.source),r.add(e.target);const s=this.detectNodeType(e.source),a=this.detectNodeType(e.target);t[s]=(t[s]||0)+1,t[a]=(t[a]||0)+1}),{nodeCount:r.size,edgeCount:e.edges.length,resourceTypeCounts:t,bottlenecks:this.generateMockBottlenecks(r)}}detectNodeType(e){return e.startsWith("vpc-")?"VPC":e.startsWith("subnet-")?"Subnet":e.startsWith("sg-")?"Security Group":e.startsWith("i-")?"EC2 Instance":e.startsWith("lt-")?"Launch Template":e.includes("targetgroup")?"Target Group":e.includes("loadbalancer")?"Load Balancer":"Other"}generateMockBottlenecks(e){const t=[];let r=0;return e.forEach(e=>{r>=3||e.startsWith("vpc-")&&(t.push({resource:e,dependents:Math.floor(20*Math.random())+10,impact:"high",reason:"Multiple resources depend on this VPC"}),r++)}),t}generateDefaultMetadata(e){return{nodeCount:0,edgeCount:0,resourceTypeCounts:{},bottlenecks:[]}}};const n=new class{constructor(){this.baseURL="http://localhost:8080/api",this.baseURL=this.baseURL.replace(/\/$/,""),this.mockEnabled=!1,console.log("ApiService initialized with baseURL:",this.baseURL),console.log("Mock mode enabled:",this.mockEnabled)}async call(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="".concat(this.baseURL).concat(e),a=(0,s.A)({headers:(0,s.A)({"Content-Type":"application/json"},t.headers)},t);try{const e=await fetch(r,a);if(!e.ok){let t="HTTP ".concat(e.status,": ").concat(e.statusText),r=null;try{const s=await e.text();if(s)try{const e=JSON.parse(s);e.error?t=e.error:e.message?t=e.message:e.detail&&(t=e.detail),r=e}catch(n){s.length<200&&(t=s)}}catch(o){console.warn("Could not read error response body:",o)}const s=new Error(t);throw s.status=e.status,s.statusText=e.statusText,s.details=r,s}const t=await e.text();if(!t)throw new Error("Empty response from server");try{return JSON.parse(t)}catch(n){throw console.error("JSON parse error:",n),console.error("Response text:",t),new Error("Invalid JSON response: ".concat(n.message))}}catch(c){if(console.error("API call failed for ".concat(e,":"),c),"TypeError"===c.name&&"Failed to fetch"===c.message){const e=new Error("Unable to connect to server. Please check your internet connection and try again.");throw e.originalError=c,e.isNetworkError=!0,e}if("AbortError"===c.name){const e=new Error("Request timed out. Please try again.");throw e.originalError=c,e.isTimeoutError=!0,e}throw c}}async processAgentRequest(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.call("/agent/process",{method:"POST",body:JSON.stringify({request:e,dry_run:t})})}async executeConfirmedPlan(e){return this.call("/agent/execute",{method:"POST",body:JSON.stringify({decisionId:e})})}async getInfrastructureState(){const e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"?discovered_only=true":"";return this.call("/state".concat(e))}async discoverInfrastructure(){return this.call("/discover",{method:"POST"})}async exportState(){const e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"?include_discovered=true":"",t=await fetch("".concat(this.baseURL,"/export").concat(e));if(!t.ok)throw new Error("Export failed: ".concat(t.statusText));return t.blob()}async getDependencyGraph(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.mockEnabled)return console.log("Using mock data for getDependencyGraph, source:",e),a.getDependencyGraph(e);const t=e?"?source=".concat(e):"";return this.call("/graph".concat(t))}async detectConflicts(){const e=new URLSearchParams({auto_resolve:(arguments.length>0&&void 0!==arguments[0]&&arguments[0]).toString()});return this.call("/conflicts?".concat(e))}async generateDeploymentPlan(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=new URLSearchParams;return e.length>0&&e.forEach(e=>{r.append("target_resources",e)}),r.set("include_levels",t.toString()),this.call("/plan?".concat(r))}downloadFile(e,t){const r=window.URL.createObjectURL(e),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r)}getCurrentTimestamp(){return(new Date).toISOString().split("T")[0]}getBaseURL(){return this.baseURL}getConfig(){return{baseURL:this.baseURL,wsURL:"ws://localhost:8080/ws",environment:"production"}}}}}]);
//# sourceMappingURL=2374.75cb7c60.chunk.js.map