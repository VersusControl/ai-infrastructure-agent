"use strict";(self.webpackChunkweb_ui_react=self.webpackChunkweb_ui_react||[]).push([[570],{4570:(t,e,a)=>{a.d(e,{diagram:()=>y});var n,o=a(9379),r=a(5099),i=a(7274),c=a(8887),l=a(9263),s=a(2748),d=a(5502),b=l.UI.packet,p=(n=class{constructor(){this.packet=[],this.setAccTitle=l.SV,this.getAccTitle=l.iN,this.setDiagramTitle=l.ke,this.getDiagramTitle=l.ab,this.getAccDescription=l.m7,this.setAccDescription=l.EI}getConfig(){const t=(0,c.$t)((0,o.A)((0,o.A)({},b),(0,l.zj)().packet));return t.showBits&&(t.paddingY+=10),t}getPacket(){return this.packet}pushWord(t){t.length>0&&this.packet.push(t)}clear(){(0,l.IU)(),this.packet=[]}},(0,s.K2)(n,"PacketDB"),n),h=(0,s.K2)((t,e)=>{(0,i.S)(t,e);let a=-1,n=[],o=1;const{bitsPerRow:r}=e.getConfig();for(let{start:i,end:c,bits:l,label:d}of t.blocks){if(void 0!==i&&void 0!==c&&c<i)throw new Error("Packet block ".concat(i," - ").concat(c," is invalid. End must be greater than start."));if(null!==i&&void 0!==i||(i=a+1),i!==a+1)throw new Error("Packet block ".concat(i," - ").concat(null!==c&&void 0!==c?c:i," is not contiguous. It should start from ").concat(a+1,"."));if(0===l)throw new Error("Packet block ".concat(i," is invalid. Cannot have a zero bit field."));for(null!==c&&void 0!==c||(c=i+(null!==l&&void 0!==l?l:1)-1),null!==l&&void 0!==l||(l=c-i+1),a=c,s.Rm.debug("Packet block ".concat(i," - ").concat(a," with label ").concat(d));n.length<=r+1&&e.getPacket().length<1e4;){const[t,a]=k({start:i,end:c,bits:l,label:d},o,r);if(n.push(t),t.end+1===o*r&&(e.pushWord(n),n=[],o++),!a)break;({start:i,end:c,bits:l,label:d}=a)}}e.pushWord(n)},"populate"),k=(0,s.K2)((t,e,a)=>{if(void 0===t.start)throw new Error("start should have been set during first phase");if(void 0===t.end)throw new Error("end should have been set during first phase");if(t.start>t.end)throw new Error("Block start ".concat(t.start," is greater than block end ").concat(t.end,"."));if(t.end+1<=e*a)return[t,void 0];const n=e*a-1,o=e*a;return[{start:t.start,end:n,label:t.label,bits:n-t.start},{start:o,end:t.end,label:t.label,bits:t.end-o}]},"getNextFittingBlock"),u={parser:{yy:void 0},parse:(0,s.K2)(async t=>{var e;const a=await(0,d.qg)("packet",t),n=null===(e=u.parser)||void 0===e?void 0:e.yy;if(!(n instanceof p))throw new Error("parser.parser?.yy was not a PacketDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");s.Rm.debug(a),h(a,n)},"parse")},g=(0,s.K2)((t,e,a,n)=>{const o=n.db,i=o.getConfig(),{rowHeight:c,paddingY:s,bitWidth:d,bitsPerRow:b}=i,p=o.getPacket(),h=o.getDiagramTitle(),k=c+s,u=k*(p.length+1)-(h?0:c),g=d*b+2,w=(0,r.D)(e);w.attr("viewbox","0 0 ".concat(g," ").concat(u)),(0,l.a$)(w,u,g,i.useMaxWidth);for(const[r,l]of p.entries())f(w,l,r,i);w.append("text").text(h).attr("x",g/2).attr("y",u-k/2).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","packetTitle")},"draw"),f=(0,s.K2)((t,e,a,n)=>{let{rowHeight:o,paddingX:r,paddingY:i,bitWidth:c,bitsPerRow:l,showBits:s}=n;const d=t.append("g"),b=a*(o+i)+i;for(const p of e){const t=p.start%l*c+1,e=(p.end-p.start+1)*c-r;if(d.append("rect").attr("x",t).attr("y",b).attr("width",e).attr("height",o).attr("class","packetBlock"),d.append("text").attr("x",t+e/2).attr("y",b+o/2).attr("class","packetLabel").attr("dominant-baseline","middle").attr("text-anchor","middle").text(p.label),!s)continue;const a=p.end===p.start,n=b-2;d.append("text").attr("x",t+(a?e/2:0)).attr("y",n).attr("class","packetByte start").attr("dominant-baseline","auto").attr("text-anchor",a?"middle":"start").text(p.start),a||d.append("text").attr("x",t+e).attr("y",n).attr("class","packetByte end").attr("dominant-baseline","auto").attr("text-anchor","end").text(p.end)}},"drawWord"),w={draw:g},m={byteFontSize:"10px",startByteColor:"black",endByteColor:"black",labelColor:"black",labelFontSize:"12px",titleColor:"black",titleFontSize:"14px",blockStrokeColor:"black",blockStrokeWidth:"1",blockFillColor:"#efefef"},v=(0,s.K2)(function(){let{packet:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=(0,c.$t)(m,t);return"\n\t.packetByte {\n\t\tfont-size: ".concat(e.byteFontSize,";\n\t}\n\t.packetByte.start {\n\t\tfill: ").concat(e.startByteColor,";\n\t}\n\t.packetByte.end {\n\t\tfill: ").concat(e.endByteColor,";\n\t}\n\t.packetLabel {\n\t\tfill: ").concat(e.labelColor,";\n\t\tfont-size: ").concat(e.labelFontSize,";\n\t}\n\t.packetTitle {\n\t\tfill: ").concat(e.titleColor,";\n\t\tfont-size: ").concat(e.titleFontSize,";\n\t}\n\t.packetBlock {\n\t\tstroke: ").concat(e.blockStrokeColor,";\n\t\tstroke-width: ").concat(e.blockStrokeWidth,";\n\t\tfill: ").concat(e.blockFillColor,";\n\t}\n\t")},"styles"),y={parser:u,get db(){return new p},renderer:w,styles:v}},7274:(t,e,a)=>{function n(t,e){var a,n,o;t.accDescr&&(null===(a=e.setAccDescription)||void 0===a||a.call(e,t.accDescr));t.accTitle&&(null===(n=e.setAccTitle)||void 0===n||n.call(e,t.accTitle));t.title&&(null===(o=e.setDiagramTitle)||void 0===o||o.call(e,t.title))}a.d(e,{S:()=>n}),(0,a(2748).K2)(n,"populateCommonDb")}}]);
//# sourceMappingURL=570.f504c0fe.chunk.js.map